define('common-login-i18n-props',[],function(){return{"common.login.common.decisionsocial.heading":"Have we met?","common.login.common.connectsocial.heading":"Connect accounts","common.login.common.createpassword.heading":"Reset your password","common.login.common.registersocial.heading":"Sign up and find seats you'll love","common.login.common.register.heading":"Sign up","common.login.common.register.heading.1":"Sign up and make it happen","common.login.common.register.heading.2":"Sign up and make it happen","common.login.common.resetpassword.heading":"Reset your password","common.login.common.resetpassword.heading.success":"Check your email","common.login.common.signin.heading":"Get seats you'll love, anytime","common.login.common.signin.heading.4":"Login","common.login.common.msgbanner.success":"You're signed in and ready to roll!","common.login.common.msgbanner.accountlinked":"This StubHub account is already linked to a different Facebook account.","common.login.common.loading.signingin.text":"Signing in","common.login.common.partnerstag":"Official Fan to Fan Ticket Marketplace","common.login.common.signin.success.banner":"You're signed in and ready to roll!","common.login.common.login.text":"Login","common.login.common.signintitle":"Sign in","common.login.common.signuptitle":"Sign up","common.login.common.signup.link":"Sign up.","common.login.common.resetpassword.link":"Forgot your password?","common.login.common.username.text":"Login","common.login.common.password.text":"Password","common.login.common.loading.text":"One moment","common.login.common.success.createpassword":"Your password has been reset.","common.login.common.error.invalidemail":"Enter a valid email address.","common.login.common.error.invalidpassword":"Enter a valid password.","common.login.common.error.invalidconfirmpassword":"Oops! Those passwords don't match.","common.login.common.error.genericerror":"Hmm, that didn't work. Give it another shot.","common.login.common.error.tokenerror":"Sorry, there was a problem. We need you to sign in or reset your password.","common.login.common.error.loginaftercreatepassword":"We've reset your password. Go ahead and sign in!","common.login.common.error.400":"We didn't recognize that email address. Give it another try or","common.login.common.error.403":"Enter a valid email and password combo. Need help?","common.login.logo.image.alt":"StubHub - Where Fans Buy & Sell Tickets","common.login.common.error.timeout":"Oopse, the request took too long. Please try again.","common.login.common.linkmatchaccount.heading":"Well, hello again","common.login.common.linkexistingaccount.heading":"Sign in and make it happen","common.login.common.heading":"Get seats you'll love, anytime","common.login.common.error.emptyfields":"Oops! We need all fields populated.","common.login.common.error.emptyemail":"Oops! We need an email address.","common.login.common.error.emailformat":"Oops! We didn't recognize that email.","common.login.common.error.emptypassword":"Oops! We need a password.","common.login.common.error.emptyfirstname":"Oops! We need first name.","common.login.common.error.emptylastname":"Oops! We need last name.","common.login.common.error.incorrectpwd2tries":"Oops! Your password is incorrect. Please reset it to access your account.","common.login.common.error.incorrectemailpwd":"We don't recognize this email and password combo. Please try another combo or sign up for a new account.","common.login.common.error.servererror":"Server Error!","common.login.common.error.sentanemail":"We sent you an email.","common.login.common.error.invalidUAFormat":"Invalid user agreement format.","common.login.common.or":"OR","common.login.common.error.emptyemailpwd":"We need your email and password.","common.login.common.error.multiplefields":"Some fields need your attention.","common.login.common.error.firstname.empty":"We need your first name.","common.login.common.error.lastname.empty":"We need your last name.","common.login.common.error.email.empty":"We need your email address.","common.login.common.error.password.empty":"We need a password.","common.login.common.socialconnect.label":"Connect with friends on StubHub","common.login.register.welcomenote":"Join StubHub","common.login.register.social.welcomenote":"We'll create your StubHub account using","common.login.register.signuptitle":"Sign up","common.login.register.invalidemail":"Oops! That doesn't look like an email address.","common.login.register.invalidpwd":"Oops! Your password needs to be 8-20 characters; a combo of numbers, letters, and/or special characters; and cannot be your email address.","common.login.register.emailpwderror":"Enter a valid Email and Password","common.login.register.firstname.empty":"Enter first name","common.login.register.lastname.empty":"Enter last name","common.login.register.name.length.error":"Your name needs to be 50 characters only!","common.login.register.signupwithfacebook":"Sign up with Facebook","common.login.register.mask.hide":"HIDE","common.login.register.mask.show":"SHOW","common.login.register.password.error.email":"Your password can’t be your email address.","common.login.register.password.error.max.character":"Use 8–20 characters.","common.login.register.password.error.one.letter":"Use at least 1 letter.","common.login.register.password.error.one.number":"Use at least 1 number.","common.login.register.password.error.min.eight":"Use at least 8 characters.","common.login.register.password.has.invalidcharacter":"Use a valid character (!, @, #, $, +, &, *, ^, %, (, ), ?, <, >).","common.login.register.accountexists":"Looks like your email address is already registered with StubHub.","common.login.register.email.invalid":"Please enter a valid email address.","common.login.resetpassword.welcomenote":"Reset password","common.login.resetpassword.resettitle":"Reset","common.login.resetpassword.sendemail":"Send email","common.login.resetpassword.success":"Got it! We sent you an email with a link to reset your password. If you don't receive it in a few minutes, check your junk folder.","common.login.signin.signinnote":"Welcome back, sign in","common.login.signin.error.passwordlength":"Password length must be within range 8 - 20.","common.login.signin.error.passwordformat":"Oops! We didn't recognize that password.","common.login.signin.userAgreementMissingError":"User Agreement not accepted.","common.login.signin.error.invalidemailpwd":"Enter a valid email and password combo.","common.login.signin.signinwithfacebook":"Sign in with Facebook","common.login.connectsocial.resetpassword":"Forgot your password?","common.login.connectsocial.newtostubhub":"New to StubHub?","common.login.connectsocial.signup":"Sign up","common.login.connectsocial.placeholder.email":"Current StubHub email","common.login.connectsocial.placeholder.password":"StubHub password","common.login.connectsocial.button.linkaccounts":"Link accounts","common.login.connectsocial.signintoconnect":"Sign in to StubHub to connect your accounts.","common.login.connectsocial.changestubhubemail":"We'll change your StubHub email address to match Facebook,","common.login.connectsocial.giveusstubhubpassword":"Give us your StubHub password and we'll sign you in!","common.login.connectsocial.button.signin":"Sign in","common.login.connectsocial.oneclickaway":"Just one more click after giving us your StubHub password.","common.login.createpassword.title":"Reset password","common.login.createpassword.setpassword":"Set new password","common.login.createpassword.placeholder.email":"Email","common.login.createpassword.placeholder.password":"New password","common.login.createpassword.placeholder.confirmpassword":"Confirm new password","common.login.createpassword.reset":"Reset password","common.login.createpassword.signin":"Sign in","common.login.createpassword.gotit":"Got it!","common.login.createpassword.success.note1":"Your password has been reset.","common.login.createpassword.placeholder.reenterpassword":"Re-enter password","common.login.createpassword.resetpassword":"Reset password","common.login.createpassword.fbstubhublinkmessage":"Give us a new password and we'll link your account to Facebook and sign you in.","common.login.decisionsocial.welcomenote":"Do you want to create a new StubHub account or link an existing account to Facebook?","common.login.decisionsocial.button.createnew":"Create new account","common.login.decisionsocial.button.linkexisting":"Link existing account","common.login.decisionsocial.resetpassword":"Forgot your password?","common.login.common.marketing.message":"Your ticket out","common.login.common.markteing.76ers.message":"Let’s go Sixers! You’re just a slam dunk away from viewing your ticket details. Enjoy the game!","common.login.registersocial.form.placeholder.firstname":"First name","common.login.registersocial.form.placeholder.lastname":"Last name","common.login.registersocial.form.placeholder.email":"Enter Email","common.login.register.emailsignup":"Send me emails about upcoming events","common.login.register.rewardstext.part2":"program terms.","common.login.register.termstext.part1":"By signing up, you agree to our","common.login.register.termstext.part2":"user agreement","common.login.register.termstext.part3":"and","common.login.register.termstext.part4":"privacy notice","common.login.register.alreadyamember":"Already a member?","common.login.register.haveastubhubaccount":"Have a StubHub account?","common.login.registersocial.form.haveanaccount":"Have an account?","common.login.registersocial.form.signintitle":"Sign in","common.login.registersocial.form.signuptitle":"Sign up","common.login.register.social.form.placeholder.firstname":"First name","common.login.register.social.form.placeholder.lastname":"Last name","common.login.registersocial.createaccount":"We'll create your StubHub account using","common.login.registersocial.signuptitle":"Sign up","common.login.registersocial.haveanaccount":"Have an account?","common.login.registersocial.connect":"Connect","common.login.register.passwordhint":"Password should be alphanumeric.","common.login.register.facebookconnect":"Facebook Connect","common.login.register.placeholder.firstname":"First name","common.login.register.placeholder.lastname":"Last name","common.login.register.placeholder.email":"Email","common.login.register.placeholder.password":"Password","common.login.register.hint.mineight":"Minimum of 8 characters","common.login.register.hint.oneletter":"1 letter","common.login.register.hint.onenumber":"1 number","common.login.register.signupwithstubhub":"Sign up with StubHub","common.login.resetpassword.subnote":"Give us the email address you used to create your StubHub account, we’ll send you an email to help you reset your password.","common.login.resetpassword.success.note1":"OK!","common.login.resetpassword.success.note2":"We emailed you a link to reset your password.\t","common.login.resetpassword.success.note3":"If you don’t receive it in a few minutes, check your junk mail folder.","common.login.resetpassword.placeholder.email":"Email","common.login.resetpassword.placeholder.password":"New password","common.login.resetpassword.placeholder.confirmpassword":"Re-enter password","common.login.resetpassword.placeholder.facebook.note":"Sign in with Facebook and you don’t need a password!","common.login.resetpassword.checkupcomingevents":"Check upcoming events","common.login.signin.resetpassword":"Forgot your password?","common.login.signin.newtostubhub":"New to StubHub?","common.login.signin.placeholder.email":"Email","common.login.signin.placeholder.password":"Password","common.login.userAgreement.customerService.message":"This user has not accepted the user agreement for this domain. <br/>Please ask the customer to login and accept the user agreement before continuing.<p>After they accept the user agreement, click the signin button below</p>","common.login.userAgreement.customerService.loginText":"Sign In","common.login.userAgreement.customerService.title":"User Agreement Issue","common.login.userAgreement.title":"User Agreement","common.login.userAgreement.agreeText":"I Agree"}});
(function(){dust.register("connect-social-form",body_0);function body_0(chk,ctx){return chk.write("<div class=\"auth-container fadeIn\"><div class=\"welcome-note\"><div class=\"subnote\">Sign in to StubHub to connect your accounts.</div></div><div class=\"form-container\"><form name=\"connect-social-form\" method=\"POST\" id=\"connect-social-form\" ><div id=\"message-box\" class=\"login-error hidden\"></div><input class=\"input-box\" type=\"text\" name=\"email-id\" id=\"email-id\" placeholder='Current StubHub email' autocorrect=\"off\" autocapitalize=\"off\" autofocus spellcheck=\"false\"/><input class=\"input-box\" type=\"password\" name=\"password\" id=\"password\" placeholder='StubHub password' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"/><button type=\"submit\" class=\"auth-button sign-in\" data-title='Sign in'>Sign in</button></form></div><div class=\"reset-link clearfix\"><a href=\"\" id=\"reset-password\">Forgot your password?</a></div><div class=\"auth-box\">New to StubHub? <a class=\"auth-link\" id=\"register-user\">Sign up</a></div></div>");}return body_0;})();
(function(){dust.register("connect-social",body_0);function body_0(chk,ctx){return chk.write("<div class=\"auth-container fadeIn\"><div class=\"welcome-note\"><div class=\"subnote\">Sign in to StubHub to connect your accounts.</div></div><div class=\"form-container\"><form name=\"connect-social-form\" method=\"POST\" id=\"connect-social-form\" ><div id=\"message-box\" class=\"login-error hidden\"></div><input class=\"input-box\" type=\"text\" name=\"email-id\" id=\"email-id\" placeholder='Current StubHub email' autocorrect=\"off\" autocapitalize=\"off\" autofocus spellcheck=\"false\"/><input class=\"input-box\" type=\"password\" name=\"password\" id=\"password\" placeholder='StubHub password' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"/><button type=\"submit\" class=\"auth-button sign-in\" data-title='Link accounts'>Link accounts</button></form></div><div class=\"reset-link clearfix\"><a href=\"\" id=\"reset-password\">Forgot your password?</a></div><div class=\"auth-box\">New to StubHub? <a class=\"auth-link\" id=\"register-user\">Sign up</a></div></div>");}return body_0;})();
(function(){dust.register("createpassword",body_0);function body_0(chk,ctx){return chk.write("<div id=\"createpassword\" class=\"auth-container\"><div id=\"fblink-message\" class=\"fblink-message hidden\">Give us a new password and we'll link your account to Facebook and sign you in.</div><div id=\"createpassword-container\"><form name=\"createpassword-form\" method=\"post\" id=\"createpassword-form\"><div class=\"create-password hidden\" id=\"create-password\"><div class=\"password-box\"><label for=\"password\">New password</label><input class=\"input-box\" type=\"password\" name=\"password\" id=\"password\" placeholder='New password' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" value=\"").reference(ctx._get(false, ["password"]),ctx,"h").write("\"><button type=\"button\" class=\"mask-toggle\" >SHOW</button></div><div class=\"interactive-hint\"><span class=\"min-eight disable\">Minimum of 8 characters</span><span class=\"one-letter disable\">1 letter</span><span class=\"one-number disable\">1 number</span></div><button type=\"submit\" class=\"auth-button\" data-title=\"Reset password\">Reset password</button></div><div id=\"message-box\" class=\"login-error hidden\"></div><div class=\"try-again hidden\" id=\"try-again\"><button type=\"button\" id=\"sign-in\" class=\"auth-button sign-in\">Sign in</button><a id=\"reset-password\" class=\"auth-link reset-password\">Reset password</a></div><div class=\"create-success hidden\" id=\"create-success\"><button type=\"button\" id=\"got-it\" class=\"auth-button got-it\">Got it!</button></div></form></div></div>");}return body_0;})();
(function(){dust.register("decision-social",body_0);function body_0(chk,ctx){return chk.write("<div class=\"auth-container fadeIn\"><div class=\"welcome-note\"><div class=\"subnote\">Do you want to create a new StubHub account or link an existing account to Facebook?</div></div><div class=\"form-container\"><form name=\"decision-form\"><div id=\"message-box\" class=\"login-error hidden\"></div><button class=\"auth-button-secondary\" id=\"register-social\" data-title='Create new account'>Create new account</button><button class=\"auth-button-secondary\" id=\"connect-social\" data-title='Link existing account'>Link existing account</button></form></div><div class=\"auth-box\"><a href=\"\" id=\"reset-password\">Forgot your password?</a></div></div>");}return body_0;})();
(function(){dust.register("header",body_0);function body_0(chk,ctx){return chk.write("<div class=\"login-header-container\"><div class='logo ").reference(ctx._get(false, ["logoClass"]),ctx,"h").write("'><img src='").reference(ctx._get(false, ["shLogoImgUrl"]),ctx,"h").write("' alt=\"StubHub - Where Fans Buy & Sell Tickets\"/></div><aside class='partners'><span class='partner-logo'>Partner Logo</span><span class='category'>Partners category</span><h4 class='tagline'>Official Fan to Fan Ticket Marketplace</h4></aside><div class='sh76ers'><img src='").reference(ctx._get(false, ["sh76ersLogo"]),ctx,"h").write("' class=\"sh-76ers-logo\"/></div><div class=\"close\"><span id=\"closeIcon\" class=\"sh-iconset sh-iconset-close\"></span></div><div class=\"heading\">").reference(ctx._get(false, ["heading"]),ctx,"h").write("</div></div>");}return body_0;})();
(function(){dust.register("login-layout",body_0);function body_0(chk,ctx){return chk.write("<div class=\"sh-ui-login\"><div id=\"login-left-panel\" class=\"login-left-panel\"><div id=\"left-divider\"></div><!-- <div id=\"left-content\">Your ticket out</div> --><div id=\"left-content\">").reference(ctx._get(false, ["marketingMessage"]),ctx,"h").write("</div></div><div id=\"login-right-panel\" class=\"login-right-panel\"><header id=\"login-header\"></header><div id=\"content_view_container\"></div></div></div>");}return body_0;})();
(function(){dust.register("register-social",body_0);function body_0(chk,ctx){return chk.write("<div class=\"auth-container\"><form name=\"register-form\" method=\"post\" id=\"register-form\" ><input class=\"input-box\" type=\"text\" name=\"first-name\" id=\"first-name\" placeholder='First name' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" maxlength=\"50\" autofocus><input class=\"input-box\" type=\"text\" name=\"last-name\" id=\"last-name\" placeholder='Last name' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" maxlength=\"50\"><input class=\"input-box\" type=\"text\" name=\"email-id\" id=\"email-id\" placeholder='Email' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" value=\"").reference(ctx._get(false, ["username"]),ctx,"h").write("\"><div id=\"message-box\" class=\"login-error hidden\"></div><div class=\"email-box\"><div class=\"email-box-left\"><input type=\"checkbox\" name=\"email-optin-chk\" id=\"email-optin-chk\" ").notexists(ctx._get(false, ["uncheckOptIn"]),ctx,{"block":body_1},null).write(" /><label for=\"email-optin-chk\">Send me emails about upcoming events</label></div></div><div class=\"register-button\"><button type=\"submit\" name=\"register\" class=\"auth-button\" data-title='Sign up'>Sign up</button><p class=\"accept-term\">By signing up, you agree to our <a href=\"/legal/?section=ua\" id=\"user-agreement\" target=\"_blank\">user agreement</a><br/>and <a href=\"/legal/?section=pp\" id=\"privacy-policy\" target=\"_blank\">privacy notice</a>.</p></div></form><div class=\"auth-box clearfix\">Have a StubHub account? <a class=\"auth-link\" id=\"signin-user\">Sign in</a></div></div>");}function body_1(chk,ctx){return chk.write("checked");}return body_0;})();
(function(){dust.register("register",body_0);function body_0(chk,ctx){return chk.write("<div class=\"auth-container\">").partial("social-button",ctx,null).write("<form name=\"register-form\" method=\"post\" id=\"register-form\" ><p id=\"message-box\" class=\"login-error hidden\"></p><label for=\"first-name\">First name</label><input class=\"input-box\" type=\"text\" name=\"first-name\" id=\"first-name\" placeholder='First name' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" maxlength=\"50\" autofocus><label for=\"last-name\">Last name</label><input class=\"input-box\" type=\"text\" name=\"last-name\" id=\"last-name\" placeholder='Last name' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" maxlength=\"50\"><div class=\"wrap\"\"><p class=\"login-error hidden fnamemessage-box\"></p><p class=\"login-error hidden lnamemessage-box\"></p></div><label for=\"email\">Email</label><input class=\"input-box\" type=\"text\" name=\"email-id\" id=\"email-id\" placeholder='Email' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" value=\"").reference(ctx._get(false, ["username"]),ctx,"h").write("\"><p class=\"login-error hidden emailmessage-box\"></p><div class=\"password-box\"><label for=\"password\">Password</label><input class=\"input-box\" type=\"password\" name=\"password\" id=\"password\" placeholder='Password' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><button type=\"button\" class=\"mask-toggle\" >SHOW</button></div><div class=\"interactive-hint\"><span class=\"min-eight disable\">Minimum of 8 characters</span><span class=\"one-letter disable\">1 letter</span><span class=\"one-number disable\">1 number</span></div><p class=\"login-error hidden pwdmessage-box\"></p><div class=\"email-box\"><div class=\"email-box-left\"><input type=\"checkbox\" name=\"email-optin-chk\" id=\"email-optin-chk\" ").notexists(ctx._get(false, ["uncheckOptIn"]),ctx,{"block":body_1},null).write(" /><label class=\"notext\" for=\"email-optin-chk\">Send me emails about upcoming events</label></div></div><div class=\"register-button\"><button type=\"submit\" name=\"register\" class=\"auth-button\" data-title='Sign up'>").reference(ctx._get(false, ["register-button-title"]),ctx,"h").write("</button><p class=\"accept-term\">By signing up, you agree to our <a href=\"/legal/?section=ua\" id=\"user-agreement\" target=\"_blank\">user agreement</a><br/>and <a href=\"/legal/?section=pp\" id=\"privacy-policy\" target=\"_blank\">privacy notice</a>.</p></div></form><div class=\"auth-box clearfix\">Have a StubHub account? <a class=\"auth-link\" id=\"signin-user\">Sign in</a></div></div>");}function body_1(chk,ctx){return chk.write("checked");}return body_0;})();
(function(){dust.register("resetpassword",body_0);function body_0(chk,ctx){return chk.write("<div id=\"resetpassword\" class=\"auth-container\"><div id=\"resetpassword-container\"><div class=\"welcome-note\"><div class=\"subnote\">Give us the email address you used to create your StubHub account, we’ll send you an email to help you reset your password.</div></div><form name=\"resetpassword-form\" method=\"PUT\" id=\"resetpassword-form\"><input class=\"input-box\" type=\"text\" name=\"email-id\" id=\"email-id\" placeholder='Email' autocorrect=\"off\" autocapitalize=\"off\" autofocus spellcheck=\"false\" value=\"").reference(ctx._get(false, ["username"]),ctx,"h").write("\">/><div id=\"message-box\" class=\"login-error hidden\"></div><button type=\"submit\" class=\"auth-button\" data-title=\"").reference(ctx._get(false, ["sendemail"]),ctx,"h").write("\">").reference(ctx._get(false, ["sendemail"]),ctx,"h").write("</button></form><div class=\"auth-box\"><a class=\"auth-link\" id=\"signin-user\">").reference(ctx._get(false, ["signin-title"]),ctx,"h").write("</a><a class=\"auth-link\" id=\"register-user\">").reference(ctx._get(false, ["signup-title"]),ctx,"h").write("</a></div></div><div id=\"resetpassword-success\" class=\"hidden\"><div class=\"welcome-note\"><div class=\"subnote\">We emailed you a link to reset your password.\t</div><div class=\"subnote\">If you don’t receive it in a few minutes, check your junk mail folder.</div></div><div class=\"auth-button-container\"><button class=\"auth-button\" id=\"got-it\">OK!</button></div></div></div>");}return body_0;})();
(function(){dust.register("signin",body_0);function body_0(chk,ctx){return chk.write("<div class=\"auth-container fadeIn\">").partial("social-button",ctx,null).write("<div class=\"form-container\"><form name=\"signin-form\" method=\"POST\" id=\"signin-form\"><div id=\"message-box\" class=\"login-error hidden\"></div><label for=\"email-id\">Email</label><input class=\"input-box\" type=\"text\" name=\"email\" id=\"email-id\" placeholder='Email' autocorrect=\"off\" autocapitalize=\"off\" autofocus spellcheck=\"false\"/><label for=\"password\">Password</label><input class=\"input-box\" type=\"password\" name=\"password\" id=\"password\" placeholder='Password' autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"/><button type=\"submit\" class=\"auth-button sign-in\" data-title=\"Sign in\">Sign in</button></form></div><div class=\"reset-link clearfix\"><a href=\"\" id=\"reset-password\">Forgot your password?</a></div><div class=\"auth-box\">New to StubHub? <a class=\"auth-link\" id=\"register-user\">Sign up</a></div></div>");}return body_0;})();
(function(){dust.register("social-button",body_0);function body_0(chk,ctx){return chk.write("<button class=\"sh-ui-fb-button\" title=\"").reference(ctx._get(false, ["facebook-login-text"]),ctx,"h").write("\"><span class=\"sh-ui-fb-logo\"> <img src=\"").reference(ctx._get(false, ["facebook-logo"]),ctx,"h").write("\"/></span><span class=\"sh-ui-fb-text\" id=\"sh-ui-fb-login-text\">").reference(ctx._get(false, ["facebook-login-text"]),ctx,"h").write("</span></button>").exists(ctx._get(false, ["showConnectWithFrdsText"]),ctx,{"block":body_1},null).write("<div class=\"sh-ui-alternate\"> <span class=\"sh-ui-fb-seperator\">").reference(ctx._get(false, ["or-text"]),ctx,"h").write("</span></div>");}function body_1(chk,ctx){return chk.write("<div class=\"sh-ui-fb-connect-with-frds\">").reference(ctx._get(false, ["connect-with-frds-on-stubhub"]),ctx,"h").write("</div>");}return body_0;})();
(function(){dust.register("user-agreement-customer-service",body_0);function body_0(chk,ctx){return chk.write("<div class=\"user-agreement-container fadeIn\"><div id=\"message-box\" class=\"login-error user-agreement-content\">This user has not accepted the user agreement for this domain. <br/>Please ask the customer to login and accept the user agreement before continuing.<p>After they accept the user agreement, click the signin button below</p></div><div class=\"actions\"><button class=\"auth-button\" id=\"doAgree\">Sign In</button></div></div>");}return body_0;})();
(function(){dust.register("user-agreement",body_0);function body_0(chk,ctx){return chk.write("<div class=\"user-agreement-container fadeIn\"><div class=\"user-agreement-content\"></div><div class=\"actions\"><button class=\"auth-button\" id=\"doAgree\">I Agree</button></div></div>");}return body_0;})();
define('common-urlUtil-i18n-props',[],function(){return{"common.urlUtil.modal.button.continue":"Continue","common.urlUtil.modal.button.cancel":"Cancel","common.urlUtil.modal.header.toUS":"Go to StubHub US?","common.urlUtil.modal.header.toUK":"Go to StubHub UK?","common.urlUtil.modal.header.toDE":"Go to StubHub Germany?","common.urlUtil.modal.body.toUS":"We’ll take you to our US site <a href=\"http://www.stubhub.com\" rel=\"external\">www.stubhub.com</a> to view this info. Remember, all prices will be in US dollars.","common.urlUtil.modal.body.toUK":"We’ll take you to our UK site <a href=\"http://www.stubhub.co.uk\" rel=\"external\">www.stubhub.co.uk</a> to view this info. Remember, all prices will be in British pounds.","common.urlUtil.modal.body.toDE":"We’ll take you to our German site <a href=\"http://www.stubhub.de\" rel=\"external\">www.stubhub.de</a> to view this info. Remember, all prices will be in Euros."}});
(function(){dust.register("url-modal",body_0);function body_0(chk,ctx){return chk.write("<div class=\"container-modal\"><div class=\"container-modal-wrapper\"><div class=\"modal\"><span class=\"sh-iconset sh-iconset-close icon-close a-click-close\"></span><div class=\"modal-header\"><span class=\"icon-redirect flag ").reference(ctx._get(false, ["currency"]),ctx,"h").write("\"></span><span class=\"modal-title\">").helper("select",ctx,{"block":body_1},{"key":body_6}).write("</span></div><div class=\"modal-body\"><p>").helper("select",ctx,{"block":body_7},{"key":body_12}).write("</p></div><div class=\"modal-footer\"><a href=\"").reference(ctx._get(false, ["redirectUrl"]),ctx,"h").write("\" class=\"button-primary a-click-continue\" rel=\"external\">Continue</a><a class=\"button-secondary a-click-close\">Cancel</a></div></div></div></div>");}function body_1(chk,ctx){return chk.helper("eq",ctx,{"block":body_2},{"value":"USD"}).helper("eq",ctx,{"block":body_3},{"value":"GBP"}).helper("eq",ctx,{"block":body_4},{"value":"EUR"}).helper("eq",ctx,{"block":body_5},{"value":"CAD"});}function body_2(chk,ctx){return chk.write("Go to StubHub US?");}function body_3(chk,ctx){return chk.write("Go to StubHub UK?");}function body_4(chk,ctx){return chk.write("Go to StubHub Germany?");}function body_5(chk,ctx){return chk.write("Go to StubHub US?");}function body_6(chk,ctx){return chk.reference(ctx._get(false, ["currency"]),ctx,"h");}function body_7(chk,ctx){return chk.helper("eq",ctx,{"block":body_8},{"value":"USD"}).helper("eq",ctx,{"block":body_9},{"value":"GBP"}).helper("eq",ctx,{"block":body_10},{"value":"EUR"}).helper("eq",ctx,{"block":body_11},{"value":"CAD"});}function body_8(chk,ctx){return chk.write("We’ll take you to our US site <a href=\"http://www.stubhub.com\" rel=\"external\">www.stubhub.com</a> to view this info. Remember, all prices will be in US dollars.");}function body_9(chk,ctx){return chk.write("We’ll take you to our UK site <a href=\"http://www.stubhub.co.uk\" rel=\"external\">www.stubhub.co.uk</a> to view this info. Remember, all prices will be in British pounds.");}function body_10(chk,ctx){return chk.write("We’ll take you to our German site <a href=\"http://www.stubhub.de\" rel=\"external\">www.stubhub.de</a> to view this info. Remember, all prices will be in Euros.");}function body_11(chk,ctx){return chk.write("We’ll take you to our US site <a href=\"http://www.stubhub.com\" rel=\"external\">www.stubhub.com</a> to view this info. Remember, all prices will be in US dollars.");}function body_12(chk,ctx){return chk.reference(ctx._get(false, ["currency"]),ctx,"h");}return body_0;})();
define('common-global-i18n-props',[],function(){return{"common.global.test":"hello","common.global.customerservice.contact.1":"1.866.788.2482","common.global.customerservice.contact.2":"0800 358 8585","common.global.customerservice.contact.3":"0800 588 91 91","common.global.customerservice.contact.4":"serviceclient@stubhub.fr","common.global.customerservice.contact.5":"1.866.788.2482 "}});
define('common-banner-i18n-props',[],function(){return{"common.banner.cookieBanner.contentInfo":"This site uses <a href=\"/legal/?section=cn\" target=\"_blank\" >cookies</a> to enhance your browsing experience. By using this site, you agree to our use of cookies."}});
(function(){dust.register("common_banner",body_0);function body_0(chk,ctx){return chk.exists(ctx._get(false, ["showCookieBanner"]),ctx,{"block":body_1},null).exists(ctx._get(false, ["showDisclaimerBanner"]),ctx,{"block":body_2},null);}function body_1(chk,ctx){return chk.write("<div class=\"sh-ui-banner\"><div id=\"sh-banner-wrapper\"><div class=\"common-banner-bg\"><div class=\"common-banner-container\"><div class=\"common-banner-content\"><span class=\"common-banner-icon sh-iconset sh-iconset-alert-1\"></span><span class=\"common-banner-text\"></span></div></div></div></div><div class=\"close-banner sh-iconset sh-close close-cookie\"></div></div>");}function body_2(chk,ctx){return chk.write("<div class=\"sh-ui-banner disclaimer-banner\"><div id=\"sh-banner-wrapper\"><div class=\"disclaimer-mweb-bg\"></div></div><div class=\"close-banner sh-iconset sh-close close-disclaimer\"></div></div>");}return body_0;})();
(function(){dust.register("date_stamp_template",body_0);function body_0(chk,ctx){return chk.write("<div class=\"date-stamp-").reference(ctx._get(false, ["dateType"]),ctx,"h").write(" date-container \"><span class=\"date-stamp-").reference(ctx._get(false, ["dateType"]),ctx,"h").write("\"><span class=\"date-divider-top\"></span><span class=\"date-stamp-day ").exists(ctx._get(false, ["isTBD"]),ctx,{"block":body_1},null).write("\">").notexists(ctx._get(false, ["isTBD"]),ctx,{"block":body_2},null).write("</span>").section(ctx._get(false, ["isTBD"]),ctx,{"else":body_4,"block":body_8},null).write("</span></div>");}function body_1(chk,ctx){return chk.write("date-stamp-day-isTBD");}function body_2(chk,ctx){return chk.helper("datetime_format",ctx,{},{"style":"weekday_short","value":ctx._get(false, ["dateLocal"])}).exists(ctx._get(false, ["toDateLocal"]),ctx,{"block":body_3},null);}function body_3(chk,ctx){return chk.write("+");}function body_4(chk,ctx){return chk.write("<time class=\"date-stamp-month-dd\">").helper("datetime_format",ctx,{},{"style":"datestamp_month_day","value":ctx._get(false, ["dateLocal"])}).exists(ctx._get(false, ["toDateLocal"]),ctx,{"else":body_5,"block":body_7},null);}function body_5(chk,ctx){return chk.write("</time><time class=\"date-stamp-month-dd\">").helper("dateStampYear",ctx,{"block":body_6},{"display":"future"}).write("</time>");}function body_6(chk,ctx){return chk.write(" ").helper("datetime_format",ctx,{},{"style":"year","value":ctx._get(false, ["toDateLocal"])});}function body_7(chk,ctx){return chk.write("- ").helper("datetime_format",ctx,{},{"style":"datestamp_month_day","value":ctx._get(false, ["toDateLocal"])}).write("</time>");}function body_8(chk,ctx){return chk.write("<time class=\"date-stamp-month-dd\">").helper("dateStampYear",ctx,{"block":body_9},{"display":"future"}).write("</time>");}function body_9(chk,ctx){return chk.write(" ").helper("datetime_format",ctx,{},{"style":"year","value":ctx._get(false, ["toDateLocal"])});}return body_0;})();
define('common-language-selector-i18n-props',[],function(){return{"common.language-selector.selection.dialog.header.title":"Choose your language"}});
(function(){dust.register("selection-dialog",body_0);function body_0(chk,ctx){return chk.write("<div id=\"component-language-selector\"><header><div class=\"language-dialog-title\">Choose your language</div></header><div class=\"close\"><span class=\"sh-iconset sh-iconset-close\"></span></div><nav><ul class=\"language-list\">").section(ctx._get(false, ["listOfLanguages"]),ctx,{"block":body_1},null).write("</ul></nav></div>");}function body_1(chk,ctx){return chk.write("<li class=\"language-item\"><a class=\"language-link norouting\" rel=\"alternate\" data-isCurrentLanguage=\"").reference(ctx._get(false, ["isCurrentLanguage"]),ctx,"h").write("\" data-locale=\"").reference(ctx._get(false, ["locale"]),ctx,"h").write("\" data-language=\"").reference(ctx._get(false, ["languageDisplayName"]),ctx,"h").write("\" href=\"").helper("toUrl",ctx,{},{"href":ctx._get(false, ["currentLocation"]),"locale":ctx._get(false, ["languageCode"])}).write("\">").reference(ctx._get(false, ["languageDisplayName"]),ctx,"h").write("</a></li>");}return body_0;})();
define('common-global_header_navigation-i18n-props',[],function(){return{"common.global_header_navigation.search.searchText":"Search","common.global_header_navigation.search.title":"Find events","common.global_header_navigation.sports.text":"Sports","common.global_header_navigation.music.text":"Concerts","common.global_header_navigation.theater.text":"Theater & Comedy","common.global_header_navigation.seeall.text":"Top events","common.global_header_navigation.comedy.text":"Comedy","common.global_header_navigation.ticketsByVenue.text":"Tickets by Venue","common.global_header_navigation.giftcards.title":"Gift cards","common.global_header_navigation.newyork.text":"New York","common.global_header_navigation.losangeles.text":"Los Angeles","common.global_header_navigation.sanfrancisco.text":"San Francisco","common.global_header_navigation.mytickets.title":"My tickets","common.global_header_navigation.myorders.text":"Orders","common.global_header_navigation.mylistings.text":"Listings","common.global_header_navigation.mysales.text":"Sales","common.global_header_navigation.mypayments.text":"Payments","common.global_header_navigation.sell.title":"Sell tickets","common.global_header_navigation.help.text":"Help","common.global_header_navigation.helptopics.text":"Help topics","common.global_header_navigation.languageselector":"Choose your language","common.global_header_navigation.chat.text":"Chat now","common.global_header_navigation.contactus.text":"Contact us","common.global_header_navigation.affiliates.text":"Affiliates","common.global_header_navigation.suggestion.text":"Suggestion","common.global_header_navigation.optout.text":"Opt out","common.global_header_navigation.signin.title":"Sign in","common.global_header_navigation.welcome.title":"Hi,","common.global_header_navigation.myhub.text":"My Hub","common.global_header_navigation.activity.text":"Activity Feed","common.global_header_navigation.friends.text":"Friends","common.global_header_navigation.rewards.text":"Gift Codes","common.global_header_navigation.setting.text":"Settings","common.global_header_navigation.signout.text":"Sign out","common.global_header_navigation.more.title":"Show more options","common.global_header_navigation.more.text":"More","common.global_header_navigation.hamburger.title":"main menu","common.global_header_navigation.hamburger.alt":"Menu","common.global_header_navigation.close.text":"Close","common.global_header_navigation.menu.text":"Menu","common.global_header_navigation.profile":"Profile","common.global_header_navigation.notifications.title":"Notifications","common.global_header_navigation.logo.title":"StubHub - Where Fans Buy & Sell Tickets","common.global_header_navigation.logo.tracktitle":"StubHub logo","common.global_header_navigation.logo.image.alt":"StubHub - Where Fans Buy & Sell Tickets"}});
(function(){dust.register("gh_full",body_0);function body_0(chk,ctx){return chk.write("<h1 class='heading'><a class='sh-logo' href=\"").helper("toUrl",ctx,{"block":body_1},{"href":ctx._get(false, ["logoURL"])}).write("\" title=\"StubHub - Where Fans Buy & Sell Tickets\" track-title=\"StubHub logo\">StubHub - Where Fans Buy & Sell Tickets</a></h1><ul class='discovery' role='menu'>").section(ctx._get(false,["headerMenu","discovery"]),ctx,{"block":body_2},null).write("</ul><ul class='my-actions' role='menu'>").section(ctx._get(false,["headerMenu","myActions"]),ctx,{"block":body_16},null).write("</ul><ul class='secondary-navigation' role='menu'>").section(ctx._get(false,["headerMenu","secondaryNavigation"]),ctx,{"block":body_21},null).write("</ul>");}function body_1(chk,ctx){return chk;}function body_2(chk,ctx){return chk.write("<li class='gh-menu ").reference(ctx._get(false, ["keyId"]),ctx,"h").write("' role='menuitem' aria-haspopup=true>").helper("eq",ctx,{"block":body_3},{"key":ctx._get(false, ["keyId"]),"value":"search"}).exists(ctx._get(false, ["href"]),ctx,{"block":body_4},null).exists(ctx._get(false, ["children"]),ctx,{"block":body_6},null).exists(ctx._get(true,["giftCards"]),ctx,{"block":body_7},null).exists(ctx._get(true,["sell"]),ctx,{"block":body_8},null).exists(ctx._get(false, ["help"]),ctx,{"block":body_10},null).exists(ctx._get(false,["languageSelector","show"]),ctx,{"block":body_15},null).write("</li>");}function body_3(chk,ctx){return chk.write("<button class='search-btn hidden' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("' data-noredirect=true>Search</button>");}function body_4(chk,ctx){return chk.exists(ctx._get(false,["href",ctx._get(false, ["locale"])]),ctx,{"block":body_5},null);}function body_5(chk,ctx){return chk.write("<a href=").reference(ctx._get(false,["href",ctx._get(false, ["locale"])]),ctx,"h").write(" class='menu-header ").reference(ctx._get(false, ["keyId"]),ctx,"h").write("' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("'>").helper("i18nHelper",ctx,{},{"label":ctx._get(false, ["label"])}).write("</a>");}function body_6(chk,ctx){return chk.partial("gh_list",ctx,{"key":ctx._get(false, ["keyId"]),"content":ctx._get(true,[]),"submenuClassName":ctx._get(false, ["className"])});}function body_7(chk,ctx){return chk.write("<a href='").reference(ctx._get(false,["headerMenu","secondaryNavigation","0","href"]),ctx,"h").write("' class='menu-header giftcards-submenu' title=\"Gift cards\">Gift cards</a>");}function body_8(chk,ctx){return chk.write("<a href=").helper("toUrl",ctx,{"block":body_9},{"href":ctx._get(false, ["sellParams"])}).write(" class='menu-header sell-submenu' title=\"Sell tickets\">Sell tickets</a>");}function body_9(chk,ctx){return chk;}function body_10(chk,ctx){return chk.section(ctx._get(false,["headerMenu","secondaryNavigation"]),ctx,{"block":body_11},null);}function body_11(chk,ctx){return chk.exists(ctx._get(false, ["helpId"]),ctx,{"block":body_12},null);}function body_12(chk,ctx){return chk.exists(ctx._get(true,["children"]),ctx,{"else":body_13,"block":body_14},null);}function body_13(chk,ctx){return chk.write("<a href='").reference(ctx._get(true,["href"]),ctx,"h").write("' class='menu-header help-link-submenu' title=\"Help\">Help</a>");}function body_14(chk,ctx){return chk.partial("gh_list",ctx,{"content":ctx._get(true,[]),"submenuClassName":"help-submenu expand collapse"});}function body_15(chk,ctx){return chk.write("<button title=\"Choose your language\" class=\"language-selector-sub\">").reference(ctx._get(false,["languageSelector","label"]),ctx,"h").write("</button>");}function body_16(chk,ctx){return chk.write("<li class=\"gh-menu ").reference(ctx._get(false, ["keyId"]),ctx,"h").write("\" role='menuitem' aria-haspopup=true>").exists(ctx._get(false, ["children"]),ctx,{"block":body_17},null).helper("eq",ctx,{"block":body_18},{"key":ctx._get(false, ["keyId"]),"value":"sell-tickets"}).write("</li>");}function body_17(chk,ctx){return chk.partial("gh_list",ctx,{"key":ctx._get(false, ["keyId"]),"content":ctx._get(true,[]),"submenuClassName":ctx._get(false, ["className"])});}function body_18(chk,ctx){return chk.write("<h3 class='menu-header' href=").helper("toUrl",ctx,{"block":body_19},{"href":ctx._get(false, ["sellParams"])}).write(" title=\"Sell tickets\"><a href=").helper("toUrl",ctx,{"block":body_20},{"href":ctx._get(false, ["sellParams"])}).write(" class='menu-header' title=\"Sell tickets\">Sell tickets</a></h3>");}function body_19(chk,ctx){return chk;}function body_20(chk,ctx){return chk;}function body_21(chk,ctx){return chk.write("<li class=\"gh-menu ").reference(ctx._get(false, ["keyId"]),ctx,"h").write("\" ").exists(ctx._get(false, ["helpId"]),ctx,{"block":body_22},null).write(" role='menuitem' aria-haspopup=true>").exists(ctx._get(false, ["children"]),ctx,{"else":body_23,"block":body_27},null).write("</li>");}function body_22(chk,ctx){return chk.write("id='").reference(ctx._get(false, ["helpId"]),ctx,"h").write("'");}function body_23(chk,ctx){return chk.notexists(ctx._get(false, ["href"]),ctx,{"else":body_24,"block":body_25},null);}function body_24(chk,ctx){return chk.write("<a href=").reference(ctx._get(false, ["href"]),ctx,"h").write(" class='menu-header' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("'>").helper("i18nHelper",ctx,{},{"label":ctx._get(false, ["label"])}).write("</a>");}function body_25(chk,ctx){return chk.write("<button title=\"Choose your language\" ").exists(ctx._get(false, ["id"]),ctx,{"block":body_26},null).write(">").helper("i18nHelper",ctx,{},{"label":ctx._get(false, ["label"])}).write("</button>");}function body_26(chk,ctx){return chk.write("id=").reference(ctx._get(false, ["id"]),ctx,"h");}function body_27(chk,ctx){return chk.partial("gh_list",ctx,{"key":ctx._get(false, ["keyId"]),"content":ctx._get(true,[]),"submenuClassName":ctx._get(false, ["className"])});}return body_0;})();
(function(){dust.register("gh_list",body_0);function body_0(chk,ctx){return chk.write("<div class='submenu ").reference(ctx._get(false, ["submenuClassName"]),ctx,"h").write("'><h3 class='menu-header' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("'>").helper("eq",ctx,{"else":body_1,"block":body_2},{"key":ctx._get(false, ["keyId"]),"value":"my-profile"}).write("</h3><ul class=\"menu-list\" role='menu'>").section(ctx._get(false,["content","children"]),ctx,{"block":body_5},null).write("</ul>").exists(ctx._get(false,["content","languageSelector","isMinimal"]),ctx,{"block":body_11},null).write("</div>");}function body_1(chk,ctx){return chk.write("<a href='javascript:void(0)' class='menu-header-link' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("'>").helper("i18nHelper",ctx,{},{"label":ctx._get(false,["content","label"])}).write("</a>");}function body_2(chk,ctx){return chk.exists(ctx._get(false, ["isLoggedIn"]),ctx,{"else":body_3,"block":body_4},null);}function body_3(chk,ctx){return chk.write("<a href='javascript:void(0)' class='menu-header-link signin-link' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("'>").helper("i18nHelper",ctx,{},{"label":ctx._get(false,["content","labelSignedOut"])}).write("</a>");}function body_4(chk,ctx){return chk.write("<a href='javascript:void(0)' class='menu-header-link signin-link logged-in' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("'>").helper("i18nHelper",ctx,{},{"label":ctx._get(false,["content","labelSignedIn"])}).write("</a>");}function body_5(chk,ctx){return chk.write("<li class='menu-item ").reference(ctx._get(false, ["menuItemClassName"]),ctx,"h").write("' ").exists(ctx._get(false, ["id"]),ctx,{"block":body_6},null).write(" role='menuitem'>").exists(ctx._get(false,["href",ctx._get(false, ["locale"])]),ctx,{"else":body_7,"block":body_9},null).helper("i18nHelper",ctx,{},{"label":ctx._get(false, ["label"])}).write("</a></li>");}function body_6(chk,ctx){return chk.write("id='").reference(ctx._get(false, ["id"]),ctx,"h").write("'");}function body_7(chk,ctx){return chk.write("<a href='").reference(ctx._get(false, ["href"]),ctx,"h").write("'  title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("' ").exists(ctx._get(false, ["openNew"]),ctx,{"block":body_8},null).write(" class='menu-link'>");}function body_8(chk,ctx){return chk.write("data-open='true'");}function body_9(chk,ctx){return chk.write("<a href='").reference(ctx._get(false,["href",ctx._get(false, ["locale"])]),ctx,"h").write("' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("' ").exists(ctx._get(false, ["openNew"]),ctx,{"block":body_10},null).write(" class='menu-link'>");}function body_10(chk,ctx){return chk.write("data-open='true'");}function body_11(chk,ctx){return chk.write("<button title=\"Language Selector\" class=\"language-selector-sub\" role=\"menuitem\">").reference(ctx._get(false,["content","languageSelector","label"]),ctx,"h").write("</button>");}return body_0;})();
(function(){dust.register("gh_minimal",body_0);function body_0(chk,ctx){return chk.write("<div class='gh-minimal'><h1 class='heading'><a class='sh-logo' href=\"").helper("toUrl",ctx,{"block":body_1},{"href":ctx._get(false, ["logoURL"])}).write("\" title=\"StubHub - Where Fans Buy & Sell Tickets\" track-title=\"StubHub logo\">StubHub - Where Fans Buy & Sell Tickets</a></h1><h2 class='header-title'></h2><ul class='my-actions' role='menu'>").section(ctx._get(false,["headerMenu","myActions"]),ctx,{"block":body_2},null).write("</ul><ul class='secondary-navigation' role='menu'>").section(ctx._get(false,["headerMenu","secondaryNavigation"]),ctx,{"block":body_4},null).write("</ul></div>");}function body_1(chk,ctx){return chk;}function body_2(chk,ctx){return chk.write("<li class=\"gh-menu ").reference(ctx._get(false, ["keyId"]),ctx,"h").write("\" role='menuitem'>").exists(ctx._get(false, ["children"]),ctx,{"block":body_3},null).write("</li>");}function body_3(chk,ctx){return chk.partial("gh_list",ctx,{"key":ctx._get(false, ["keyId"]),"content":ctx._get(true,[]),"submenuClassName":ctx._get(false, ["className"])});}function body_4(chk,ctx){return chk.write("<li class=\"gh-menu ").reference(ctx._get(false, ["keyId"]),ctx,"h").write("\" ").exists(ctx._get(false, ["helpId"]),ctx,{"block":body_5},null).write(" role='menuitem'>").exists(ctx._get(false, ["children"]),ctx,{"else":body_6,"block":body_12},null).write("</li>");}function body_5(chk,ctx){return chk.write("id='").reference(ctx._get(false, ["helpId"]),ctx,"h").write("'");}function body_6(chk,ctx){return chk.notexists(ctx._get(false, ["href"]),ctx,{"else":body_7,"block":body_10},null);}function body_7(chk,ctx){return chk.exists(ctx._get(false, ["href"]),ctx,{"block":body_8},null);}function body_8(chk,ctx){return chk.write("<a href=").reference(ctx._get(false, ["href"]),ctx,"h").write(" class='menu-header ").helper("eq",ctx,{"block":body_9},{"key":ctx._get(false, ["keyId"]),"value":"help"}).write("' title='").helper("i18nHelper",ctx,{},{"title":ctx._get(false, ["title"])}).write("'>").helper("i18nHelper",ctx,{},{"label":ctx._get(false, ["label"])}).write("</a>");}function body_9(chk,ctx){return chk.write("help-link-submenu");}function body_10(chk,ctx){return chk.write("<button ").exists(ctx._get(false, ["id"]),ctx,{"block":body_11},null).write(">").helper("i18nHelper",ctx,{},{"label":ctx._get(false, ["label"])}).write("</button>");}function body_11(chk,ctx){return chk.write("id=").reference(ctx._get(false, ["id"]),ctx,"h");}function body_12(chk,ctx){return chk.partial("gh_list",ctx,{"key":ctx._get(false, ["keyId"]),"content":ctx._get(true,[]),"submenuClassName":ctx._get(false, ["className"])});}return body_0;})();
(function(){dust.register("global_header_navigation",body_0);function body_0(chk,ctx){return chk.write("<div class='gh-navigation-content ").exists(ctx._get(false, ["isLoggedIn"]),ctx,{"block":body_1},null).write("'>").exists(ctx._get(false, ["full"]),ctx,{"else":body_2,"block":body_3},null).write("</div>").exists(ctx._get(false, ["searchEnabled"]),ctx,{"block":body_4},null);}function body_1(chk,ctx){return chk.write("signed-in");}function body_2(chk,ctx){return chk.partial("gh_minimal",ctx,null);}function body_3(chk,ctx){return chk.partial("gh_full",ctx,null).write("  ");}function body_4(chk,ctx){return chk.write("<div class='search-container borderless-search-bar'></div>");}return body_0;})();
define('common-message_banner-i18n-props',[],function(){return{"common.message_banner.sitedown.text":"StubHub will be down for site maintenance Feb 13th between 11 pm – 1 am PST. Thanks in advance for your patience."}});
(function(){dust.register("message_banner",body_0);function body_0(chk,ctx){return chk.write("<div class=\"sh-msg-banner-wrapper ").reference(ctx._get(false,["messageBanner","type"]),ctx,"h").write("\" ><div class=\"sh-msg-banner-svg-container\"><img class=\"sh-msg-banner-svg\" src=\"").reference(ctx._get(false,["messageBanner","svgicon"]),ctx,"h").write("\"/></div><div class=\"sh-msg-banner-message-container\"><span class=\"sh-msg-banner-message\">").reference(ctx._get(false,["messageBanner","message"]),ctx,"h").write("</span></div><div class=\"sh-msg-banner-close-container sh-msg-banner-close\"><img class=\"sh-msg-banner-svg sh-msg-banner-close\" src=\"").reference(ctx._get(false,["messageBanner","svgclose"]),ctx,"h").write("\"/></div></div>");}return body_0;})();
define('common-twofa-i18n-props',[],function(){return{"common.twofa.verifyaccount.title":"Verify your account","common.twofa.sendcode.title":"KEEP YOUR ACCOUNT SAFE","common.twofa.code.channel.voicemail":"voicemail","common.twofa.code.channel.email":"email","common.twofa.code.channel.text":"text","common.twofa.code.channel.mobile":"mobile","common.twofa.code.account":"account","common.twofa.cancel.link.text":"Cancel","common.twofa.logo.image.alt":"StubHub - Where Fans Buy & Sell Tickets","common.twofa.accountverified":"Way to go! Your account is verified.","common.twofa.yourticketout":"Your ticket out","common.twofa.error.invalidcode":"The verification code you have entered has expired. Please request a new one.","common.twofa.error.sendcode.generic":"There was a problem sending the code. Please request a new one.","common.twofa.error.sendcode.maxlimitexceeded":"There appears to be an issue sending out the code. For your security, please contact us and we'll sort it out.","common.twofa.error.incorrectcode":"The verification code you have entered is incorrect. Please try again.","common.twofa.error.verifycode.generic":"There was a problem with the code. Give it another shot.","common.twofa.error.verifycode.maxlimitexceeded":"There appears to be an issue. For your security, please contact us and we'll sort it out.","common.twofa.error.verifycode.callcustservice":"For your security, please contact us and we'll sort it out.","common.twofa.error.usercontactmissing":"We don't have a phone number or email address for you.","common.twofa.contactcustservice.message":"To get a verification code for your account, please contact us.","common.twofa.validateaccount":"For security purposes, we need you to enter a verification code.","common.twofa.sendcode":"We'll send an email with the code to:","common.twofa.howto.receivecode":"Select how you want to receive the code:","common.twofa.sendcode.text":"Send text to","common.twofa.sendcode.voicemail":"Voicemail","common.twofa.sendcode.email":"Send email to","common.twofa.sendcode.button.label":"Send code","common.twofa.sendcode.havecode":"I already have a code","common.twofa.sendcode.disclaimer":"Standard text messaging rates may apply.","common.twofa.entercode.phonenumber":"Enter the code we have sent to phone number:","common.twofa.entercode.email":"We’ve sent an email with a verification code to email address:","common.twofa.entercode":"Enter the code we have sent to","common.twofa.code":"Code","common.twofa.verify.button.label":"Verify","common.twofa.problemwithcode":"Having trouble with the code?","common.twofa.sendnewcode":"Send a new code"}});
(function(){dust.register("contactcustservice",body_0);function body_0(chk,ctx){return chk.write("<div class='view-container'><div class='view-container-body contact-cust-serv-container view-container-body-text'><div class='contact-cust-serv-msg'><span class='contact-cust-serv-msg'>We don't have a phone number or email address for you.</span></div><p>To get a verification code for your account, please contact us.<br><span class='cust-contact-number'> ").reference(ctx._get(false, ["customerServiceNumber"]),ctx,"h").write("</span></p><div class='view-container-actions'><div class='cancel'><a href=\"\" id=\"contact-cust-serv-cancel\">Cancel</a></div></div>\t</div></div>");}return body_0;})();
(function(){dust.register("sendcode",body_0);function body_0(chk,ctx){return chk.write("<div class='view-container'><div class='view-container-body send-code-container'><p class='view-container-title-text'>For security purposes, we need you to enter a verification code.</p><div class='view-container-error ").notexists(ctx._get(false, ["error"]),ctx,{"block":body_1},null).write(" ").exists(ctx._get(false, ["emailOnly"]),ctx,{"block":body_2},null).write("' id='send-code-error'>").reference(ctx._get(false, ["error"]),ctx,"h").write("</div>").exists(ctx._get(false, ["emailOnly"]),ctx,{"else":body_3,"block":body_7},null).write("<div class='view-container-actions'><button id='send-code-button' class=\"send-code-button ").notexists(ctx._get(false, ["emailOnly"]),ctx,{"block":body_9},null).write("\">Send code</button></div><p class='disclaimer-text ").notexists(ctx._get(false, ["hasPhone"]),ctx,{"block":body_10},null).write("'>Standard text messaging rates may apply.</p></div></div>");}function body_1(chk,ctx){return chk.write("hidden");}function body_2(chk,ctx){return chk.write("single-option-error");}function body_3(chk,ctx){return chk.write("<p class='view-container-body-text send-code-to-msg'>Select how you want to receive the code:</p><div class='send-code-options-container'>").section(ctx._get(false, ["phoneOption"]),ctx,{"block":body_4},null).exists(ctx._get(false, ["emailOption"]),ctx,{"block":body_5},null).exists(ctx._get(false, ["haveCodeOption"]),ctx,{"block":body_6},null).write("</div>");}function body_4(chk,ctx){return chk.write("<div class='send-code-phone-option'><div class='send-code-option-list clearfix' data-medium=\"SMS\" data-contact=").reference(ctx._get(false, ["encrypted"]),ctx,"h").write(" data-masked=").reference(ctx._get(false, ["masked"]),ctx,"h").write("><div class=\"outer-bullet\"><div class=\"inner-bullet\"></div></div><div class=\"send-code-channel\"> Send text to <b>").reference(ctx._get(false, ["masked"]),ctx,"h").write("</b></div></div></div>");}function body_5(chk,ctx){return chk.write("<div class='send-code-email-option'><div class='send-code-option-list clearfix' data-medium=\"Email\" data-contact=").reference(ctx._get(false,["emailOption","encrypted"]),ctx,"h").write(" data-masked=").reference(ctx._get(false,["emailOption","masked"]),ctx,"h").write("><div class=\"outer-bullet\"><div class=\"inner-bullet\"></div></div><div class=\"send-code-channel\">Send email to <b>").reference(ctx._get(false,["emailOption","masked"]),ctx,"h").write("</b></div></div></div>");}function body_6(chk,ctx){return chk.write("<div class=\"send-code-have-code-option\"><div class='send-code-option-list clearfix have-code-option' ><div class=\"outer-bullet\"><div class=\"inner-bullet\"></div></div><div class=\"send-code-channel\">I already have a code</div></div><div class='view-container-error hidden' id='send-code-verify-error'></div><div><input placeholder=\"Code\" type=\"text\" pattern=\"[0-9]{6}\" maxlength=\"6\" class=\"input-box verify-code-input hidden\" autofocus/></div></div>");}function body_7(chk,ctx){return chk.write("<p class='view-container-body-text send-code-to-msg ").exists(ctx._get(false, ["emailOnly"]),ctx,{"block":body_8},null).write("'>We'll send an email with the code to:").reference(ctx._get(false,["emailOption","masked"]),ctx,"h").write("</p>");}function body_8(chk,ctx){return chk.write("single-option");}function body_9(chk,ctx){return chk.write("disabled");}function body_10(chk,ctx){return chk.write("hidden");}return body_0;})();
(function(){dust.register("twofa-header",body_0);function body_0(chk,ctx){return chk.write("<div class=\"twofa-header-container\"><div class='logo ").reference(ctx._get(false, ["logoClass"]),ctx,"h").write("'><img src='").reference(ctx._get(false, ["shLogoImgUrl"]),ctx,"h").write("' alt=\"StubHub - Where Fans Buy & Sell Tickets\"/></div><a id='twofa-close-icon' class='sh-iconset sh-iconset-close header-closeIcon'></a>\t<!-- <div class=\"heading\">").reference(ctx._get(false, ["heading"]),ctx,"h").write("</div> --><div class=\"heading\">Verify your account</div></div>");}return body_0;})();
(function(){dust.register("twofa-layout",body_0);function body_0(chk,ctx){return chk.write("<div class=\"sh-ui-twofa\"><div id=\"twofa-left-panel\" class=\"twofa-left-panel\"><div id=\"left-divider\" class=\"left-divider\"></div><div id=\"left-content\" class=\"left-content\">Your ticket out</div></div><div id=\"twofa-right-panel\" class=\"twofa-right-panel\"><header id=\"twofa-layout-header\"></header><div id=\"twofa-layout-body\"></div></div></div>");}return body_0;})();
(function(){dust.register("verifycode",body_0);function body_0(chk,ctx){return chk.write("<div class='view-container'><div class='view-container-body verify-code-container'><p class='view-container-title-text'>").helper("eq",ctx,{"else":body_1,"block":body_2},{"key":ctx._get(false, ["channel"]),"value":"mobile"}).reference(ctx._get(false, ["device"]),ctx,"h").write("</p><div class='view-container-error hidden' id='verify-code-system-error'></div><div class='view-container-error hidden' id='verify-code-error'></div><div class='view-container-actions'><div class='verify-container-action'><input placeholder=\"Code\" type=\"text\" pattern=\"[0-9]{6}\" maxlength=\"6\" class=\"input-box verify-code-input\" autofocus/><button id='verify-code-button' class=\"verify-code-button disabled\">Verify</button><div class='verify-code-resend-code hidden'><p>Having trouble with the code?</p><a href='' class='resend-code'>Send a new code</a></div></div></div></div></div>");}function body_1(chk,ctx){return chk.write("We’ve sent an email with a verification code to email address:");}function body_2(chk,ctx){return chk.write("Enter the code we have sent to phone number:");}return body_0;})();ction(){var a=this.uiEl.$passwordBox.attr("type");"password"===a?(this.uiEl.$passwordBox.attr("type","text"),this.uiEl.$maskToggle.text("HIDE")):(this.uiEl.$passwordBox.attr("type","password"),this.uiEl.$maskToggle.text("SHOW")),this.uiEl.$passwordBox.focus()},validatePassword:function(){var a=this.uiEl.$passwordBox.val();/[A-Za-z]+/g.test(a)?this.uiEl.$hintOneLetter.removeClass("disable"):this.uiEl.$hintOneLetter.addClass("disable"),/\d+/gi.test(a)?this.uiEl.$hintOneNumber.removeClass("disable"):this.uiEl.$hintOneNumber.addClass("disable"),!a||a.length<8?this.uiEl.$hintMinEight.addClass("disable"):this.uiEl.$hintMinEight.removeClass("disable")},validateToken:function(){var a=this.model.fetch({validate:!1,data:this.model.attributes,beforeSend:this.model.urlHeaders});a.done(function(){this.$el.find("#create-password").removeClass("hidden")}.bind(this)).fail(function(){this.isErrorDisplayed||this.uiEl.$messageBox.append(c.get("common.login.common.error.tokenerror")).removeClass("login-success hidden").addClass("login-error"),this.$el.find("#try-again").removeClass("hidden")}.bind(this)),d.track("CreatePassword: validateToken",this.attributes.pageName)},proccessChangePassword:function(a){var b=this,a=a||{customer:"",defaultEmail:""};b.createPassword(a).done(function(c){var e=JSON.parse(c),f={username:e.customer.defaultEmail||e.customer.defaultEmail,password:a.customer.newPassword,tmRefID:d.getTMRefId(),source:"PWRESET"};q.signIn(f).done(function(a){q.setSessionData(a),q.initUserToken(q.getSessionId()).done(function(){return window.location.href.indexOf("loginType=facebook")>-1?void b.fbLink():void b.removeParamRedirect()}).fail(function(a){b.publishEvent("login:signInFail",a),a.error&&a.error.code&&Boolean(a.error.code.match("UserAgreementMissing"))&&this.viewContainer().showUserAgreement(a)})}).fail(function(a){b.publishEvent("login:signInFail",a)})}).fail(function(a){})},createPassword:function(a){var e,f=this,g=this.model.set(a,{validate:!0});return g?(f.disableSubmitButton(),f.updateSubmitButton(c.get("common.login.common.loading.text")+"&#8230"),e=f.model.save(null,{success:function(a,b){f.disableSubmitButton(),f.updateSubmitButton(c.get("common.login.common.loading.signingin.text")+"&#8230")},error:function(a,b){f.enableSubmitButton();try{var e=JSON.parse(b.responseText);!f.isErrorDisplayed&&e.customer.errors&&(f.uiEl.$messageBox.append(e.customer.errors.error[0].errorMessage).removeClass("login-success hidden").addClass("login-error"),f.isErrorDisplayed=!0);var g=d.buildErrorLog(b);d.logAppState(g,"fetch",JSON.stringify(b),f.attributes.pageName,b.status)}catch(h){f.isErrorDisplayed||(f.uiEl.$messageBox.append(c.get("common.login.common.error.genericerror")).removeClass("login-success hidden").addClass("login-error"),f.isErrorDisplayed=!0)}d.track("Create Password: Invalid Email",f.attributes.pageName,f.attributes.pageType)},dataType:"text",type:"PUT",beforeSend:f.model.urlHeaders}),d.track("Create Password: Submit",this.attributes.pageName,this.attributes.pageType)):e=b.utils.rejectedPromise(),e},fbLink:function(){var a=this;n.loadFacebook().done(function(b){
FB.getLoginStatus(function(b){"connected"===b.status?n.fbUserData().done(function(b){q.credentials=b,a.subModels.socialConnectLookup.connectSocial(b).done(function(b){a.removeParamRedirect(),d.track("create new password: already social connected",SH.OMN.pageName,SH.OMN.pageType)}).fail(function(c){a.subModels.socialConnectLinkAccount.connectSocial(b).done(function(){a.removeParamRedirect(),d.track("create new password: social connect linking success",SH.OMN.pageName,SH.OMN.pageType)}).fail(function(){a.removeParamRedirect(),d.track("create new password: social connect linking failure",SH.OMN.pageName,SH.OMN.pageType)})})}).fail(function(b){a.removeParamRedirect(),d.track("create new password: users facebook FB.api me request failed",SH.OMN.pageName,SH.OMN.pageType)}):(a.removeParamRedirect(),d.track("create new password: Not a facebook connected user",SH.OMN.pageName,SH.OMN.pageType))})}).fail(function(b){a.removeParamRedirect(),d.track("create new password: facebook library failed to load",SH.OMN.pageName,SH.OMN.pageType)})},processErrors:function(a){for(var b in a){var c=a[b];a.hasOwnProperty(b)&&(this.uiEl.$messageBox.append(c.error),this.uiEl.$passwordBox.focus(),this.isErrorDisplayed=!0)}this.uiEl.$messageBox.removeClass("login-success hidden").addClass("login-error")},clearErrors:function(){this.uiEl.$messageBox.empty().addClass("hidden"),this.isErrorDisplayed=!1},afterRender:function(){window.location.href.indexOf("loginType=facebook")>-1&&(this.uiEl.$fblinkMessage.removeClass("fblink-message hidden").addClass("fblink-message"),d.track("create new password: facebook return user trying to link to stubhub",SH.OMN.pageName,SH.OMN.pageType)),this.validateToken()}}));return r}),define("common-login-views-decision-social",["foobunny","common-login-base-view","i18n","common-login-helper"],function(a,b,c,d){"use strict";var e=b.extend({initialize:function(){},omitWrapper:!0,template:"decision-social",heading:"common.login.common.decisionsocial.heading",events:{"click #register-social":"registerSocial","click #connect-social":"connectSocial","click #reset-password":"gotoResetPassword"},gotoResetPassword:function(a){a.preventDefault(),a.stopPropagation(),d.track("facebook SH Decision: Forgot Password Click",SH.OMN.pageName,SH.OMN.pageType),this.viewContainer().showResetPasswordView()},registerSocial:function(a){a.preventDefault(),a.stopPropagation(),d.track("facebook SH Decision: New Account Click",SH.OMN.pageName,SH.OMN.pageType),this.viewContainer().showRegisterSocialView()},connectSocial:function(a){a.preventDefault(),a.stopPropagation(),d.track("facebook SH Decision: Link Existing Account Click",SH.OMN.pageName,SH.OMN.pageType),this.viewContainer().showConnectSocial()}});return e}),define("common-login-views-header",["foobunny","sh_global_registry","common-login-helper","common-login-models-header"],function(a,b,c,d){"use strict";var e=a.BaseView.extend({initialize:function(a){this.model=d.getInstance(),_.extend(this.model.attributes,a.attributes),this.model.on("change",this.render,this)},el:"#login-header",template:"header",events:{"click #closeIcon":"closeLoginComponent"},closeLoginComponent:function(){this.publishEvent("login:closeClick"),c.track("Close",SH.OMN.pageName,SH.OMN.pageType)},context:function(){var a="stubhub-logo-ticket-out-white.svg",c="76ers-logo.svg",d=b;d.getSiteId();return{heading:this.model.get("heading"),logoClass:"newlogo",shLogoImgUrl:SH.appCommon.staticHost+"/resources/shape/images/common-"+SH.appCommonVersion+"/"+a,sh76ersLogo:SH.appCommon.staticHost+"/resources/shape/images/common-"+SH.appCommonVersion+"/76ers/"+c}}});return e}),define("common-login-base-view",["foobunny","i18n","common-login-helper","common-login-models-session","common-login-views-header"],function(a,b,c,d,e){"use strict";var f=d.getInstance(),g=a.BaseView.extend({omitWrapper:!0,focusElement:"#first_name",errorQueue:[],heading:"common.login.common.heading",uiEl:{$messageBox:"#message-box"},subViews:{headerView:new e({attributes:{heading:""}})},viewContainer:function(){var a=require("common-login-viewcontainers-login");return a.getInstance()},initialize:function(){var a,b,c,d=this,e=f&&f.credentials;d.renderedSuccess().done(function(){e&&(a=e.first_name?e.first_name:"",b=e.last_name?e.last_name:"",c=e.email?e.email:"",d.autoFillForm([{elId:"first-name",value:a},{elId:"last-name",value:b},{elId:"email-id",value:c}]))})},checkRenderedStatusCount:100,isErrorDisplayed:!1,focusOn:function(a){var b=a||this.defaultFocusElement,c=this.$el.find(b);c&&c.focus&&c.focus()},onSubmit:function(){this.clearErrors()},displayError:function(a,b){var c=a||"",d=b||"";this.enableSubmitButton(),!this.isErrorDisplayed&&$("#message-box").length>=1&&(this.uiEl.$messageBox.append(c).removeClass("hidden").addClass(d),this.isErrorDisplayed=!0)},enableSubmitButton:function(a){var b=a||"button[type=submit]",c=this.$el.find(b);c.hasClass("disabled")&&c.removeClass("disabled").text(c.data("title")),c.attr("disabled",!1)},disableSubmitButton:function(a){var b=a||"button[type=submit]",c=this.$el.find(b);c.data("title",c.html()),c.addClass("disabled"),c.attr("disabled",!0)},disableFBButton:function(){var a=".sh-ui-fb-button",c=this.$el.find(a),d=".sh-ui-fb-button .sh-ui-fb-text",e=this.$el.find(d);c.data("title",e.html()),c.addClass("disabled"),c.attr("disabled",!0),this.updateSubmitButton(b.get("common.login.common.loading.text")+"&#8230",d)},disableFBButtonOnly:function(){var a=".sh-ui-fb-button",b=this.$el.find(a),c=".sh-ui-fb-button .sh-ui-fb-text",d=this.$el.find(c);b.data("title",d.html()),b.addClass("disabled"),b.attr("disabled",!0)},enableFBButton:function(){var a=".sh-ui-fb-button",b=this.$el.find(a);b.removeClass("disabled"),this.updateSubmitButton(b.attr("title"),".sh-ui-fb-button .sh-ui-fb-text"),b.attr("disabled",!1)},updateSubmitButton:function(a,c){var d=c||"button[type=submit]",e=a||b.get("common.login.common.loading.text&#8230"),f=this.$el.find(d);f.html(e)},afterRender:function(){this.options.data&&this.processErrors(this.options.data)},autoFillForm:function(a){var b,c,d=a.length;for(b=0;b<d;b++)a[b]&&(c=document.getElementById(a[b].elId),c&&a[b].value&&(c.value=a[b].value))},renderedSuccess:function(){function b(){return jQuery.contains(document,$(" ."+c.renderId)[0])?($(c.elSelector).removeClass(c.renderId),e.resolve({status:"render.success",code:"default"})):c.checkRenderedStatusCount<=0?e.reject({status:"render.fail",code:"default"}):(c.$el.addClass(c.renderId),void setTimeout(function(){c.checkRenderedStatusCount--,b()},100))}var c=this,d="shRenderId-"+String(Math.round(1e5*Math.random())),e=a.utils.deferred();return c.renderId=d,b(),e},getErrorMessage:function(a){this.model.addErrorCodeResponses(this.errorCodes);try{var c=a.responseJSON||{error:""}}catch(d){a=a||{},c={error:{code:"default"}}}var e,f={status:a.status||"default",code:a.code||c.error.code||"default"},g=this.errorDefinitionRegistry[f.status]||this.errorDefinitionRegistry["default"];return g&&g.length>=0&&(g[f.code]?e=g[f.code]:g["default"]&&(e=g["default"])),void 0===e&&(e=this.errorDefinitionRegistry["default"]["default"]),b.get(e)},processErrors:function(a){var b=a||this.errorQueue;this.enableSubmitButton();for(var c in b)this.displayError(b[c])},clearErrors:function(){$("#message-box").length>=1&&(this.uiEl.$messageBox.empty().addClass("hidden"),this.isErrorDisplayed=!1)},setHeaderView:function(a){this.subViews.headerView.initialize({attributes:{heading:a.heading}})},beforeRender:function(){this.setHeaderView({heading:b.getStoreSpecific(this.heading)})}});return g}),define("common-login-views-login-layout",["foobunny","common-login-views-header","common-login-viewcontainers-login","global_context","common-login-helper","i18n"],function(a,b,c,d,e,f){"use strict";var g=a.Layout.extend({initialize:function(a){this.viewContainers={loginContainer:c.getInstance({element:a.el,templatesPath:a.templatesPath,attributes:a.attributes})}},template:"login-layout",closeLoginComponent:function(){this.publishEvent("login:closeClick"),e.track("Close",SH.OMN.pageName,SH.OMN.pageType)},context:function(){var a=f.get("common.login.common.marketing.message");return $(".skin-76ers").length>0&&(a=f.get("common.login.common.markteing.76ers.message")),{marketingMessage:a}}});return g}),define("common-login-views-register-social",["underscore","foobunny","common-login-base-view","common-login-models-session","common-login-models-register","common-login-models-checkemail","i18n","common-login-helper","sh_global_registry","common-login-models-signin","common-login-models-signin-ua","common-login-models-connect-social-link-account","common-login-models-signin-social","social-helper","application_helper","loggerUtil"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";var q=d.getInstance(),r=c.extend({initialize:function(b){var c=this;this.model=new e,this.model.country=SH.country.toUpperCase(),this.model.destination=h.getUserDestination(),this.model.addErrorCodeResponses(c.errorCodes),a.extend(this.model.attributes,b.attributes),this.model.on("invalid",function(a,b){c.displayError(c.model.getErrorMessage(b))}),this.subscribeEvent("login:closeClick",function(){c.clearErrors(),c.enableSubmitButton()})},afterRender:function(){var a=this;a.renderedSuccess().done(function(){a.autoFillForm([{elId:"first-name",value:q.credentials.first_name},{elId:"last-name",value:q.credentials.last_name},{elId:"email-id",value:q.credentials.email}]),q.credentials.first_name&&q.credentials.last_name&&q.credentials.email&&a.socialSignUp(q.credentials)})},template:"register-social",heading:"common.login.common.register.heading",events:{"click #register-social":"registerSocial",submit:"onSubmit","click #signin-user":"gotoSignin"},subModels:{signInModel:new j,socialSignInModel:new m,checkEmailModel:new f,socialConnectLinkAccountModel:new l},errorCodes:[{status:"email",code:"email",userMessage:"common.login.register.emailpwderror"},{status:"user.input",code:"missing.email",userMessage:"common.login.common.error.emptyemail"},{status:"user.input",code:"missing.password",userMessage:"common.login.common.error.emptypassword"},{status:"user.input",code:"missing.firstname",userMessage:"common.login.common.error.emptyfirstname"},{status:"user.input",code:"missing.lastname",userMessage:"common.login.common.error.emptyfirstname"},{status:"user.input",code:"invalid.email",userMessage:"common.login.register.invalidemail"},{status:"user.input",code:"invalid.password",userMessage:"common.login.register.invalidpwd"},{status:"user.input",code:"accountexists",userMessage:"common.login.register.accountexists"}],generateUniqueId:function(){var a=o.generateUUID(),b=a.length,c=a.substr(Math.random()*(b-8),8),d=a.substr(Math.random()*b,8),e="ABCDEFGHIJKLMNOPQRSTUVWXYZ!@#$%^&*().+-";return c+e[Math.round(Math.random()*e.length)]+d},gotoSignin:function(a){a.preventDefault(),a.stopPropagation();var b=this.model.get("username");h.track("facebook Sign Up: Sign In Click",q.attributes.pageName,q.attributes.pageType),this.viewContainer().showSigninView({email:b})},onSubmit:function(a){a.preventDefault(),a.stopPropagation();var b={firstName:this.$el.find("#first-name").val().trim(),lastName:this.$el.find("#last-name").val().trim(),email:this.$el.find("#email-id").val().trim(),emailSignup:this.$el.find("#email-optin-chk").is(":checked")?"Y":"N",password:this.generateUniqueId(),country:this.model.country,destination:this.model.destination},c=this;if(q.credentials.first_name=b.firstName,q.credentials.lastName=b.lastName,q.credentials.email=b.email,this.clearErrors(),this.validateInputs(b)){var d=this.massageData(b);c.model.clear();var e=c.model.set(d,{validate:!0}),f={username:b.email,password:b.password,tmRefID:h.getTMRefId()};e&&(c.disableSubmitButton(),c.processRegistration(f),h.track("facebook Sign Up: Sign Up Click",SH.OMN.pageName,SH.OMN.pageType))}else this.displayError(this.getErrorMessage())},socialSignUp:function(a){var b={firstName:a.first_name,lastName:a.last_name,email:a.email,password:this.generateUniqueId(),country:this.model.country,destination:this.model.destination,emailsignup:this.$el.find("#email-optin-chk").is(":checked")?"Y":"N"},c=this;if(this.disableSubmitButton(),this.updateSubmitButton(g.get("common.login.common.loading.text")+"&#8230"),q.credentials.first_name=b.firstName,q.credentials.lastName=b.lastName,q.credentials.email=b.email,this.clearErrors(),this.validateInputs(b)){var d=this.massageData(b);c.model.clear();var e=c.model.set(d,{validate:!0}),f={username:b.email,password:b.password,tmRefID:h.getTMRefId()};e&&c.processRegistration(f)}else this.displayError(this.getErrorMessage())},processRegistration:function(b){var c=this,d=b||{};return c.disableSubmitButton(),c.updateSubmitButton(g.get("common.login.common.loading.text")+"&#8230"),c.clearErrors(),c.registerUser().done(function(b){q.signIn(d).done(function(b){q.setSessionData(b),q.initUserToken(q.getSessionId()).done(function(b){c.subModels.socialConnectLinkAccountModel.connectSocial(q.credentials).done(function(){q.getUserData(),n.showMessageBanner("common.login.common.signin.success.banner","success"),a.bind(n.processLoginSuccess,c)(),h.track(q.getLoginType()+" Sign Up: "+q.getLoginType()+" Sign Up Success",SH.OMN.pageName,SH.OMN.pageType)}).fail(function(){n.showMessageBanner("common.login.common.msgbanner.accountlinked","warn"),a.bind(n.processLoginSuccess,c)(),h.track(q.getLoginType()+" Sign Up: StubHub Sign Up Success",SH.OMN.pageName,SH.OMN.pageType)})}).fail(function(b){a.bind(n.socialSignInFail,c)(b),c.enableSubmitButton(),h.track(q.getLoginType()+" Sign Up: TokenInit Failure",SH.OMN.pageName,SH.OMN.pageType)})}).fail(function(a){c.publishEvent("login:signInFail",a),h.track(q.getLoginType()+" Sign Up: "+q.getLoginType()+" Sign In Failure",SH.OMN.pageName,SH.OMN.pageType),c.enableSubmitButton()})}).fail(function(a){var b;switch(a.status){case 400:p.error("unified.common.login.social.register: unexpected response code. undocumented response",a),c.viewContainer().showConnectSocial();break;case 409:c.viewContainer().showConnectSocial();break;case 404:case 0:c.displayError(g.get("common.login.common.error.genericerror"));break;default:c.displayError(c.model.getErrorMessage(a),"login-error")}b=h.buildErrorLog(response),h.logAppState(b,"fetch",JSON.stringify(response),SH.OMN.pageName,response.status),h.track(q.getLoginType()+" Sign Up: Invalid Login",c.attributes.pageName,c.attributes.pageType),c.enableSubmitButton()})},registerUser:function(){var a=this;return this.model.save(null,{success:function(b){a.disableSubmitButton(),a.updateSubmitButton(g.get("common.login.common.loading.signingin.text"))},error:function(b,c){var d,e,f,i,j,k,l,m;try{switch(d=h.buildErrorLog(c),e=JSON.parse(c.responseText),h.logAppState(d,"fetch",JSON.stringify(c),SH.OMN.pageName,c.status),e=e.Errors,f=e.error.length>1?"INVALID":e.error[0].code){case"INVALID":i=g.get("common.login.register.emailpwderror");break;case"MISSING_INPUT":j=e.error[0].param.indexOf("emailAddress")>=0,k=e.error[0].param.indexOf("password")>=0,l=e.error[0].param.indexOf("firstName")>=0,m=e.error[0].param.indexOf("lastName")>=0,i=j&&k?g.get("common.login.register.emailpwderror"):j?g.get("common.login.common.error.emptyemail"):k?g.get("common.login.common.error.emptypassword"):l?g.get("common.login.common.error.emptyfirstname"):m?g.get("common.login.common.error.emptylastname"):g.get("common.login.common.error.emptyemailpwd");break;case"INVALID_INPUT":k=e.error[0].param.indexOf("password")>=0,i=k?g.get("common.login.register.invalidpwd"):g.get("common.login.register.invalidemail");break;case"ACCOUNT_ALREADY_EXIST":i=g.get("common.login.register.accountexists");break;default:i=g.get("common.login.register.emailpwderror")}a.displayError(i)}catch(n){a.displayError(g.get("common.login.common.error.genericerror"))}h.track(q.getLoginType()+" Sign Up: Error",SH.OMN.pageName,SH.OMN.pageType),a.enableSubmitButton()},beforeSend:this.model.urlHeaders})},massageData:function(a){var b={customer:{emailAddress:a.email,password:a.password,defaultContact:{name:{firstName:a.firstName,lastName:a.lastName},address:{country:a.country},phone:{phoneNumber:"0000000000"}},marketingEmailOptIn:a.emailsignup,acceptedAgreements:[{destination:a.destination}]}};return b},context:function(){return{fbConnectImgUrl:"//cache15.stubhubstatic.com/promotions/scratch/fb/btn_FB_connect_2.png",username:this.options.username||"",uncheckOptIn:i.getStoreFeatureByName("common.register.uncheckMarketingOptIn").featureValue}},validateInputs:function(a){var b=a.email,c=a.firstName,d=a.lastName,e=a.password,f=!c||0===c.trim().length,i=!d||0===d.trim().length,j=!b||0===b.trim().length,k=!e||0===e.trim().length,l=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-\+\.])+\.)+([a-zA-Z0-9]{2,4})+$/;return j&&k&&f&&i?(inputErrors.push({name:"default",error:g.get("common.login.common.error.emptyfields")}),h.track(q.getLoginType()+" Sign Up: Empty All Fields: Form Error",SH.OMN.pageName,SH.OMN.pageType)):(f?(this.errorQueue.push(g.get("common.login.common.error.emptyfirstname")),this.errorQueue.push(g.get("common.login.common.error.emptyfields")),h.track(q.getLoginType()+" Sign Up: Empty Firstname: Form Error",SH.OMN.pageName,SH.OMN.pageType)):c.trim().length>50&&(this.errorQueue.push(g.get("common.login.register.name.length.error")),h.track(q.getLoginType()+" Sign Up: Firstname maxlength: Form Error",SH.OMN.pageName,SH.OMN.pageType)),i?(this.errorQueue.push(g.get("common.login.common.error.emptylastname")),h.track(q.getLoginType()+" Sign Up: Empty Lastname: Form Error",SH.OMN.pageName,SH.OMN.pageType)):d.trim().length>50&&(this.errorQueue.push(g.get("common.login.register.name.length.error")),h.track(q.getLoginType()+" Sign Up: Lastname maxlength: Form Error",SH.OMN.pageName,SH.OMN.pageType)),j?(this.errorQueue.push(g.get("common.login.common.error.emptyemail")),h.track(q.getLoginType()+" Sign Up: Empty Email: Form Error",SH.OMN.pageName,SH.OMN.pageType)):l.test(b)||(this.errorQueue.push(g.get("common.login.register.invalidemail")),h.track(q.getLoginType()+" Sign Up: Invalid Email: Form Error",SH.OMN.pageName,SH.OMN.pageType))),!(this.errorQueue.length>0)||(this.processErrors(this.errorQueue),!1)}});return r}),define("common-login-views-register",["underscore","foobunny","common-login-base-view","common-login-models-session","common-login-models-register","common-login-models-checkemail","i18n","common-login-helper","sh_global_registry","common-login-models-signin-social","common-login-models-connect-social","common-login-models-connect-social-link-account","social-helper","sh_mbox_util","storage","loggerUtil","application_helper"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";var r=d.getInstance(),s={MIN_PASSWORD:8,MAX_PASSWORD:20};Object.freeze(s);var t=c.extend({errorCodes:[{status:"registration",code:"ui",userMessage:"some.i18n.property.key"},{status:"signIn",code:"ui",userMessage:"some.i18n.property.key"},{status:"initToken",code:"ui",userMessage:"some.i18n.property.key"}],initialize:function(c){var d,f,g=this;this.mBoxDeferred=b.utils.deferred(),window.mboxCreate&&(d="stubhub"===window.SH.targetHost,f=d?"PROD_loginFlow":"DEV_loginFlow",mboxDefine("target-loginFlow-mbox",f),mboxUpdate(f,"componantName=login"),q.pollProperty(SH.mbox,"loginFlow",this.setloginFlowAbTest,this.setloginFlowAbTest,void 0,600,this)),this.model=new e,this.model.country=SH.country.toUpperCase(),this.model.destination=h.getUserDestination(),a.extend(this.model.attributes,c.attributes),this.model.on("invalid",function(a,b){g.processErrors(b)}),this.subscribeEvent("login:closeClick",function(){g.clearErrors(),g.enableSubmitButton()}),g.renderedSuccess().done(function(){g.autoFillForm([{elId:"first-name",value:r.credentials.first_name},{elId:"last-name",value:r.credentials.last_name},{elId:"email-id",value:r.credentials.email}])})},setloginFlowAbTest:function(){var a=q.getFeatureFn("gs.features","login.loginFlowExperience");SH.mbox.enableloginFlow=SH.mbox.appcommon.login.experience||/true/gi.test(a),this.mBoxDeferred.resolve()},afterRender:function(){m.loadFacebook(),this.renderedSuccess().done(function(){h.isFeatureEnabled("hideOptIn")&&(document.getElementsByClassName("email-box")[0].style.display="none")})},template:"register",heading:"common.login.common.register.heading",events:{"click #register-user":"gotoRegisterUser",submit:"onSubmit","click #signin-user":"gotoSignin","click .sh-ui-fb-button":"fbSignUp","click .mask-toggle":"toggleMask","keyup .input-box[name=password]":"validatePassword","focus .input-box[name=password]":"showMaskToggle","blur .input-box[name=password]":"hideMaskToggle"},subModels:{socialSignInModel:new j,socialConnectLookupAccountModel:new k,checkEmailModel:new f},uiEl:{$messageBox:"#message-box",$pwdmessageBox:".pwdmessage-box",$emailmessageBox:".emailmessage-box",$fnamemessageBox:".fnamemessage-box",$lnamemessageBox:".lnamemessage-box",$maskToggle:".mask-toggle",$passwordBox:".input-box[name=password]",$emailBox:".input-box[name=email-id]",$fnameBox:".input-box[name=first-name]",$lnameBox:".input-box[name=last-name]",$interactiveHint:".interactive-hint",$hintMinEight:".interactive-hint .min-eight",$hintOneLetter:".interactive-hint .one-letter",$hintOneNumber:".interactive-hint .one-number"},isErrorDisplayed:!1,gotoSignin:function(a){a.preventDefault(),a.stopPropagation();var b=this.model.get("username");h.track("Sign Up: Sign In Click",r.attributes.pageName,r.attributes.pageType),this.viewContainer().showSigninView({email:b?b:""})},onSubmit:function(a){a.preventDefault(),a.stopPropagation(),h.track("Sign Up: Sign Up Click",r.attributes.pageName,r.attributes.pageType);var b={firstName:this.$el.find("#first-name").val().trim(),lastName:this.$el.find("#last-name").val().trim(),email:this.$el.find("#email-id").val().trim(),password:this.$el.find("#password").val(),emailSignup:this.$el.find("#email-optin-chk")[0].checked?"Y":"N",country:this.model.country,destination:this.model.destination},c=this;if(c.disableSubmitButton(),c.disableFBButtonOnly(),c.updateSubmitButton(g.get("common.login.common.loading.text")+"&#8230"),r.credentials.first_name=b.firstName,r.credentials.last_name=b.lastName,r.credentials.email=b.email,this.clearErrors(),this.validateInputs(b)){var d=this.massageData(b);c.model.clear();var e=c.model.set(d,{validate:!0}),f={username:b.email,password:b.password,tmRefID:h.getTMRefId()};e&&c.processRegistration(f).then(function(){})}else c.enableSubmitButton(),c.enableFBButton()},processRegistration:function(a){var b=this,a=a||{};return r.setSessionData({login_type:"stubhub"}),b.registerUser().done(function(c){a.source="SIGNUP",r.signIn(a).done(function(a){r.setSessionData(a),r.initUserToken(r.getSessionId()).done(function(a){o.setItem("session_login_init",1,"session"),r.getUserData(),b.publishEvent("login:signInSuccess",b.subModels.socialSignInModel),h.track("Sign Up: Sign Up Success",r.attributes.pageName,r.attributes.pageType)}).fail(function(a){o.setItem("session_login_init",0,"session"),b.displayError(b.model.getErrorMessage({status:"default",code:"default"}),"login-error"),h.track("Sign Up: Sign Up Failure",r.attributes.pageName,r.attributes.pageType)})}).fail(function(a){b.publishEvent("login:signInFail",a),h.track("Sign Up: Sign In Failure",r.attributes.pageName,r.attributes.pageType),b.viewContainer().showSigninView({errors:[b.model.getErrorMessage(a)]})})}).fail(function(a){var c=h.buildErrorLog(a);h.logAppState(c,"fetch",JSON.stringify(a),SH.OMN.pageName,a.status),h.track("Sign Up: Invalid Login",b.attributes.pageName,b.attributes.pageType)})},registerUser:function(){var a=this;return this.model.save(null,{success:function(b){a.updateSubmitButton(g.get("common.login.common.loading.signingin.text"))},error:function(b,c){var d,e,f,i,j,k,l,m;try{switch(d=h.buildErrorLog(c),e=JSON.parse(c.responseText),h.logAppState(d,"fetch",JSON.stringify(c),SH.OMN.pageName,c.status),e=e.Errors,f=e.error.length>1?"INVALID":e.error[0].code){case"INVALID":i=g.get("common.login.register.emailpwderror");break;case"MISSING_INPUT":j=e.error[0].param.indexOf("emailAddress")>=0,k=e.error[0].param.indexOf("password")>=0,l=e.error[0].param.indexOf("firstName")>=0,m=e.error[0].param.indexOf("lastName")>=0,i=j&&k?g.get("common.login.register.emailpwderror"):j?g.get("common.login.common.error.emptyemail"):k?g.get("common.login.common.error.emptypassword"):l?g.get("common.login.common.error.emptyfirstname"):m?g.get("common.login.common.error.emptylastname"):g.get("common.login.common.error.emptyemailpwd");break;case"INVALID_INPUT":k=e.error[0].param.indexOf("password")>=0,i=k?g.get("common.login.register.invalidpwd"):g.get("common.login.register.invalidemail");break;case"ACCOUNT_ALREADY_EXIST":i=g.get("common.login.register.accountexists"),h.track("Sign Up: Account Exists",SH.OMN.pageName,SH.OMN.pageType);break;default:i=g.get("common.login.register.emailpwderror")}a.displayError(i)}catch(n){a.displayError(g.get("common.login.common.error.genericerror"))}h.track("Sign Up: Sign Up Error",SH.OMN.pageName,SH.OMN.pageType),a.enableSubmitButton(),a.enableFBButton()},beforeSend:this.model.urlHeaders})},processSuccessFailures:function(a){var b=this;h.track(a,SH.OMN.pageName,SH.OMN.pageType),b.enableSubmitButton(),b.enableFBButton()},afterValidSocialRegistration:function(b){var c=this;c.subModels.checkEmailModel.validateEmail(r.credentials.email).done(function(a){c.viewContainer().showConnectSocialFormView({error:g.get("common.login.register.accountexists")})}).fail(function(d){b.source="SIGNUP",c.subModels.socialSignInModel.signIn(b).done(function(a){c.afterSocialSignIn(a)}).fail(function(b){b.responseJSON&&r.setSessionData(b.responseJSON.error),a.bind(m.socialSignUpFail,c)(b),c.processSuccessFailures("Sign Up: facebook Sign Up Failure")})})},afterSocialSignIn:function(b){var c=this;c.updateSubmitButton(g.get("common.login.common.loading.signingin.text"),".sh-ui-fb-button .sh-ui-fb-text"),r.setSessionData(b.login),r.initUserToken(r.getSessionId()).done(function(){m.showMessageBanner("common.login.common.signin.success.banner","success"),a.bind(m.processLoginSuccess,c)(),c.processSuccessFailures("Sign Up: facebook Sign In Success")}).fail(function(b){a.bind(m.processLoginFailure,c)(),c.processSuccessFailures("Sign Up: TokenInit Failure")})},afterSocialConnectLookup:function(b){var c=this;c.subModels.socialSignInModel.signIn(b).done(function(a){c.afterSocialSignIn(a)}).fail(function(b){b.responseJSON&&r.setSessionData(b.responseJSON.error),a.bind(m.socialSignUpFail,c)(b),c.processSuccessFailures("Sign Up: FB Sign In Failure")})},afterFBUserData:function(a){var b=this;r.credentials=a,b.subModels.socialConnectLookupAccountModel.connectSocial(r.credentials).done(function(){b.afterSocialConnectLookup(a)}).fail(function(c){b.validateSocialRegistration(c,a).done(function(){b.afterValidSocialRegistration(a)}).fail(function(a){switch(c.status){case 404:b.viewContainer().showRegisterSocialView();break;default:b.displayError(g.get("common.login.common.error.genericerror"))}b.enableSubmitButton(),b.enableFBButton()})})},afterValidFBConnection:function(){var a=this;m.fbUserData().done(function(b){a.afterFBUserData(b)}).fail(function(b){a.displayError(g.get("common.login.common.error.genericerror")),a.processSuccessFailures("Sign Up: facebook User Permission Data Failure")})},afterFbLogin:function(a){var b=this;m.validateFacebookConnection(a).done(function(){b.afterValidFBConnection()}).fail(function(a){b.displayError(g.get("common.login.common.error.genericerror")),b.processSuccessFailures("Sign Up: facebook User Permission Failure"),r.setSessionData({login_type:"stubhub"})})},afterfbScriptLoad:function(a){var b=this;m.fbLogin().done(function(a){b.afterFbLogin(a)}).fail(function(a){b.displayError(g.get("common.login.facebook.timeout"),"login-error"),b.processSuccessFailures("Sign Up: facebook Login Failure"),r.setSessionData({login_type:"stubhub"})})},fbSignUp:function(){h.track("Sign Up: facebook Sign Up Click",SH.OMN.pageName,SH.OMN.pageType);var a=this;r.setSessionData({login_type:"facebook"}),a.disableFBButton(),a.disableSubmitButton(),a.clearErrors(),m.loadFacebook().then(function(b){a.afterfbScriptLoad(b)}).fail(function(b){p.warn("facebook library failed to load",b),a.displayError(g.get("common.login.facebook.timeout"),"login-error"),a.processSuccessFailures("Sign Up: facebook Library Failure")})},validateSocialRegistration:function(a,c){return 404===a.status&&c.email&&c.first_name&&c.last_name?b.utils.resolvedPromise(a):b.utils.rejectedPromise(a)},massageData:function(a){var b={customer:{emailAddress:a.email,password:a.password,defaultContact:{name:{firstName:a.firstName,lastName:a.lastName},address:{country:a.country},phone:{phoneNumber:"0000000000"}},marketingEmailOptIn:a.emailSignup,acceptedAgreements:[{destination:a.destination}]}};return b},context:function(){var a=h.isFeatureEnabled("isConnectWithFrdsEnabled");return{fbConnectImgUrl:"//cache15.stubhubstatic.com/promotions/scratch/fb/btn_FB_connect_2.png",username:this.options.username||"","facebook-login-text":g.get("common.login.register.signupwithfacebook"),"or-text":g.get("common.login.common.or"),showConnectWithFrdsText:a,"connect-with-frds-on-stubhub":g.get("common.login.common.socialconnect.label"),"facebook-logo":SH.appCommon.staticHost+"/resources/shape/images/common-"+SH.appCommonVersion+"/icon_fb_bluenew.svg",uncheckOptIn:i.getStoreFeatureByName("common.register.uncheckMarketingOptIn").featureValue}},validateInputs:function(a){var b=[],c=a.email,d=a.password,e=a.firstName,f=a.lastName,i=!e||0===e.trim().length,j=!f||0===f.trim().length,k=!c||0===c.trim().length,l=!d||0===d.trim().length,m=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,n=/^(?=.*\d)(?=.*[a-zA-Z]).{8,20}$/,o=new RegExp(c.split("@")[0].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gi"),p=o.test(d);if(SH.mbox.enableloginFlow){if(k&&l&&i&&j)b.push({name:"all-fields",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Empty All Fields: Form Error",SH.OMN.pageName,SH.OMN.pageType);else if(i&&j&&k&&(b.push({name:"fname-lname-email",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Email Password Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),j&&k&&l&&(b.push({name:"lname-email-password",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Email Password Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),k&&l&&i&&(b.push({name:"email-password-fname",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Email Password Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),l&&i&&j&&(b.push({name:"password-fname-lname",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Email Password Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),i&&j&&(b.push({name:"flname",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: First Name Last Name Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),i&&k&&(b.push({name:"fnameemail",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: First Name Email Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),i&&l&&(b.push({name:"fnamepassword",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: First Name Password Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),j&&k&&(b.push({name:"lnameemail",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Last Name Email Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),j&&l&&(b.push({name:"lnamepassword",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Last Name Password Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),k&&l&&(b.push({name:"emailpassword",error:g.get("common.login.common.error.multiplefields")}),h.track("Sign Up: Email Password Empty: Form Error",SH.OMN.pageName,SH.OMN.pageType)),i?(b.push({name:"firstname",error:g.get("common.login.common.error.firstname.empty")}),h.track("Sign Up: Empty Firstname: Form Error",SH.OMN.pageName,SH.OMN.pageType)):e.trim().length>50&&(b.push({
name:"firstname",error:g.get("common.login.register.name.length.error")}),h.track("Sign Up: Firstname maxlength: Form Error",SH.OMN.pageName,SH.OMN.pageType)),j?(b.push({name:"lastname",error:g.get("common.login.common.error.lastname.empty")}),h.track("Sign Up: Empty Lastname: Form Error",SH.OMN.pageName,SH.OMN.pageType)):f.trim().length>50&&(b.push({name:"lastname",error:g.get("common.login.register.name.length.error")}),h.track("Sign Up: Lastname maxlength: Form Error",SH.OMN.pageName,SH.OMN.pageType)),k?(b.push({name:"email-id",error:g.get("common.login.common.error.email.empty")}),h.track("Sign Up: Empty Email: Form Error",SH.OMN.pageName,SH.OMN.pageType)):m.test(c)||(b.push({name:"email-id",error:g.get("common.login.register.email.invalid")}),h.track("Sign Up: Invalid Email: Form Error",SH.OMN.pageName,SH.OMN.pageType)),l)b.push({name:"password",error:g.get("common.login.common.error.password.empty")}),h.track("Sign Up: Empty Password: Form Error",SH.OMN.pageName,SH.OMN.pageType);else if(!n.test(d)||p){var q,r=(d||"").length;q=/[A-Za-z]+/gi.test(d)?/\d+/g.test(d)?r<s.MIN_PASSWORD?g.get("common.login.register.password.error.min.eight"):r>s.MAX_PASSWORD?g.get("common.login.register.password.error.max.character"):p?g.get("common.login.register.password.error.email"):/^[ a-zA-Z0-9!@#\$%\^\&*\)\(+=._-]+$/g.test(d)?g.get("common.login.register.invalidpwd"):g.get("common.login.register.password.has.invalidcharacter"):g.get("common.login.register.password.error.one.number"):g.get("common.login.register.password.error.one.letter"),b.push({name:"password",error:q}),h.track("Sign Up: Invalid Password Regex: Form Error",SH.OMN.pageName,SH.OMN.pageType)}}else k&&l&&i&&j?(b.push({name:"all-fields",error:g.get("common.login.common.error.emptyfields")}),h.track("Sign Up: Empty All Fields: Form Error",SH.OMN.pageName,SH.OMN.pageType)):(i?(b.push({name:"firstname",error:g.get("common.login.common.error.emptyfirstname")}),h.track("Sign Up: Empty Firstname: Form Error",SH.OMN.pageName,SH.OMN.pageType)):e.trim().length>50&&(b.push({name:"firstname",error:g.get("common.login.register.name.length.error")}),h.track("Sign Up: Firstname maxlength: Form Error",SH.OMN.pageName,SH.OMN.pageType)),j?(b.push({name:"lastname",error:g.get("common.login.common.error.emptylastname")}),h.track("Sign Up: Empty Lastname: Form Error",SH.OMN.pageName,SH.OMN.pageType)):f.trim().length>50&&(b.push({name:"lastname",error:g.get("common.login.register.name.length.error")}),h.track("Sign Up: Lastname maxlength: Form Error",SH.OMN.pageName,SH.OMN.pageType)),k?(b.push({name:"email-id",error:g.get("common.login.common.error.emptyemail")}),h.track("Sign Up: Empty Email: Form Error",SH.OMN.pageName,SH.OMN.pageType)):m.test(c)||(b.push({name:"email-id",error:g.get("common.login.register.invalidemail")}),h.track("Sign Up: Invalid Email: Form Error",SH.OMN.pageName,SH.OMN.pageType)),l?(b.push({name:"password",error:g.get("common.login.common.error.emptypassword")}),h.track("Sign Up: Empty Password: Form Error",SH.OMN.pageName,SH.OMN.pageType)):d.trim().length<8||d.trim().length>20?(b.push({name:"password",error:g.get("common.login.register.invalidpwd")}),h.track("Sign Up: Invalid Password: Form Error",SH.OMN.pageName,SH.OMN.pageType)):n.test(d)||(b.push({name:"password",error:g.get("common.login.register.invalidpwd")}),h.track("Sign Up: Invalid Password Regex: Form Error",SH.OMN.pageName,SH.OMN.pageType)));return!(b.length>0)||(this.processErrors(b),!1)},processErrors:function(a){for(var b in a){var c=a[b];if(!this.isErrorDisplayed){if(SH.mbox.enableloginFlow)switch(c.name){case"password":this.uiEl.$pwdmessageBox.append(c.error),this.uiEl.$passwordBox.focus();break;case"email-id":this.uiEl.$emailmessageBox.append(c.error),this.uiEl.$emailBox.focus();break;case"firstname":this.uiEl.$fnamemessageBox.append(c.error),this.uiEl.$fnameBox.focus();break;case"lastname":this.uiEl.$lnamemessageBox.append(c.error),this.uiEl.$lnameBox.focus();break;case"flname":this.uiEl.$messageBox.append(c.error),this.uiEl.$fnameBox.addClass("highlighted"),this.uiEl.$lnameBox.addClass("highlighted");break;case"fnameemail":this.uiEl.$messageBox.append(c.error),this.uiEl.$fnameBox.addClass("highlighted"),this.uiEl.$emailBox.addClass("highlighted");break;case"fnamepassword":this.uiEl.$messageBox.append(c.error),this.uiEl.$fnameBox.addClass("highlighted"),this.uiEl.$passwordBox.addClass("highlighted");break;case"lnameemail":this.uiEl.$messageBox.append(c.error),this.uiEl.$lnameBox.addClass("highlighted"),this.uiEl.$emailBox.addClass("highlighted");break;case"lnamepassword":this.uiEl.$messageBox.append(c.error),this.uiEl.$lnameBox.addClass("highlighted"),this.uiEl.$passwordBox.addClass("highlighted");break;case"emailpassword":this.uiEl.$messageBox.append(c.error),this.uiEl.$emailBox.addClass("highlighted"),this.uiEl.$passwordBox.addClass("highlighted");break;case"fname-lname-email":this.uiEl.$messageBox.append(c.error),this.uiEl.$fnameBox.addClass("highlighted"),this.uiEl.$lnameBox.addClass("highlighted"),this.uiEl.$emailBox.addClass("highlighted");break;case"lname-email-password":this.uiEl.$messageBox.append(c.error),this.uiEl.$lnameBox.addClass("highlighted"),this.uiEl.$emailBox.addClass("highlighted"),this.uiEl.$passwordBox.addClass("highlighted");break;case"email-password-fname":this.uiEl.$messageBox.append(c.error),this.uiEl.$emailBox.addClass("highlighted"),this.uiEl.$passwordBox.addClass("highlighted"),this.uiEl.$fnameBox.addClass("highlighted");break;case"password-fname-lname":this.uiEl.$messageBox.append(c.error),this.uiEl.$passwordBox.addClass("highlighted"),this.uiEl.$fnameBox.addClass("highlighted"),this.uiEl.$lnameBox.addClass("highlighted");break;case"all-fields":this.uiEl.$messageBox.append(c.error),this.uiEl.$fnameBox.addClass("highlighted"),this.uiEl.$lnameBox.addClass("highlighted"),this.uiEl.$emailBox.addClass("highlighted"),this.uiEl.$passwordBox.addClass("highlighted")}else this.uiEl.$messageBox.append(c.error);this.isErrorDisplayed=!0}}this.uiEl.$messageBox.removeClass("login-success hidden").addClass("login-error"),this.uiEl.$pwdmessageBox.removeClass("login-success hidden").addClass("login-error pwdmessage-box"),this.uiEl.$emailmessageBox.removeClass("login-success hidden").addClass("login-error emailmessage-box"),this.uiEl.$fnamemessageBox.removeClass("login-success hidden").addClass("login-error fnamemessage-box"),this.uiEl.$lnamemessageBox.removeClass("login-success hidden").addClass("login-error lnamemessage-box")},clearErrors:function(){this.uiEl.$fnameBox.removeClass("highlighted"),this.uiEl.$lnameBox.removeClass("highlighted"),this.uiEl.$passwordBox.removeClass("highlighted"),this.uiEl.$emailBox.removeClass("highlighted"),this.uiEl.$messageBox.empty().addClass("hidden"),this.uiEl.$pwdmessageBox.empty().addClass("hidden"),this.uiEl.$emailmessageBox.empty().addClass("hidden"),this.uiEl.$fnamemessageBox.empty().addClass("hidden"),this.uiEl.$lnamemessageBox.empty().addClass("hidden"),this.isErrorDisplayed=!1},showMaskToggle:function(){SH.mbox.enableloginFlow&&(clearTimeout(this.delayPasswordId),this.uiEl.$maskToggle.show(),this.uiEl.$interactiveHint.show())},hideMaskToggle:function(){SH.mbox.enableloginFlow&&(this.delayPasswordId=setTimeout(this.gototimeout.bind(this),500))},gototimeout:function(){this.uiEl.$maskToggle.hide(),this.uiEl.$interactiveHint.hide()},toggleMask:function(){if(SH.mbox.enableloginFlow){var a=this.uiEl.$passwordBox.attr("type"),b=this.uiEl.$passwordBox,c=this.uiEl.$maskToggle;"password"===a?(b.attr("type","text"),c.text(g.get("common.login.register.mask.hide"))):(b.attr("type","password"),c.text(g.get("common.login.register.mask.show"))),b.focus()}},validatePassword:function(){if(SH.mbox.enableloginFlow){var a=this.uiEl.$passwordBox.val(),b=this.uiEl.$hintOneLetter,c=this.uiEl.$hintOneNumber,d=this.uiEl.$hintMinEight;/[A-Za-z]+/g.test(a)?b.removeClass("disable"):b.addClass("disable"),/\d+/gi.test(a)?c.removeClass("disable"):c.addClass("disable"),!a||a.length<8?d.addClass("disable"):d.removeClass("disable")}}});return t}),define("common-login-views-resetpassword",["underscore","foobunny","common-login-base-view","i18n","common-utils","common-login-helper","common-login-models-session","common-login-models-forgotpassword"],function(a,b,c,d,e,f,g,h){"use strict";var i=g.getInstance(),j=c.extend({initialize:function(b){var c=this;this.model=new h,a.extend(this.model.attributes,b.attributes),this.model.on("invalid",function(a,b){c.processErrors(b)}),this.subscribeEvent("login:closeClick",function(){c.clearErrors(),c.enableSubmitButton()}),c.renderedSuccess().done(function(){c.autoFillForm([{elId:"email-id",value:i.credentials.email}])})},template:"resetpassword",heading:"common.login.common.resetpassword.heading",events:{"click #signin-user":"gotoSignin",submit:"onSubmit","click #register-user":"gotoSignup","click #got-it":"closeLogin"},closeLogin:function(a){a.preventDefault(),a.stopPropagation(),this.publishEvent("login:closeClick")},gotoSignup:function(a){a.preventDefault(),a.stopPropagation(),this.publishEvent("login:registerClick")},gotoSignin:function(a){a.preventDefault(),a.stopPropagation(),this.publishEvent("login:signinClick")},onSubmit:function(a){if(a.preventDefault(),a.stopPropagation(),this.$el.find("button[type=submit]").hasClass("disabled"))return!1;this.clearErrors();var b=e.removeURLParam(location.href,"resetPassword"),c={customer:{emailAddress:this.$el.find("#email-id").val(),platform:"WEB",returnURL:b,loginType:i.getLoginType()||"stubhub"}};this.resetPassword(c)},context:function(){return{username:this.options.username||""}},resetPassword:function(a){var b=this;b.model.clear();var c=b.model.set(a,{validate:!0}),e=this.$el.find("#resetpassword-container"),g=this.$el.find("#resetpassword-success"),h=this.$el.find("#message-box");c&&(b.disableSubmitButton(),b.updateSubmitButton(d.get("common.login.common.loading.text")+"&#8230"),b.model.save(null,{success:function(a){e.addClass("hidden"),g.removeClass("hidden"),b.enableSubmitButton(),b.publishEvent("login:resetPasswordSuccess",a)},error:function(a,c){var i,j;e.addClass("hidden"),g.removeClass("hidden");try{i=f.buildErrorLog(c),f.logAppState(i,"fetch",JSON.stringify(c),b.attributes.pageName,c.status),j=JSON.parse(c.responseText),h.append(j.customer.errors.error[0].errorMessage).removeClass("login-success hidden").addClass("login-error")}catch(k){h.append(d.get("common.login.common.error.sentanemail")).removeClass("login-error hidden").addClass("login-success")}b.enableSubmitButton(),f.track("Reset Password: Invalid Email",b.attributes.pageName,b.attributes.pageType)},type:"PUT",beforeSend:b.model.urlHeaders}),f.track("Reset Password: Submit",this.attributes.pageName,this.attributes.pageType))}});return j}),define("common-login-views-signin",["underscore","foobunny","common-login-base-view","common-login-models-signin","common-login-models-signin-social","common-login-models-connect-social","common-login-models-signin-proxy","common-login-models-checkemail","i18n","global_context","common-login-helper","common-login-models-session-validate","common-login-models-session","shcookie","storage","social-helper","common-login-views-header","loggerUtil","common-twofa"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";var t=m.getInstance(),u=c.extend({initialize:function(b){var c=this,e=Boolean(o.getItem("session_proxy_signin","session"));k.checkProxySignin()&&e===!1?(this.model=new g,this.subscribeEvent("login:signinProxyUser",function(){c.proxySignIn()})):this.model=new d,a.extend(this.model.attributes,b.attributes),this.model.on("invalid",function(a,b){c.clearErrors(),c.processErrors(b)}),this.subscribeEvent("login:closeClick",function(){c.clearErrors(),c.enableSubmitButton()}),this.subscribeEvent("login:onUserChallenged",this.callTwoFA.bind(this)),this.renderedSuccess().done(function(a){var b,d=t&&t.credentials;d&&(b=d.email?d.email:""),b&&c.autoFillForm([{elId:"email-id",value:b}])}),this.model.addErrorCodeResponses(this.errorCodes)},heading:"common.login.common.signin.heading",isErrorDisplayed:!1,omitWrapper:!0,template:"signin",events:{"click #register-social":"registerSocial","click #connect-social":"connectSocial","click #decision-social":"decisionSocial","click #reset-password":"gotoResetPassword",submit:"onSubmit","click #register-user":"gotoSignup","click #signup-user":"gotoSignup","click #reset-password-user":"gotoResetPassword","click .sh-ui-fb-button":"fbSignIn"},featureToggles:{isUAEnabled:k.isFeatureEnabled("enableUA")},focusElement:"#email-id",subModels:{socialSignInModel:new e,socialConnectLookup:new f,checkEmailModel:new h},proxySignIn:function(a){var b=this,c=b.model.parseLoginData(a),d=Boolean(o.getItem("session_proxy_signin","session"));c&&d===!1?(o.setItem("session_proxy_signin",1,"session",5e3),b.signInUser(c)):(b.clearErrors(),b.displayError(b.model.getErrorMessage({status:"default",code:"default"})))},gotoSignup:function(a){a.preventDefault(),a.stopPropagation(),k.track("Sign In: Sign Up Click",t.attributes.pageName,t.attributes.pageType);var b=this.model.get("username");this.viewContainer().showRegisterView({email:b})},gotoResetPassword:function(a){a.preventDefault(),a.stopPropagation(),k.track("Sign In: Forgot Password Click",t.attributes.pageName,t.attributes.pageType);var b=this.model.get("username");this.viewContainer().showResetPasswordView({email:b})},registerSocial:function(a){a.preventDefault(),a.stopPropagation(),this.viewContainer().showRegisterSocialView()},connectSocial:function(a){a.preventDefault(),a.stopPropagation(),this.viewContainer().showConnectSocial()},decisionSocial:function(a){a.preventDefault(),a.stopPropagation(),this.viewContainer().showDecisionSocialView()},onSubmit:function(a){var b=this;return a.preventDefault(),a.stopPropagation(),k.track("Sign In: StubHub Sign In Click",t.attributes.pageName,t.attributes.pageType),this.clearErrors(),!this.$el.find("button[type=submit]").hasClass("disabled")&&(b.disableSubmitButton(),b.updateSubmitButton(i.get("common.login.common.loading.signingin.text")),t.credentials.email=this.$el.find("#email-id").val().trim(),this.signInUser({username:t.credentials.email,password:this.$el.find("#password").val(),tmRefID:k.getTMRefId()}).then(function(){b.enableSubmitButton()}),void b.focusOn("#email-id"))},errorCodes:[{status:"default",code:"default",userMessage:"common.login.common.error.403"},{status:"user.input",code:"NO_INPUT",userMessage:"common.login.common.error.emptyemailpwd"},{status:"user.input",code:"email",userMessage:"common.login.common.error.emptyemail"},{status:"user.input",code:"format",userMessage:"common.login.common.error.emailformat"},{status:"timeout",code:"facebook.api.timeout",userMessage:"common.login.common.error.genericerror"}],signInUser:function(c){var d,e,f=this,g=f.model.set(c,{validate:!0});if($.extend(t.credentials,c),g){try{d=f.model.signIn(c).done(function(){f.updateSubmitButton(i.get("common.login.common.loading.text")+"&#8230");var b=f.model.get("login");t.setSessionData(b),t.initUserToken(t.getSessionId(),{success:function(b,c){o.setItem("session_login_init",1,"session"),t.setSessionData({login_type:"stubhub"}),a.bind(k.processLoginSuccess,f)()},error:function(a,b){o.setItem("session_login_init",0,"session"),f.displayError(f.model.getErrorMessage(b),"login-error")}}),k.track("Sign In: Stubhub Sign in Success",t.attributes.pageName,t.attributes.pageType)}).fail(function(b){var c=b&&b.responseJSON;switch(b.status){case 400:a.bind(k.errorMessageNeedHelp,f)();break;case 401:c&&(t.setSessionData(c.error),"com.stubhub.domain.security.iam.services.exception.UserInChallengeException"===c.error.code?(f.callTwoFA(c),t.setSessionData(c.error)):f.viewContainer().showUserAgreement(c.error));break;case 0:"timeout"===b.statusText&&f.displayError(i.get("common.login.common.error.genericerror"));break;default:f.displayError(f.model.getErrorMessage(b))}f.enableSubmitButton(),e=k.buildErrorLog(b),k.logAppState(e,"fetch",JSON.stringify(b),SH.OMN.pageName,b.status),k.track("Sign In: StubHub Sign In Failure",f.attributes.pageName,f.attributes.pageType)})}catch(h){var j=i.get("common.login.common.resetpassword.link"),l=' <a class="auth-link" id="reset-password-user">'+j+"</a>",m=i.get("common.login.common.error.403")+l;this.isErrorDisplayed||(f.$el.find("#error-box").append(m).removeClass("hidden"),this.isErrorDisaplayed=!0),d=b.utils.rejectedPromise(h)}f.focusOn()}else d=b.utils.rejectedPromise();return d},callTwoFA:function(a){var b=a.error,c=new s({subscriber:"login",isVisible:"true",attributes:{guid:b.user_guid,challengeId:b.challengeId,customercontact:b.customerContact,challengeTokenState:b.challengeTokenState,codeSent:b.codeSent===!0}});this.trigger("login:close"),c.render()},setFbStatus:function(a){var c=b.utils.deferred();return"connected"===a.status?(t.credentials.provider_name="FB",t.credentials.provider_key=a.authResponse.accessToken,c.resolveWith(a)):c.reject(),c},afterSocialSignInModelResponse:function(b){var c=this;c.updateSubmitButton(i.get("common.login.common.loading.signingin.text"),".sh-ui-fb-button .sh-ui-fb-text"),t.setSessionData(b.login),t.initUserToken(t.getSessionId()).done(function(){t.setSessionData({login_type:"facebook"}),a.bind(p.processLoginSuccess,c)(),k.track("Sign In: facebook Sign In Success",SH.OMN.pageName,SH.OMN.pageType)}).fail(function(b){r.error("unified.common.login.iam.tokeninit",b),a.bind(p.processLoginFailure,c)(),k.track("Sign In: TokenInit Failure",SH.OMN.pageName,SH.OMN.pageType),c.enableSubmitButton(),c.enableFBButton()})},afterSocialConnectLookup:function(b,c){var d=this;d.subModels.socialSignInModel.signIn(c).done(function(a){d.afterSocialSignInModelResponse(a)}).fail(function(b){r.error("unified.common.login.social.signin",b),a.bind(p.socialSignInFail,d)(b),d.processFailure()})},afterFBUserData:function(b){var c=this;t.credentials=b,c.subModels.socialConnectLookup.connectSocial(b).done(function(a){c.afterSocialConnectLookup(a,b)}).fail(function(b){var d=t.credentials.email;switch(b.status){case 500:case 0:a.bind(p.socialConnectLookupFail,c)(b);break;default:d?c.subModels.checkEmailModel.validateEmail(d).done(function(a){t.getLoginStatus()?p.socialConnectLinkAccounts():c.viewContainer().showConnectSocialFormView()}).fail(function(d){a.bind(p.socialConnectLookupFail,c)(b),k.track("Sign In: No Account or Email Not Found",SH.OMN.pageName,SH.OMN.pageType)}):a.bind(p.socialConnectLookupFail,c)(b)}c.enableSubmitButton(),c.enableFBButton()})},getIsSociallyConnected:function(){return this.subModels.socialConnectLookup.connectSocialStubHubUser()},afterValidFBConnection:function(){var b=this;a.bind(p.fbUserData,p)().done(function(a){b.afterFBUserData(a)}).fail(function(c){r.warn("users facebook FB.api me request failed",c),a.bind(p.facebookLoginFail,b)(),b.processFailure()})},afterFbStatus:function(b){var c=this;p.validateFacebookConnection(b).done(c.afterValidFBConnection()).fail(function(b){r.warn("users facebook information is not valid",b),a.bind(p.facebookLoginFail,c)(),c.processFailure()})},processFailure:function(){var a=this;k.track("Sign In: facebook Sign In Failure",SH.OMN.pageName,SH.OMN.pageType),this.loginContainer.length>=1&&(a.enableSubmitButton(),a.enableFBButton())},afterfbScriptLoad:function(b){var c=this;p.fbLogin().done(function(b){a.bind(c.setFbStatus,c)(b).done(c.afterFbStatus(b)).fail(function(a){r.warn("users facebook status is not connected",a),c.displayError(i.get("common.login.common.error.genericerror")),t.setSessionData({login_type:"stubhub"}),c.processFailure()})}).fail(function(b){r.warn("users facebook login failed",b),a.bind(p.facebookLoginFail,c)(),t.setSessionData({login_type:"stubhub"}),c.processFailure()})},fbSignIn:function(){this.loginContainer=document.getElementsByClassName("sh-ui-login");var b=this;this.loginContainer.length>=1&&(this.disableSubmitButton(),this.disableFBButton(),this.clearErrors()),k.track("Sign In: facebook Sign In Click",SH.OMN.pageName,SH.OMN.pageType),p.loadFacebook().done(function(a){b.afterfbScriptLoad(a)}).fail(function(c){r.warn("facebook library failed to load",c),a.bind(p.facebookLoginFail,b)(),b.processFailure()})},afterRender:function(){var a=this;this.options.data&&this.processErrors(this.options.data),this.renderedSuccess().done(function(){p.loadFacebook(),"facebook"===t.getLoginType()&&t.getLoginStatus()!==!0&&k.isFeatureEnabled("fb.auto.signin")&&a.fbSignIn()})}});return u}),define("common-login-views-user-agreement-customer-service",["foobunny"],function(a){"use strict";var b=a.BaseView.extend({initialize:function(){},omitWrapper:!0,template:"user-agreement-customer-service",events:{"click #doAgree":"signIn"},signIn:function(){location.reload()}});return b}),define("common-login-views-user-agreement",["foobunny","common-login-base-view","common-login-views-signin","common-login-models-session","common-login-models-user-agreement","common-login-helper","sh_global_registry"],function(a,b,c,d,e,f,g){"use strict";var h=d.getInstance(),i=b.extend({featureToggles:{isUAEnabled:f.isFeatureEnabled("enableUA")},initialize:function(){this.model=new e},omitWrapper:!0,template:"user-agreement",events:{"click #doAgree":"processAgreement"},urlHeaders:function(a){f.setCommonHeaders(a),a.setRequestHeader("accept","application/json"),a.setRequestHeader("Accept-Language",g.getLocale()),a.setRequestHeader("Content-Type","application/json; charset=UTF-8")},processAgreement:function(){var a=this;a.disableSubmitButton(),a.agreeUA().done(function(){a.publishEvent("login:close"),h.autoSignIn(h.credentials)}).fail(function(b){a.viewContainer().currentView.processErrors({errors:[a.model.getErrorMessage(b)]})}).always(function(){a.enableSubmitButton()})},agreeUA:function(){var b,c=this,d=f.getUserDestination(),e={customer:{acceptedAgreement:{destination:d}}},g=c.model.set(e,{validate:!0});return g?(this.model.url=this.model.url.replace("{guid}",this.options.user_guid),b=c.model.save(null,{emulateJSON:!0,type:"PUT",beforeSend:c.urlHeaders,dataType:"text",data:JSON.stringify(e),cache:!1,crossDomain:!0,dispose:!1})):b=a.utils.rejectedPromise(),b}});return i}),define("sh_global_registry",["cache"],function(a){"use strict";function b(a){return/^(true|y|t|on|yes)$/i.test(a)}function c(a){if(!a||!_.isString(a))return 0;try{return h(a)?parseFloat(a):0}catch(b){return NaN}}function d(a){var b=l.get("features")||{};return b[j]=a,l.set("features",b),a}function e(a,b,c){var d="Features by Event Venue Country Request Error: "+c;return new Error(d)}function f(a){var b=a;return m.set("allFeatures",b),a}function g(a,b,c){var d="Features by All Event Venue Countries Request Error: "+c;return new Error(d)}function h(a){return!isNaN(parseFloat(a))&&isFinite(a)}var i=SH.gsConfig,j="",k=6048e5,l=new a({expires:k,type:"session",namespace:"featuresByEventVenueCountry"}),m=new a({expires:k,type:"session",namespace:"featuresByAllEventVenueCountries"});return{getSupportedCountries:function(){return i.supportedCountries},getCountryCode:function(){return i.countries[0].countryCode.toLowerCase()},getCountryId:function(){return i.countries[0].countryId},getCountryCallingCode:function(){return i.countries[0].phoneCallingCode},getCurrencies:function(){return i.currencies},getDefaultCurrency:function(){return i.currencies.defaultCurrency},getCurrencyCode:function(){return i.currencies.defaultCurrency.currencyCode},getCurrencyId:function(){return i.currencies.defaultCurrency.currencyId},getSupportedCurrencies:function(){return i.currencies.supportedCurrencies},getDomain:function(){return i.domain},getDomainId:function(){return i.domain.domainId},getDomainName:function(a){var b=i.domain.domainName,c=location.hostname.replace(b,"");return a?c+b:b},getTld:function(){return i.defaultWebTLD},getMetas:function(){return i.metas},getFeatures:function(){return i.features},getFeatureByName:function(a){return _.findWhere(i.features,{featureName:a})||{}},getFeatureValue:function(a,d){var e=this.getFeatureByName(a)||{},f=e.featureValue,g="";switch(_.isString(d)||(d="string"),d=d.toLowerCase()){case"string":g=f;break;case"boolean":g=b(f);break;case"number":g=c(f);break;default:g=f}return g},getLocales:function(){return i.locales},getDefaultLocale:function(){return i.locales.defaultLocale.toLowerCase()},getLocale:function(){return SH.locale.toLowerCase()},getCanonicalLocale:function(){var a=this.getLocale().split("-");return a[1]=a[1].toUpperCase(),a.join("-")},getSupportedLocales:function(){return i.locales.supportedLocales},getLanguage:function(){return SH.locale.split("-")[0].toLowerCase()},getSEOIndexedLocales:function(){return Array.isArray(i.seoIndexedLocales)?i.seoIndexedLocales:[]},getBoBId:function(){var a,b=this.getSiteId();switch(b){case 1:case 5:a=1;break;case 2:a=2;break;case 3:case 4:a=3;break;default:a=1}return a},getStoreId:function(){return i.storeId||i.siteId},getSiteId:function(){return i.siteId},getSiteDescription:function(){return i.siteDescription},getStoreProperties:function(){return i.storeProperties},getStorePropertyByName:function(a){return _.findWhere(i.storeProperties,{propertyName:a})||{}},getStoreFeatures:function(){return i.storeFeatures},getStoreFeatureByName:function(a){return _.findWhere(i.storeFeatures,{featureName:a})||{}},getTicketBisSourceId:function(){return"4001"},getFeaturesByEventVenueCountry:function(a){var b,c="/shape/i18n/globalregistry/v2/countries/"+a+"/features",f=l.get("features")||{};return j=a,f[a]?(b=$.Deferred(),b.resolve(f[a])):b=$.get(c).then(d,e),b},getFeaturesByAllEventVenueCountries:function(){var a,b="/shape/i18n/globalregistry/v2/countries/",c=m.get("allFeatures");return c?(a=$.Deferred(),a.resolve(c)):a=$.get(b).then(f,g),a}}}),define("domain-mapping",[],function(){"use strict";return{EUR:{site:"de",domain:_.template("<%=subDomain%>.<%=host%>.de"),isUnified:!0},GBP:{site:"co.uk",domain:_.template("<%=subDomain%>.<%=host%>.co.uk"),isUnified:!0},USD:{site:"com",domain:_.template("<%=subDomain%>.<%=host%>.com"),isUnified:!0},CAD:{site:"ca",domain:_.template("<%=subDomain%>.<%=host%>.ca"),isUnified:!0}}}),define("locales",[],function(){"use strict";return{"en-GB":"English (United Kingdom)","en-US":"English (United States)","en-CA":"English (Canada)","fr-FR":"French","de-DE":"German (Germany)","es-MX":"Spanish (Mexico)"}}),define("common-rules-model",["foobunny"],function(a){"use strict";var b=a.BaseModel.extend({className:"RulesModel",url:"/shape/i18n/redirection/v1/rules",urlHeaders:function(a){a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","application/json")},cache:{expires:6048e5,type:"local",namespace:"RulesModel"},parse:function(a){return{domains:a.noredirect.rules}},getNoRedirectIds:function(a,b){var c=this.get("noredirect").rules,d=[];return c.some(function(c){var e=c.tldList;if(e.indexOf(a)>-1&&e.indexOf(b)>-1)return d=c.eventIdList,!1}),d}});return b}),define("urlUtil",["foobunny","underscore","common-rules-model","common-url-modal-view","sh_global_registry","domain-mapping","locales","urlutil-helper"],function(a,b,c,d,e,f,g){"use strict";function h(a){return/^(http[s]?):\/\//.test(a)||a.split(".").length>1}var i=a.mediator,j={},k={domain:b.template("<%=subDomain%>.<%=server%>.<%=tld%>"),event:{full:b.template("//<%=domain%>/<%=eventUrl%>"),"short":b.template("//<%=domain%>/event/<%=id%>/?weburi=false")},venue:{full:b.template("//<%=domain%>/<%=venue.webURI%>"),"short":b.template("//<%=domain%>/venue/<%=venue.id%>/?weburi=false")},performers:b.template("//<%=domain%>/<%=performersUrl%>")},l=["stub[a-z]+","slcq\\d+","slce\\d+","stubprod","localhost","ticketbis"],m=["event","performer","venue","grouping","category","geography"];return j.Rules=new c,j.Rules.fetch(),j.supportedLocales=b.reduceRight(g,function(a,b,c){return a.concat("/"+c)},[]),j.supportedEntities=b.reduceRight(m,function(a,b,c){return a.concat("/"+b+"/")},[]),j.redirect=function(a,b,c){c?window.open(a,"_blank"):b?setTimeout(function(){location.href=a},b):location.href=a},j.resetUrl=function(a){var b=j.getEventUrl(a);a.set("relativeEventUrl",b)},j.findLocale=function(a){var b=new RegExp(j.supportedLocales.join("|"));return a.match(b)},j.findSupportedLanguageCode=function(a){var c,d,f,g=e.getSupportedLocales(),h=g.length;for(g=b.isEmpty(g)?["en-US"]:g.slice(0),c=0;c<h;c++)d=g[c],"string"==typeof d?g[c]=d.replace(/-[a-zA-Z]{2}$/,""):g[c]=d.locale.replace(/-[a-zA-Z]{2}$/,"");return f=new RegExp("/("+g.join("|")+")\\b"),a.match(f)},j.findEntity=function(a){var b=new RegExp(j.supportedEntities.join("|"));return a.match(b)},j.parseUrl=function(a){var c=new RegExp(l.join("|")),d=h(a);if(0===a.length||d&&null===a.match(c))return a;var e,f,g,i,k,m={},n=a.indexOf("://"),o=n==-1?a.substr(0,a.length):a.substr(n+3,a.length),p=o.indexOf("?"),q=o.indexOf("/");if(m.href=a,p>-1){var r=o.substring(p+1,a.length).split("&");m.param=b.reduceRight(r,function(a,b,c){var d=b.split("="),e={};return e[d[0]]=d[1],a.concat(e)},[])}return d&&(m.protocol=a.substr(0,n),q=q>-1?q:o.length,m.domain=o.substr(0,q),m.host=o.match(c)[0],m.subdomain=o.substr(0,o.indexOf(m.host)-1),m.tld=m.domain.substr(o.indexOf(m.host)+m.host.length+1,m.domain.length-1)),m.path=o.substr(q,(p>-1?p:o.length)-q),e=j.findLocale(m.path),g=j.findSupportedLanguageCode(m.path),i=j.findEntity(m.path),e&&e[0]?(f=m.path.indexOf(e[0]),m.locale=e[0].replace(/\//g,""),f>-1&&0!==f&&(m.seo=m.path.substring(1,f))):g&&(m.languageCode=g[1],f=m.path.indexOf(m.languageCode),f>-1&&0!==f&&(m.seo=m.path.substring(1,f)),m.path=m.path.replace("/"+m.languageCode,"")),i&&(k=m.path.indexOf(i[0]),m.entity=i[0].replace(/\//g,""),m.entityId=m.path.substring(k+m.entity.length+2,m.path.length),!e&&k>-1&&0!==k&&(m.seo=m.path.substring(1,k))),m},j.formatUrl=function(a,c){if(0===a.length)return a;var d="",f=j.parseUrl(a),g=j.url.locale,h=j.url.languageCode,i=e.getDefaultLocale().replace(/[-_][a-zA-Z]{2}$/,"");return c=c||f.locale||g||h,c===i&&(c=""),f.domain&&f.domain.match(/ticketbis/)?d=f.protocol+"://"+f.domain+f.path:(f.protocol&&(d=f.protocol+"://"),f.domain&&(d+=f.domain),f.seo&&(d+="/"+f.seo),c&&(d+="/"+c),f.entity&&(d+="/"+f.entity+"/"+f.entityId),f.entity||(d+=f.path),f.param&&(d+="?"+b.reduce(f.param,function(a,c,d){return a+=b.keys(c)[0]+"="+b.values(c)[0]+(d<f.param.length-1?"&":"")},""))),d},j.getDomain=function(a){var b,c,d=j.Rules.get("domains"),g=j.isSameSite(a),h=a.attributes&&a.attributes.ticketInfo?a.attributes.ticketInfo:a.ticketInfo,i=a.currency||a.currencyCode||h&&h.currencyCode||a.get("currencyCode"),k=j.url.domain,l=a.attributes?a.attributes.sourceId:a.sourceId,m=a.attributes?a.attributes.externalWebURI:a.externalWebURI;return l&&l===e.getTicketBisSourceId()&&m?(b=e.getStorePropertyByName("tb.eventpage.url.domain."+e.getTld()),c=b.propertyValue,k=c.substring(0,c.length-1)):""!==j.url.domain&&d&&d.length&&(k=g?j.url.domain:f[i].domain({subDomain:j.url.subdomain,host:j.url.host})),k},j.isSameSite=function(a){if(!a)return!0;var c=!0,d=a.attributes&&a.attributes.ticketInfo?a.attributes.ticketInfo:a.ticketInfo,g=a.attributes?a.attributes.sourceId:a.sourceId,h=j.Rules.get("domains"),i=a.currency||a.currencyCode||d&&d.currencyCode||a.get("currencyCode");return j.url&&(g&&g===e.getTicketBisSourceId()?c=!1:h&&h.length&&(j.url.tld!==f[i].site&&(c=!1),b.each(h,function(d,e){b.contains(d.tldList,j.url.tld)&&b.contains(d.tldList,f[i].site)&&(b.contains(d.eventIdList,"*")||b.contains(d.eventIdList,String(a.id)))&&(c=!0)}))),c},j.getEventUrl=function(a){var b,c,d=a.attributes?a.attributes.externalWebURI:a.externalWebURI,f=a.attributes?a.attributes.webURI:a.webURI,g=a.attributes?a.attributes.eventUrl:a.eventUrl,h=j.getDomain(a),i=a.attributes?a.attributes.sourceId:a.sourceId;return i&&i===e.getTicketBisSourceId()&&d?(b=d?d:"/"+f,c=h+b):(b=f?f:g,c=k.event.full({domain:h,eventUrl:b})),c},j.redirectToEvent=function(a,b){b=b||{};var c,e,f,g,h=$.Deferred(),i=h.promise(),k=a.href||j.getEventUrl(a),l=!1,m=a.attributes&&a.attributes.ticketInfo?a.attributes.ticketInfo:a.ticketInfo,n=m.currencyCode,o=parseInt(b.delay);if(b.appendParamToURL&&k){
f=b.appendParamToURL,e=k.indexOf("?")===-1?"?":"&";for(g in f)f.hasOwnProperty(g)&&(k+=e+g+"="+f[g],e="&")}return l=j.isSameSite(a),l?h.resolve(l,k):(c=new d({redirectUrl:k,currency:n}),c.render(),c.confirmPromise.done(function(){h.resolve(l,k)}).fail(function(){h.reject(l,k)})),i.then(function(c,d){var e,f=b.beforeRedirect,g=b.newTab;"function"==typeof f&&(e=f(a,c,d))!==!1&&e&&"function"==typeof e.done?e.done(function(){j.redirect(d,o)}):j.redirect(d,o,g)}),i},j.url=j.parseUrl(window.location.href),i.subscribeEvent("event:change",j.resetUrl),{url:j.url,redirectToEvent:j.redirectToEvent,redirect:j.redirect,isSameSite:j.isSameSite,getDomain:j.getDomain,getEventUrl:j.getEventUrl,resetUrl:j.resetUrl,parseUrl:j.parseUrl,formatUrl:j.formatUrl,findLocale:j.findLocale,findEntity:j.findEntity}}),define("urlutil-helper",[],function(){var a;dust.helpers.toUrl=function(b,c,d,e){a||(a=require("urlUtil"));var f=e.locale,g=f?a.formatUrl(e.href,f):a.formatUrl(e.href);return b.write(g)}}),define("common-url-modal-view",["foobunny"],function(a){"use strict";var b=a.BaseView.extend({el:"#common-url-popup-container",template:"url-modal",events:{"click .a-click-close":"closeModal","click .a-click-continue":"redirectToEvent"},initialize:function(a){this.options=a;var b=$("#common-url-popup-container");b.length||($("body").append('<div id="common-url-popup-container"></div>'),b=$("#common-url-popup-container")),this.confirmDeferred=$.Deferred(),this.confirmPromise=this.confirmDeferred.promise()},context:function(){var a=this.options.currency.toUpperCase();return{redirectUrl:this.options.redirectUrl,currency:a}},closeModal:function(){this.confirmDeferred.reject(),this.dispose()},redirectToEvent:function(a){a.preventDefault(),a.stopPropagation(),this.confirmDeferred.resolve()}});return b}),define("common-currency-format",["common-number-format","sh_global_registry"],function(a,b){"use strict";function c(a,c){this.options=a||{},this.options.style="currency",this.locale=c||b.getLocale(),this.locale=this.locale.replace("_","-"),this.formatter=new Intl.NumberFormat(this.locale,a)}var d={};return c.getCurrencySymbol=function(a){if(d[a])return d[a];var b=0,c=b.toLocaleString(this.locale,{style:"currency",currency:a}),e=c.replace(/[\d|\.|,]/g,"").trim();return e=""!==e?e:a,d[a]=e,e},c.prototype={format:function(a){return this.formatter.format(a)},getCurrencyObject:function(a){var b,d,e=this.formatter.format(a),f=c.getCurrencySymbol(this.options.currency),g=/\d(.*\d)?/,h=/((?![0-9 ,'`\.].*).)+/,i=new RegExp([h.source,g.source].join("|"),"g"),j={},k=[],l="formattedCurrencySign",m="formattedValue",n=e.replace(/[^0-9 ,\.]/g,""),o=e.match(i)||[];for(b=0;b<o.length;b++)d=o[b],/\s/.test(d.charAt(0))&&k.push("delimiter"),d=d.trim(),g.test(d)?(j[m]=d,k.push(m)):h.test(d)&&(j[l]=d,k.push(l));return j.sequence=k,{symbol:f,value:n,currency:this.options.currency,formatted:j}}},c}),define("common-datetime-format",["sh_global_registry","i18n-format-config"],function(a,b){"use strict";function c(c,e){var f=c.style,h={timeZone:c.timeZone};if(!k(f))throw new Error("Unsupported style provided for formatting:"+f);e=n(e||a.getLocale()),e=e.replace("_","-"),this.useIntlAPI?(h=f?_.extend(h,g[f],{}):_.extend(h,l(c),{}),this.formatter=new Intl.DateTimeFormat(e,h)):(h.style=f,h.pattern=b.dateTimeStyle[f],this.formatter=d().locale(e).tz(h.timeZone)),this.finalStyleConfig=h,this.locale=e}var d,e=["weekday","era","year","month","day","hour","minute","second","timeZoneName","hour12"],f={numeric:"numeric",twoDigit:"2-digit",narrow:"narrow","long":"long","short":"short"},g={input:{month:f.twoDigit,day:f.twoDigit,year:f.twoDigit},"short":{month:f.twoDigit,day:f.twoDigit,year:f.numeric},"short-date":{month:f["short"],day:f.twoDigit,year:f.numeric},medium:{weekday:f["short"],month:f["short"],day:f.numeric},medium_expanded:{weekday:f["short"],month:f["short"],day:f.numeric,year:f.numeric},medium_expanded_time:{weekday:f["short"],month:f["short"],day:f.numeric,year:f.numeric,hour:f.numeric,minute:f.numeric},full:{weekday:f["long"],month:f.numeric,day:f.numeric,year:f.numeric},full_time:{weekday:f["long"],month:f.numeric,day:f.numeric,year:f.numeric,hour:f.numeric,minute:f.numeric},expanded:{weekday:f["long"],month:f["long"],day:f.numeric,year:f.numeric},month_day:{month:f.twoDigit,day:f.twoDigit},month_year:{month:f["short"],year:f.numeric},datestamp_month_day:{month:f["short"],day:f.twoDigit},weekday_short:{weekday:f["short"]},year:{year:f.numeric},time:{hour:f.numeric,minute:f.numeric}},h=new RegExp(/([+-])(\d{2})(\d{2})$/),i={"-12:00":"GMT","-11:00":"Pacific/Midway","-10:00":"Pacific/Honolulu","-09:30":"Pacific/Marquesas","-09:00":"Pacific/Gambier","-08:00":"Pacific/Pitcairn","-07:00":"America/Phoenix","-06:00":"America/Belize","-05:00":"America/Cancun","-04:00":"America/Port_of_Spain","-03:30":"Canada/Newfoundland","-03:00":"America/Buenos_Aires","-02:00":"Atlantic/South_Georgia","-01:00":"Atlantic/Cape_Verde","+00:00":"GMT","+01:00":"Africa/Algiers","+02:00":"Africa/Cairo","+03:00":"Africa/Nairobi","+03:30":"Asia/Tehran","+04:00":"Asia/Dubai","+04:30":"Asia/Kabul","+05:00":"Asia/Karachi","+05:30":"Asia/Kolkata","+05:45":"Asia/Kathmandu","+06:00":"Asia/Dhaka","+06:30":"Asia/Rangoon","+07:00":"Asia/Bangkok","+08:00":"Asia/Hong_Kong","+08:30":"Asia/Pyongyang","+08:45":"Australia/Eucla","+09:00":"Asia/Tokyo","+09:30":"Australia/Darwin","+10:00":"Australia/Brisbane","+10:30":"Australia/Lord_Howe","+11:00":"Pacific/Norfolk","+12:00":"Pacific/Wake","+12:45":"Pacific/Chatham","+13:00":"Pacific/Enderbury","+14:00":"Pacific/Kiritimati"},j=function(){var a=new Date,b="America/Los_Angeles";try{return Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",timeZone:b}).format(a),!0}catch(c){return require(["moment-timezone"],function(a){d=a}),!1}}(),k=function(a){return!!g[a]},l=function(a){return e.reduce(function(b,c){var d=a[c];return d&&(b=b||{},b[c]=d),b},void 0)},m={"pt-pt":"pt-br"},n=function(a){return m[a]||a};return Object.freeze(i),c.prototype={format:function(a){return this.useIntlAPI?this.formatter.format(a):d(a).locale(this.locale).tz(this.finalStyleConfig.timeZone).format(this.finalStyleConfig.pattern)},useIntlAPI:j},c.getOffsetZoneName=function(a){var b;return"Z"===a.substr(a.length-1)?"GMT":(b=a.slice(-6),i[b]||"GMT")},c.normalizeISOFormat=function(a){return a.replace(h,"$1$2:$3")},c}),define("common-currency-format-dust-helper",["common-currency-format"],function(a){"use strict";function b(b,c,d,e){var f,g=e.val,h=e.currency,i=e.locale;return g||dust.log("ERROR",'Missing required parameter, "val" in currency_format helper'),h||dust.log("ERROR",'Missing required parameter, "currency" in currency_format helper'),f=new a(e,i),b.write(f.format(g))}function c(b,c,d,e){var f,g,h,i,j,k,l,m,n=e.val,o=e.currency;for(n||dust.log("ERROR",'Missing required parameter, "val" in currency_format helper'),o||dust.log("ERROR",'Missing required parameter, "currency" in currency_format helper'),f=new a(e),g=(f.getCurrencyObject(n)||{}).formatted||{},j=(g.sequence||[]).slice(0),j.length||dust.log("ERROR","Something wrong with currency_format.getCurrencyObject"),i=j.length||0,h=0;h<i;h++)k={},m=j[h],k[m]=g[m],l=c.push(k),d[m]?b.render(d[m],l):"delimiter"===m&&b.write("&nbsp;");return b}dust.helpers.currency_format=b,dust.helpers.currency_format_styler=c}),define("common-datetime-format-dust-helper",["common-datetime-format"],function(a){"use strict";dust.helpers.datetime_format=function(b,c,d,e){var f,g=_.extend({},e,{}),h=a.normalizeISOFormat(e.value),i=new Date(h),j=e.locale,k=b;if(h)if("Invalid Date"===i.toString())dust.log("ERROR","invalid parameter value: "+h+" in datetime_format helper");else try{g.timeZone=a.getOffsetZoneName(h),f=new a(g,j),k=b.write(f.format(i))}catch(l){dust.log("ERROR","datetime_format\n"+l)}else dust.log("ERROR",'missing parameter "value" in datetime_format helper');return k}}),define("common-number-format-dust-helper",["common-number-format"],function(a){"use strict";function b(b,c,d,e){var f,g=e.val,h=e.locale;return g||dust.log("ERROR",'Missing required parameter, "val" in number_format helper'),f=new a(e,h),b.write(f.format(g))}dust.helpers.number_format=b}),define("i18n",["jquery","underscore","sh_global_registry","common-number-format","common-currency-format","common-datetime-format","common-currency-format-dust-helper","common-number-format-dust-helper","common-datetime-format-dust-helper"],function(a,b,c,d,e,f){if(!window.Intl){var g=define.amd;define.amd=null,a.ajax({url:"https://cdn.polyfill.io/v2/polyfill.js?features=Intl.~locale."+c.getCanonicalLocale(),cache:!0,complete:function(){define.amd=g}})}SH.i18n||(SH.i18n={}),SH.i18n.propsJson||(SH.i18n.propsJson={});var h={propsJson:SH.i18n.propsJson,getPropsJson:function(){return this.propsJson},setPropsJson:function(a){this.propsJson=a},getEnv:function(){return SH.env?""+SH.env:this.defaultEnv},defaultEnv:"dev",envConfig:{dev:{env:"DEV"},qa:{env:"QA"},prod:{env:"PROD"}},merge:function(b){var c=this.getPropsJson();return c=a.extend({},c,b),this.setPropsJson(c),this.getPropsJson()},get:function(a,c){var d=this.getPropsJson(),e=d[a];return e?(c&&(e=b.template(e.replace(/{/g,"<%= ").replace(/}/g," %>")),e=e(c)),e):this.handleMissingKeyMsg(a)},getStoreSpecific:function(a,b){var d=c.getStoreId(),e=this.getPropsJson(),f=a+"."+d;return e[f]||(f=a),this.get(f,b)},getCurrencySpecific:function(a,b,c){var d=this.getPropsJson(),e=a;return b&&3===b.length&&b.match(/[A-Z]{3}/)&&(e=a+"."+b,d[e]||(e=a)),this.get(e,c)},handleMissingKeyMsg:function(a){var c="[[missing key: "+a+" ]]",d=this.getEnv().toLowerCase();return b.has(this.envConfig,d)?d:d=this.defaultEnv,["!!! ERROR - {{missingKey}}"," in ",this.env," ENV"].join("").replace("{{missingKey}}",c)},getCanonicalLocales:function(a){return Intl.getCanonicalLocales(a)},NumberFormat:d,CurrencyFormat:e,DateTimeFormat:f};return h}),define("common-number-format",["sh_global_registry"],function(a){"use strict";function b(b,c){this.locale=c||a.getLocale(),this.locale=this.locale.replace("_","-"),this.formatter=new Intl.NumberFormat(this.locale,b)}return b.prototype={format:function(a){return this.formatter.format(a)},parse:function(a){if("number"==typeof a)return a;if(a.constructor!==String)return NaN;var b=new Intl.NumberFormat(this.locale).format(1000.5).replace(/[0-9]/g,""),c=""===b[0].trim()?"\\s":b[0],d=b[1],e=a.split(d),f=new RegExp("[^0-9|\\-|"+c+"|"+("."===d?"\\"+d:d)+"]","g");return f.test(a)||e.length>2?NaN:(e[0]=e[0].replace(/[^0-9|-]/g,""),1===e.length?parseInt(e[0]):parseFloat(e[0]+"."+e[1]))}},b}),define("common-global",[],function(){}),define("submarine",["foobunny","sh_global_registry","url-parser","corsRequestHandler"],function(a,b,c,d){"use strict";function e(){return w.vars}function f(a,b){typeof a===t?w.vars[a]=b:"object"==typeof a&&_.extend(w.vars,a)}function g(a){return w.vars.hasOwnProperty(a)}function h(a){d.makeCorsRequest(a,w.beacon_url,w.beacon_domain_url,w.iframe_url)}function i(a){clearTimeout(a)}function j(a,b){var c=window,d=[],e="0";u&&!w.isBeaconFired&&c.performance.getEntriesByName&&(d=c.performance.getEntriesByName(b),e=d&&d[0]&&d[0].startTime.toFixed(1),!g(a)&&e&&f(a,e))}function k(a){var b="0.0";u&&!w.isBeaconFired&&a&&(window.performance.now?(b=window.performance.now().toFixed(1),f(a,b)):f(a,"undefined"))}function l(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o;a=window.performance,a&&a.timing&&(b=a.timing,c=b.navigationStart,d=b.fetchStart,e=b.domainLookupStart,g=b.domainLookupEnd,h=b.connectStart,i=b.connectEnd,j=b.requestStart,k=b.responseStart,l=b.responseEnd,m=b.domComplete,n=b.loadEventEnd,o={t_ready:d-c,t_dns:g-e,t_conn:i-h,t_fistbyte:k-j,t_resp:l-k,t_processing:m-l,t_pageload:n-m},f(o))}function m(){var a=window.location.href;a&&a.length<2e3?f("u",a):f("u","invalidURL")}function n(a){var b=w.beacon_delay_ms;setTimeout(h.bind(null,a),b)}function o(){var a=e();w.isBeaconFired||(n(a),w.isBeaconFired=!0)}function p(){f("user_timing",window.performance.now().toFixed(1)),f("timeout","true"),m(),o()}function q(){var a=w.beaconTimeout_ms;w.timeoutID=setTimeout(p.bind(this),a)}function r(){try{i(w.timeoutID),k("user_timing"),l(),m(),o()}catch(a){}}function s(){var b={};try{_.extend(b,a.mediator),u&&(b.once("app:render-ready",r),q())}catch(c){}}var t="string",u=!1,v=c.getDomainMap(),w={beacon_url:"/infrastructure/rum/v1/",beacon_domain_url:"https://track."+v.domainName+"."+v.domainSuffix+"/infrastructure/rum/v1/",iframe_url:"https://track."+v.domainName+"."+v.domainSuffix+"/custom/corsLogger.html",siteId:b.getSiteId(),beaconTimeout_ms:15e3,url_pattern:"",beacon_delay_ms:3e3,pass_ratio:0,vars:{},isBeaconFired:!1,timeoutID:0};return u=function(){var a=window,c=a.location.pathname,d=[],e=!1;try{w.pass_ratio=b.getFeatureValue("gs.features."+w.siteId+".common.submarine.passRatio","number"),w.pass_ratio&&Math.random()<w.pass_ratio&&c&&a.performance&&a.performance.now&&a.performance.timing&&(w.url_pattern=b.getFeatureValue("gs.features."+w.siteId+".common.submarine.urlPattern","string"),"ALL"===w.url_pattern.toUpperCase()?e=!0:w.url_pattern&&(d=w.url_pattern.split(","),e=d.some(function(a){var b=new RegExp(a.trim());return a&&b.test&&b.test(c)})))}catch(f){e=!1}return e}(),s(),{addStopWatch:k,addCustomMetrics:j}}),define("common-banner",["component","common-banner-view","i18n","common-banner-i18n-props"],function(a,b,c,d){"use strict";var e=a.extend({name:"Banner",init:function(){var a=this;c.merge(d);var e=c.get("common.banner.cookieBanner.contentInfo");a.view=new b({el:a.options.element?a.options.element:"#banner-container",content:a.options.content?optoins.content:e})},render:function(){this.view.render()},dispose:function(){this.view.dispose()}});return e}),define("common-banner-view",["foobunny","sh_global_registry","shcookie"],function(a,b,c){"use strict";var d=a.BaseView.extend({initialize:function(a){this.content=this.options.content,this.element=this.options.element,this.events={"click .close-cookie":"closeCookieBanner","click .close-disclaimer":"closeDisclaimerBanner"}},template:"common_banner",el:"#sh-banner-wrapper",uiEl:{$bannerContent:".sh-ui-banner .common-banner-text"},closeCookieBanner:function(){this.setCookie("cookieBanner"),this.render()},closeDisclaimerBanner:function(){this.setCookie("disclaimerBanner"),this.render()},setCookie:function(a){var b={};b.expHours=720,c.setCookie(a,!0,b)},hasNoCookie:function(a){var b=c.getCookie(a);return null===b||""===b||"undefined"===b},context:function(){var a=b.getSiteId(),c="gs.features."+a+".common.Banner.showCookieBanner",d="gs.features."+a+".common.Banner.showDisclaimerBanner",e=b.getFeatureValue(c,"boolean")&&this.hasNoCookie("cookieBanner"),f=!e&&b.getFeatureValue(d,"boolean")&&this.hasNoCookie("disclaimerBanner");return{showCookieBanner:e,showDisclaimerBanner:f}},afterRender:function(){this.uiEl.$bannerContent.html(this.content)}});return d}),define("date-stamp-dust-helper",["i18n"],function(a){dust.helpers.dateStampYear=function(b,c,d,e){function f(a){b.write(" "+a)}c.get&&c.get("dateLocal")||dust.log("WARN",'missing parameter "display" in displayYear helper');var g=a.DateTimeFormat.normalizeISOFormat(c.get("dateLocal")),h=new Date(g).getUTCFullYear(),i=(new Date).getUTCFullYear(),j=e.display;switch(j){case"future":h>i&&f(h);break;case"past":h<i&&f(h);break;case"current":h==i&&f(h);break;case"current,future":h>=i&&f(h);break;case"past,current":h<=i&&f(h)}return b}}),x=["green","standard","blue","white"];var data=[{date:{day:"FRI",month:"DEC 1"},dateType:"date-stamp-standard date-container"},{date:{day:"FRI",month:"DEC 20"},dateType:"date-stamp-standard date-container"},{date:{day:"FRI+",month:"DEC 1 - JAN 1"},dateType:"date-stamp-standard date-container"},{date:{day:"FRI+",month:"DEC 1 - JAN 1 2016"},dateType:"date-stamp-standard date-container"},{date:{day:"FRI+",month:"DEC 20 - JAN 20"},dateType:"date-stamp-standard date-container"},{date:{day:"FRI+",month:"DEC 20 - JAN 20 2016"},dateType:"date-stamp-standard date-container"},{date:{day:"TBD",month:""},dateType:"date-stamp-standard date-container"},{date:{day:"TBD",month:"2016"},dateType:"date-stamp-standard date-container"},{date:{day:"TBD",month:"DEC 2016"},dateType:"date-stamp-standard date-container"},{date:{day:"FRI",month:"DEC 1"},dateType:"date-stamp-white date-container"},{date:{day:"FRI",month:"DEC 20"},dateType:"date-stamp-white date-container"},{date:{day:"FRI+",month:"DEC 1 - JAN 1"},dateType:"date-stamp-white date-container"},{date:{day:"FRI+",month:"DEC 1 - JAN 1 2016"},dateType:"date-stamp-white date-container"},{date:{day:"FRI+",month:"DEC 20 - JAN 20"},dateType:"date-stamp-white date-container"},{date:{day:"FRI+",month:"DEC 20 - JAN 20 2016"},dateType:"date-stamp-white date-container"},{date:{day:"TBD",month:""},dateType:"date-stamp-white date-container"},{date:{day:"TBD",month:"2016"},dateType:"date-stamp-white date-container"},{date:{day:"TBD",month:"DEC 2016"},dateType:"date-stamp-white date-container"}],g=[],i=0;for(value in data);define("common-language-selector",["component","underscore","sh_global_registry","selection-dialog-view","urlUtil"],function(a,b,c,d){"use strict";var e={shouldDisplayLanaguageSelector:function(){var a=c.getFeatureValue("gs.features."+c.getSiteId()+".common.enableLanguageSelector","boolean");return a&&b.uniq(c.getSupportedLocales().map(function(a){return"string"==typeof a?a.replace(/[-_][a-zA-Z]{2}$/,""):a.locale.replace(/[-_][a-zA-Z]{2}$/,"")})).length>1},getGlobalHeaderSetting:function(){var a,d=c.getSupportedLocales(),e=c.getLanguage(),f=b.find(d,function(a){return a.locale.toLowerCase().substr(0,2)===e});return a=f.displayLanguage||f.languageDisplayName,{id:"language-selector-btn",keyId:"language-selector",label:a,title:"Language Selector",languageSelector:!0}}},f=a.extend({name:"LanguageSelector",init:function(){e.shouldDisplayLanaguageSelector()&&(this.view=new d)},render:function(){if(this.view)return this.view.render()},show:function(){this.view&&this.view.show()},dispose:function(){this.view&&this.view.dispose()}});return e.component=f,e}),define("selection-dialog-model",["foobunny","sh_global_registry"],function(a,b){"use strict";return a.BaseModel.extend({initialize:function(){var a=window.location;this.set({listOfLanguages:this.getSupportedLanguages(),currentLocation:a.href,currentLanguageCode:b.getLanguage()})},getSupportedLanguages:function(){var a,c=b.getSupportedLocales(),d={},e=b.getLanguage();return c.reduce(function(b,c,f){return a={},a.languageCode=c.locale.replace(/[-_][a-zA-Z]{2}$/,""),d.hasOwnProperty(a.languageCode)||(a.isCurrentLanguage=e===a.languageCode,a.languageDisplayName=c.displayLanguage||c.languageDisplayName,a.locale=c.locale,d[a.languageCode]=f,Object.freeze(a),b.push(a)),b},[])}})}),define("selection-dialog-view",["foobunny","selection-dialog-model","application_helper","shcookie"],function(a,b,c,d){"use strict";var e="SH_USER_INFO";return a.BaseView.extend({el:"#language-selector-container",template:"selection-dialog",events:{"click .close":"closeDialog","click .language-link":"languageSelected"},initialize:function(){this.model=new b,document.body.addEventListener("click",this.closeDialogWithoutSelection.bind(this))},afterRender:function(){this.fireTracking("Opened")},show:function(){this.$el.show(),this.fireTracking("Opened")},closeDialogWithoutSelection:function(a){a.stopPropagation(),a.preventDefault(),this.$el.hide()},closeDialog:function(a){a.stopPropagation(),a.preventDefault(),this.$el.hide(),this.fireTracking("Closed")},languageSelected:function(a){a.stopPropagation(),a.preventDefault();var b,f=a.currentTarget.getAttribute("data-isCurrentLanguage"),g=a.currentTarget.getAttribute("data-locale").toLowerCase(),h=this.createTrackingOpts({appInteraction:": Selected "+a.currentTarget.innerHTML,userLocale:g,userNewLocale:g}),i={pref_lang:g.replace(/[-_][a-z]{2}$/,"")};if("true"===f)this.$el.hide();else{c.track(h,null,!1),setTimeout(function(){window.location.href=a.currentTarget.href}.bind(this),300);try{b=JSON.parse(d.getCookie(e))||{},b=_.extend(b,i),d.setCookie(e,JSON.stringify(b))}catch(j){d.setCookie(e,JSON.stringify(i)),window.Bugsnag.notifyException(j,"Language Selector Cookie Modification Error")}}},createTrackingOpts:function(a){var b=_.extend(a,{appInteraction:SH.OMN.pageName+": Language Selector"+a.appInteraction,appInteractionType:SH.OMN.pageName+": Language Selector",appInteractionPage:SH.OMN.pageName,pageType:SH.OMN.pageType,pageName:SH.OMN.pageName});return b},fireTracking:function(a){var b=this.createTrackingOpts({appInteraction:": "+a});c.track(b,null,!1)}})}),define("common-globalheader",["component","common-global-header-navigation","common-globalheader-view"],function(a,b,c){"use strict";var d=a.extend({name:"GlobalHeader",init:function(){var a,d=this.options;d.globalSearch||!0,d.type,this.view=new c({el:".gh-container"}),a=new b({type:d.type||null})},render:function(){this.view.render()},hide:function(){var a=!0;return this.view.el.classList.add("hide"),a},unhide:function(){this.view.el.classList.remove("hide")},dispose:function(){this.view.dispose()}});return d}),define("common-globalheader-model",["foobunny","global_context","sh_global_registry"],function(a,b,c){"use strict";var d=a.BaseModel.extend({initialize:function(a){}});return d}),define("common-globalheader-view",["foobunny","application_helper","global_context","i18n"],function(a,b,c,d){"use strict";var e=a.BaseView.extend({initialize:function(a){this.subscribeEvent("searchView:triggerGlobalSearch",this.onSearchTrigger),this.subscribeEvent("searchView:closedGlobalSearch",this.onSearchTrigger)},onSearchTrigger:function(a){this.el.classList.toggle("search-active")}});return e}),define("common-globalheader-app-config",function(){"use strict";var a={search:{searchEnable:!1},homepage:{searchEnable:!1}};return a}),define("dust-i18n-helper",["i18n"],function(a){dust.helpers.i18nHelper=function(b,c,d,e){var f=e.label||c.get("label"),g="!!! ERROR",h=a.get(f);return h.indexOf(g)!==-1&&(h=f),b.write(h),b}}),define("common-globalheader-full-config",["common-global-header-menuDefinition","common-language-selector","sh_global_registry"],function(a,b,c){"use strict";var d={discovery:[{keyId:"find-events",className:"expand",label:a.findEvents.label,title:a.findEvents.title,children:[a.sports,a.concerts,a.theater],giftCards:!1,sell:!0,help:!0,languageSelector:{show:b.shouldDisplayLanaguageSelector(),label:b.getGlobalHeaderSetting().label}},{keyId:"search",title:a.search.title,label:a.search.label,redirect:!1}],myActions:[{keyId:"sell-tickets",label:a.sellTickets,href:a.sellTickets.href,title:a.sellTickets.title},{keyId:"my-tickets",label:a.myTickets.label,title:a.myTickets.title,children:[a.orders,a.listings,a.sales,a.payments]},{keyId:"my-profile",labelSignedOut:a.signIn.labelSignedOut,labelSignedIn:a.signIn.labelSignedIn,title:a.signIn.title,className:"expand",children:[a.myhub,a.giftCodes,a.settings,a.signOut]}],secondaryNavigation:[{keyId:"help",helpId:"header-help",label:a.help.label,title:a.help.title,children:[a.helpTopics,a.contactUs]},{keyId:"notifications",label:a.notifications.label,id:"goroostcom-bell"},{keyId:"site-menu",title:a.menu.title,label:a.menu.label}]};b.shouldDisplayLanaguageSelector()&&d.secondaryNavigation.push(b.getGlobalHeaderSetting());var e=c.getSiteId(),f="gs.features."+e+".common.enableSocial",g=c.getFeatureValue(f,"boolean");if(g){var h=a.activity,i=a.friends;d.myActions[2].children.splice(1,0,h,i)}var j=JSON.parse(JSON.stringify(d)),k=JSON.parse(JSON.stringify(d)),l=JSON.parse(JSON.stringify(d));return delete j.secondaryNavigation[0].children,j.secondaryNavigation[0].href=a.help.href["en-us"],delete k.secondaryNavigation[0].children,k.secondaryNavigation[0].href=a.help.href["en-gb"],[j,l].forEach(function(b){b.secondaryNavigation.unshift({keyId:"gift-cards",label:a.giftCards.label,title:a.giftCards.title,href:a.giftCards.href}),b.discovery.forEach(function(a){a.hasOwnProperty("giftCards")&&(a.giftCards=!0)})}),{"en-us":j,"en-ca":j,"en-gb":k,"de-de":d,"fr-fr":d,"fr-ca":d,"es-mx":l,"pt-pt":d,"es-es":d,"it-it":d,"nl-nl":d,"de-at":d,"nl-be":d,"fr-be":d,"en-ie":d,"fi-fi":d,"fr-lu":d,"de-lu":d,"el-gr":d,"pl-pl":d,"sv-se":d,"da-dk":d,"cs-cz":d}}),define("common-global-header-menuDefinition",["urlUtil"],function(a){"use strict";var b={search:{label:"common.global_header_navigation.search.searchText",title:"common.global_header_navigation.search.searchText"},findEvents:{label:"common.global_header_navigation.search.title",title:"common.global_header_navigation.search.title"},sports:{href:a.formatUrl("/sports-tickets/category/28/"),title:"common.global_header_navigation.sports.text",label:"common.global_header_navigation.sports.text"},concerts:{href:a.formatUrl("/concert-tickets/category/1/"),title:"common.global_header_navigation.music.text",label:"common.global_header_navigation.music.text"},theater:{href:a.formatUrl("/theater-tickets/category/174/"),title:"common.global_header_navigation.theater.text",label:"common.global_header_navigation.theater.text"},myTickets:{label:"common.global_header_navigation.mytickets.title",title:"common.global_header_navigation.mytickets.title"},sellTickets:{title:"common.global_header_navigation.sell.title",label:"common.global_header_navigation.sell.title"},orders:{href:a.formatUrl("/my/orders/"),title:"common.global_header_navigation.myorders.text",label:"common.global_header_navigation.myorders.text"},listings:{href:a.formatUrl("/my/listings/"),title:"common.global_header_navigation.mylistings.text",label:"common.global_header_navigation.mylistings.text"},sales:{href:a.formatUrl("/my/sales/"),title:"common.global_header_navigation.mysales.text",label:"common.global_header_navigation.mysales.text"},payments:{href:a.formatUrl("/my/payments/"),title:"common.global_header_navigation.mypayments.text",label:"common.global_header_navigation.mypayments.text"},signIn:{labelSignedOut:"common.global_header_navigation.signin.title",labelSignedIn:"common.global_header_navigation.profile",title:"My Profile"},signOut:{label:"common.global_header_navigation.signout.text",href:"javascript:void(0)",title:"Sign Out",menuItemClassName:"sign-out"},myhub:{href:a.formatUrl("/my/profile/"),label:"common.global_header_navigation.myhub.text",title:"My Hub"},activity:{href:a.formatUrl("/my/activity/"),label:"common.global_header_navigation.activity.text",title:"Activity Feed"},friends:{href:a.formatUrl("/my/friends/"),label:"common.global_header_navigation.friends.text",title:"Friends"},giftCodes:{href:a.formatUrl("/my/rewards/"),label:"common.global_header_navigation.rewards.text",title:"Gift Codes"},settings:{href:a.formatUrl("/my/settings/"),label:"common.global_header_navigation.setting.text",title:"Settings"},help:{label:"common.global_header_navigation.help.text",title:"common.global_header_navigation.help.text",href:{"en-us":"https://stubhub.custhelp.com/","en-gb":"https://stubhub-uk.custhelp.com/"}},giftCards:{href:a.formatUrl("/gift-cards/"),label:"common.global_header_navigation.giftcards.title",title:"common.global_header_navigation.giftcards.title"},helpTopics:{href:{"en-us":"https://stubhub-feedback.uservoice.com","en-ca":"https://stubhub-feedback.uservoice.com","en-gb":"https://stubhubuk2.uservoice.com","de-de":"https://stubhubde.uservoice.com","fr-fr":"https://stubhubfr.uservoice.com","fr-ca":"https://stubhubfrca.uservoice.com","es-mx":"https://stubhubmex.uservoice.com","pt-pt":"https://stubhubptpt.uservoice.com","es-es":"https://support.stubhub.es/","it-it":"https://support.stubhub.it/","nl-nl":"https://support.stubhub.nl/","de-at":"https://support.stubhub.co.at/","nl-be":"https://support.stubhub.be/","fr-be":"https://support.stubhub.be/","en-ie":"https://support.stubhub.ie/","fi-fi":"https://support.stubhub.fi/","fr-lu":"https://support.stubhub.lu/","de-lu":"https://support.stubhub.lu/","el-gr":"https://support.stubhub.gr/","pl-pl":"https://support.stubhub.pl/","sv-se":"https://support.stubhub.se/","da-dk":"https://support.stubhub.dk/","cs-cz":"https://support.stubhub.cz/"},title:"common.global_header_navigation.helptopics.text",label:"common.global_header_navigation.helptopics.text"},contactUs:{href:a.formatUrl("/contact-us/"),title:"common.global_header_navigation.contactus.text",label:"common.global_header_navigation.contactus.text",openNew:!0},notifications:{label:"common.global_header_navigation.notifications.title",title:"common.global_header_navigation.notifications.title"},menu:{label:"common.global_header_navigation.hamburger.alt",title:"common.global_header_navigation.hamburger.alt"}};return b}),define("common-globalheader-min-config",["common-global-header-menuDefinition","common-language-selector"],function(a,b){"use strict";var c,d={myActions:[{keyId:"my-profile",labelSignedOut:a.signIn.labelSignedOut,labelSignedIn:a.signIn.labelSignedIn,title:a.signIn.title,className:"expand",children:[a.myhub,a.signOut]}],secondaryNavigation:[{keyId:"help",label:a.help.label,title:a.help.title,className:"expand",children:[a.helpTopics,a.contactUs]},{keyId:"notifications",label:a.notifications.label,id:"goroostcom-bell"},{keyId:"site-menu",label:a.menu.label,title:a.menu.title}]};b.shouldDisplayLanaguageSelector()&&(c=b.getGlobalHeaderSetting(),c.isMinimal=!0,d.secondaryNavigation.push(c),d.secondaryNavigation[0].languageSelector=c);var e=JSON.parse(JSON.stringify(d));return delete e.secondaryNavigation[0].children,delete e.secondaryNavigation[0].className,e.secondaryNavigation[0].href=a.help.href["en-us"],{"en-us":e,"en-ca":e,"en-gb":d,"de-de":d,"fr-fr":d,"fr-ca":d,"es-mx":d,"pt-pt":d,"es-es":d,"it-it":d,"nl-nl":d,"de-at":d,"nl-be":d,"fr-be":d,"en-ie":d,"fi-fi":d,"fr-lu":d,"de-lu":d,"el-gr":d,"pl-pl":d,"sv-se":d,"da-dk":d,"cs-cz":d}}),define("common-global-header-navigation",["component","common-global-header-navigation-view","common-login","common-globalheader-app-config","common-globalheader-full-config","common-globalheader-min-config"],function(a,b,c,d,e,f){"use strict";var g=a.extend({name:"GlobalHeaderNavigation",init:function(){var a,g,h,i=this,j=i.options,k=j.type,l=d[SH.appName];k=k&&"minimal"===k.toLowerCase()?"minimal":"full","minimal"===k?(a=f[SH.locale],g=!1):(a=e[SH.locale],g=!0),l&&!l.searchEnable&&a.discovery&&(g=!1,a.discovery.splice(1,1)),h=c.getInstance({}),i.view=new b({el:".gh-navigation",loginInstance:h,contentConfig:a,searchEnabled:g,type:k}),i.render()},render:function(){this.view.render()},dispose:function(){this.view.dispose()}});return g}),define("common-global-header-navigation-model",["dust-i18n-helper","foobunny","sh_global_registry"],function(a,b,c){"use strict";var d=b.BaseModel.extend({initialize:function(a){var b=a.contentConfig,d=!1,e=a.searchEnabled,f=a.type;this.loginInstance=a.loginInstance,d=this.checkLoginStatus(),this.set("headerMenu",b),this.set("locale",c.getLocale()),this.set("logoURL",location.origin),this.set("isLoggedIn",d),this.set("searchEnabled",e),"full"===f&&this.set("full",!0),this.setSellParams()},checkLoginStatus:function(){var a=this.loginInstance.session.getLoginStatus(),b=!1;return"1"!==a&&"true"!==a||(b=!0),b},setSellParams:function(){var a,b=location.href;b.match(/event\/(\d+)/)?(a=b.match(/event\/(\d+)/),this.set("sellParams","/sell/hub/login?eventId="+a[1])):b.match(/find\/s\/\?q=(\D+)/)?(a=b.match(/find\/s\/\?q=(\D+)/),this.set("sellParams","/sell/hub/performerSearch?id="+a[1])):b.match(/find\/s\/\?q=(\d+)/)?(a=b.match(/find\/s\/\?q=(\d+)/),this.set("sellParams","/sell/hub/performerSearch?id="+a[1])):b.match(/(grouping)\/(\d+)/)?(a=b.match(/(grouping)\/(\d+)/),this.set("sellParams","/sell/hub/searchEvent?id="+a[2]+"&type=grouping")):b.match(/(performer)\/(\d+)/)?(a=b.match(/(performer)\/(\d+)/),this.set("sellParams","/sell/hub/searchEvent?id="+a[2]+"&type=performer")):this.set("sellParams","/sell/hub")}});return d}),define("common-global-header-navigation-view",["foobunny","application_helper","sh_global_registry","common-global-header-navigation-model","common-global_header_navigation-i18n-props","i18n","url-parser","common-language-selector"],function(a,b,c,d,e,f,g,h){
"use strict";var i="active",j="collapse",k="open",l=a.BaseView.extend({template:"global_header_navigation",events:{"click .sign-out a":"logout","click .gh-menu":"onMenuClick","click .menu-list a":"setTracking","click .sh-logo":"setTracking","click .sell-tickets a":"setTracking","click .sell-tickets h3":"setTracking","click .sell-submenu":"setTracking","click .gift-cards a":"setTracking","click .help > a:not(.help .submenu a) ":"setTracking","click .giftcards-submenu":"setTracking","click .language-selector":"openLanguageSelector","click .language-selector-sub":"openLanguageSelector"},views:{},initialize:function(){var a=this.options,c=a.contentConfig,g=a.type;b.insertSEOMetaTags(),f.merge(e),this.miniHeader="minimal"===g,this.model=new d({contentConfig:c,type:g,loginInstance:a.loginInstance,searchEnabled:a.searchEnabled}),this.closeString=f.get("common.global_header_navigation.close.text"),this.menuString=f.get("common.global_header_navigation.menu.text"),this.loginInstance=a.loginInstance,this.activeMenu=null,this.activeSubMenuFindEvents=null,this.searchEnabled=a.searchEnabled,this.subscribeEvent("login:validUserSession",this.onSignInSuccess),this.subscribeEvent("login:signInSuccess",this.onSignInSuccess),this.subscribeEvent("login:registrationSuccess",this.onSignInSuccess),this.miniHeader&&this.subscribeEvent("component:globalHeader:titleUpdate",this.updateHeaderTitle),document.body.addEventListener("click",this.closeActiveMenu.bind(this))},afterRender:function(){var a,b,c,d=this.el;return d?(b=d.querySelector(".gh-navigation-content"),this.searchEnabled&&require(["search-search-component"],function(b){a=new b({element:".borderless-search-bar"}),a.render(),c=a.view.searchRenderPromise,c?c.done(this.showSearchComponent.bind(this)):this.showSearchComponent()}.bind(this)),void(this.siteMenu=b.querySelector(".site-menu button"))):void setTimeout(this.afterRender.bind(this),400)},showSearchComponent:function(){var a,b=this.el;b&&(a=b.querySelector(".gh-navigation-content .search-btn"),a&&a.classList.toggle("hidden"))},onMenuClick:function(a){var b,c=a.currentTarget,d=a.target,e=d.classList,f=this.activeMenu;if(a.stopPropagation(),!c.classList.contains("notifications")){if(e.contains("menu-header-link")&&!c.classList.contains("sell-tickets"))return void this.onSubMenuClick(d,c);if(!c.classList.contains("sell-tickets")){if(f&&(b=this.activeMenu.querySelector(".submenu"),b&&b.classList.remove(j),f.classList.toggle(i)),c.classList.contains("site-menu"))return void this.onMenuBtnClick(a);if(e.contains("search-btn"))return this.onSearchClick(),void this.setTracking(a);c===f?this.closeActiveMenu():(document.documentElement.classList.add("menu-active"),c.classList.add(i),this.activeMenu=c,this.siteMenu.innerHTML=this.menuString,this.siteMenu.classList.remove("open"))}}},onSubMenuClick:function(a,b){var c=this.activeSubMenu||b.querySelector(".submenu"),d=a.closest(".submenu");c===d?d.classList.toggle(j):(c.classList.add(j),d.classList.remove(j),this.activeSubMenu=d)},onMenuBtnClick:function(a){var b,c=(a.currentTarget,this.findEventsMenu),d=a.target,e=this.helpMenu,f=this.activeMenu;d.classList.contains(k)?(d.innerHTML=this.menuString,d.classList.remove(k)):(d.innerHTML=this.closeString,d.classList.add(k)),f===(e||c)?(document.documentElement.classList.remove("menu-active"),this.activeMenu=null,this.activeSubMenu&&(this.activeSubMenu.classList.add(j),this.activeSubMenu=null)):(this.miniHeader?(e=this.helpMenu=this.helpMenu||this.el.querySelector(".help"),b=e):(c=this.findEventsMenu=this.findEventsMenu||this.el.querySelector(".find-events"),b=c),b.classList.add(i),document.documentElement.classList.add("menu-active"),this.activeMenu=b)},closeActiveMenu:function(a){var b,c=this.activeMenu,d=this.siteMenu;this.activeSubMenu&&(this.activeSubMenu.classList.add(j),this.activeSubMenu=null),c&&(document.documentElement.classList.remove("menu-active"),c.classList.remove(i),b=this.activeMenu.querySelector(".submenu"),b&&b.classList.remove(j),d.innerHTML=this.menuString,d.classList.remove("open"),this.activeMenu=null)},onMenuExpandClick:function(a){var b=a.currentTarget;b.classList.toggle(j)},onSearchClick:function(a){this.closeActiveMenu(),this.publishEvent("searchView:triggerGlobalSearch")},onSignInSuccess:function(a){var b,c=this.el.querySelector(".gh-navigation-content");c.classList.contains("signed-in")||(c.classList.add("signed-in"),b=c.querySelector(".signin-link"),b.innerHTML=f.get("common.global_header_navigation.profile")),this.showNotificationBell()},onLogOutSuccess:function(){this.el.classList.remove("signed-in")},updateHeaderTitle:function(a){var b;this.headerTitleEl=b=this.headerTitleEl||this.el.querySelector(".header-title"),a&&(b.innerHTML=a)},sendRedirect:function(a){var b=a.getAttribute("href"),c=a.getAttribute("title"),d=a.getAttribute("data-open");setTimeout(function(){return d?void window.open(b,c):void(g.validate(b)&&g.redirect(b))},500)},setTracking:function(a){var c=a.target,d="UE: Navigation",e=c.getAttribute("title"),f=c.getAttribute("track-title"),g=!c.getAttribute("data-noredirect"),h={appInteraction:d+": "+(f||e),appInteractionType:d,appInteractionPage:SH.OMN.pageType,pageName:SH.OMN.pageName,siteSections:SH.OMN.siteSections};a.preventDefault(),a.stopPropagation(),window.s||b.initOmniture(),b.track(h,null,!1),g&&this.sendRedirect(c)},logout:function(a){a&&(a.preventDefault(),a.stopPropagation(),this.closeActiveMenu(a)),this.loginInstance.signOut().done(function(){window.location=g.constructURL({path:"/"})}).fail(function(){window.location=g.constructURL({path:"/"})})},showNotificationBell:function(){var a,b,d=c.getFeatureValue("gs.features."+c.getSiteId()+".enableBell","boolean");if(d)try{b=window._roost||[],a=this.el.querySelector(".gh-navigation-content"),a.classList.add("notifications-enabled"),b.push(["onload",this.onRoostWdigetLoad.bind(this)])}catch(e){window.Bugsnag.notifyException(e,"showNotificationBell")}},onRoostWdigetLoad:function(){var a=window._roost||[];a.showBell()},openLanguageSelector:function(){var a,b=document.getElementById("language-selector-container"),c=h.component;b?this.views.languageSelector.show():(a=document.createElement("div"),a.id="language-selector-container",document.getElementById("main").appendChild(a),this.views.languageSelector=new c,this.views.languageSelector.render())}});return l}),define("common-globalContextVars",["foobunny","common-utils","shcookie","common-login"],function(a,b,c,d){"use strict";var e={},f="STUB_PERSISTENT",g={},h=["events","performers","categories","groupings","eventGroupings","recommendations"],i="_null",j=function(){var a;return s&&s.visitor&&(a=s.visitor.getAnalyticsVisitorID()),a},k=function(){return c.readCookielet(f,"stub_uid")};return g.initialize=function(){var b={},f=d.getInstance();b.completeUrl=location.href,b.protocol=location.protocol,b.shVisitorId=j()||i,b.uuid=f.session.getUUID(),b.dcCookie=c.getCookie("DC")||i,b.userGuid=f.session.getGUID()||i,b.userId=k()||i,SH.globalProperties=b,_.extend(e,a.mediator),e.subscribeEvent("module:globalcontextvars:apiresponseready",g.setAPIResponses)},g.setAPIResponses=function(a){for(var b=!1,c=a.APIName?a.APIName.toLowerCase():"",d=0;d<h.length;d++)if(h[d].toLowerCase()===c){a.callback?e[c]=a.callback.call(a.scope,a):e[c]=a.data,b=!0;break}b&&(SH.globalProperties.APIResponses=e,this.publishEvent("module:globalcontextvars:apiresponseupdated"))},g.initialize(),g}),define("loggerUtil",["logger","shcookie"],function(a,b){"use strict";var c="1",d="JSESSIONID",e={},f=["fatal","error","warn","info","debug"],g="_null",h="s_vi",i="S_VI",j="SH_VI",k=function(){return SH.enableLog},l=function(){return SH.enableConsoleLog},m=function(){var a,c=[],d=g;return a=b.getCookie(h)||b.getCookie(i),a&&(c=a.split("|")),2===c.length&&(d=c[1].replace("[CE]","")),d},n=function(){var a={};return a.appName=SH.appName||g,a.appVersion=SH.appVersion||g,a.appCommonVersion=SH.appCommonVersion||g,a.browserUrl=window.location.href,a.domainId=c,a.jsessionId=b.getCookie(d)||g,a.omnitureVisitorId=m(),a.timestamp=Date.now(),a.userAgent=navigator.userAgent,a.visitorId=b.getCookie(j)||g,a},o=function(a){var b={};return b.httpStatus=a.status||g,b.errorMessage=a.statusText||g,b.activityId=a.getResponseHeader("activityID")||g,b.comStubhubDye=a.getResponseHeader("com-stubhub-dye")||g,b.comStubhubDyePath=a.getResponseHeader("com-stubhub-dye-path")||g,b},p=function(b,c,d,e){if(k()||l()){var f="",g=[],h=n(),i=$.extend(h,d);if(c){var j=o(c);i=$.extend(i,j)}for(var m in i){var p=String(i[m]);/\s/.test(p)&&(p='"'+p+'"'),g.push(m+"="+p)}f=g.join(" ");try{a[e](f,b)}catch(q){}}};return e.fatal=function(a,b,c){return p(a,b,c,f[0])},e.error=function(a,b,c){return p(a,b,c,f[1])},e.warn=function(a,b,c){return p(a,b,c,f[2])},e.info=function(a,b,c){return p(a,b,c,f[3])},e.debug=function(a,b,c){return p(a,b,c,f[4])},e}),define("message-banner",["component","message-banner-view","global_context","application_helper"],function(a,b,c,d){"use strict";var e=a.extend({init:function(){var a=this;this.view=new b({el:this.options.element,attributes:this.options.attributes}),this.options.attributes.timer&&"number"==typeof this.options.attributes.timer&&setTimeout(function(){a.dispose()},this.options.attributes.timer)},render:function(){this.view.render()},dispose:function(){this.view.dispose()}});return e}),define("message-banner-view",["foobunny","i18n","common-message_banner-i18n-props","shcookie","sh_global_registry"],function(a,b,c,d,e){"use strict";var f=a.BaseView.extend({initialize:function(a){b.merge(c),this.showMsgBanner()},template:"message_banner",events:{"click .sh-msg-banner-close":"closeMsgBanner"},types:{info:"icons_sh_info.svg#alert4b_white",warn:"icons_sh_info.svg#alert1b_warning_white",success:"icons_sh_info.svg#check_white"},context:function(){var a=b.get(this.options.attributes.message)||"GENERIC MESSAGE BANNER",c=this.options.attributes.type||"info",d=this.types[c];return{messageBanner:{message:a,svgicon:SH.appCommon.staticHost+"/resources/shape/images/common-"+SH.appCommonVersion+"/"+d,svgclose:SH.appCommon.staticHost+"/resources/shape/images/common-"+SH.appCommonVersion+"/delete.svg",type:c}}},isShowMsgBanner:function(){var a=void 0==d.readCookielet("SH-UI-Cookie","outageBanner"),b="showOutageBanner",c=this.isFeatureToggle(b);return!(!a||!c)},isFeatureToggle:function(a){var b=e.getSiteId(),a="gs.features."+b+".common."+a,c=e.getFeatureValue(a,"boolean");return c},closeMsgBanner:function(){$(".sh-msg-banner-wrapper").hide()},showMsgBanner:function(){var a={},b=this.options.attributes.timer||15e3;this.isShowMsgBanner()&&(this.render(),setTimeout(this.closeMsgBanner,b),a.isSession=!0,d.writeCookielet("SH-UI-Cookie","outageBanner",!0,a))},calcHeight:function(){var a,b=$("#search-container").height(),c=$("#global-header-container").height(),e=$("#banner-container").height(),f=$("#message-banner-container"),g=d.getCookie("cookieBanner"),h="Banner.showCookieBanner",i=this.isFeatureToggle(h);void 0==g&&1==i&&(e=52),a=b+e+c,$(f).css("top",a)}});return f}),define("twofa-helper",["application_helper"],function(a){var b={beforeAPIRequest:function(a,b){a.addClass("disabled"),b.addClass("fade")},handleAPIResponse:function(a,b){a.removeClass("disabled"),b.removeClass("fade")},showError:function(a,b){a.html(b).removeClass("hidden"),this.setTracking(b)},clearError:function(a){a.empty().addClass("hidden")},getURLParam:function(a,b){var c="[\\?&]"+b+"=([^&#]*)",d=new RegExp(c),e=d.exec(a);return e?e[1]:""},setTracking:function(b){var c="UE: 2FA Component",d={};d={appInteraction:c+": "+b,appInteractionType:c,appInteractionPage:SH.OMN.pageType,pageName:SH.OMN.pageName,siteSections:SH.OMN.siteSections,userStatus:s.eVar69,userGUID:s.eVar66,socialSiteInteraction:s.eVar25},a.track(d,null,!1)},convertEmailAddressField:function(a){var b=a.customercontact;return b.emailAddress&&(b.emailaddress=b.emailAddress,delete b.emailAddress),a}};return b}),define("common-twofa-models-checkforchallenge",["foobunny"],function(a){"use strict";var b=a.BaseModel.extend({initialize:function(a){this.options=a},url:function(){return"/shape/tns/userRiskVerification/v2/decisionservice/"+this.options.user_guid}});return b}),define("common-twofa-models-sendcode",["foobunny","i18n","global_context"],function(a,b,c){"use strict";var d=a.BaseModel.extend({initialize:function(a){this.options=a||{guid:""}},url:function(){return"/shape/tns/userRiskVerification/v2/sendChallenge/"+this.options.guid}});return d}),define("common-twofa-models-verifycode",["foobunny","i18n","global_context"],function(a,b,c){"use strict";var d=a.BaseModel.extend({initialize:function(a){this.options=a||{guid:""}},url:function(){return"/shape/tns/userRiskVerification/v2/verification/"+this.options.guid}});return d}),define("common-twofa",["foobunny","component","i18n","twofa-helper","common-twofa-i18n-props","common-twofa-views-twofa-layout","common-twofa-models-checkforchallenge"],function(a,b,c,d,e,f,g){"use strict";var h,i=a.mediator,j=b.extend({name:"TwoFA",init:function(){var a=this;a.options.element="#twofa_container",a.options.attributes&&this.setOptions(a.options.attributes),c.merge(e),h=a},setOptions:function(a){var b=this,c=b.options.subscriber;b.view=new f({subscriber:c,el:b.options.element,attributes:a,component:b}),b.view.afterRender=function(){b.afterRender()},b.view.on(c+":twofa:close",this.setTwoFAVisibility(!1))},render:function(){var a=this;this.view.on(this.options.subscriber+":twofa:close",function(){a.setTwoFAVisibility(!1)}),$(this.options.element).addClass("full-overlay"),this.view.render(),this.setTwoFAVisibility(!0)},afterRender:function(){var a=$(this.options.element),b=a.find(".sh-ui-twofa"),c=($(window).outerHeight()-b.outerHeight())/2;c=c<0?0:c,b.css("top",c+"px"),a.css("top",$(window).scrollTop()+"px")},setTwoFAVisibility:function(a){this.setVisibility(a)},dispose:function(){$(this.options.element).removeClass("full-overlay"),this.view&&"function"==typeof this.view.dispose&&this.view.dispose()}});return j.getInstance=function(){return h},j.challengeUser=function(b){var c=b.subscriber,e=b.guid,f=b.payload,h=new g({user_guid:e}),k={},l=a.utils.deferred();return h.save(null,{attrs:{tmRefId:f.tmRefId,operation:f.operation,data:f.data},success:function(a,f){var g=f&&f.decisionserviceresult;if(f&&g)if(g.presentChallenge){"function"==typeof b.onChallenge&&b.onChallenge.call(null),k=d.convertEmailAddressField({guid:e,challengeId:g.challengeId,challengeTokenState:g.challengeTokenData,customercontact:g.customercontact,codeSent:g.codeSent===!0}),i.publishEvent(c+":twofa:displayOn");var h=new j({subscriber:c,attributes:k});i.subscribeEvent(c+":twofa:close",function(a){a.challengeCleared?l.resolve(g):l.reject(g),h.dispose()}),h.render()}else i.publishEvent(c+":twofa:noChallenge"),l.resolve(g);else i.publishEvent(c+":twofa:challengeUserFail"),l.reject(f)},error:function(a){i.publishEvent(c+":twofa:challengeUserFail"),l.reject(a)}}),l.promise()},j}),define("common-twofa-viewcontainers-twofa",["foobunny","common-twofa-views-send-code","common-twofa-views-verify-code","common-twofa-views-contact-customer-service","twofa-helper"],function(a,b,c,d,e){"use strict";var f=a.ViewContainer.extend({initialize:function(a){var c=a.attributes?a.attributes.customercontact:null,f="custcontact"===e.getURLParam(window.location.href,"pageview"),g=!c||!c.emailaddress&&(!c.phone||c.phone.length<1);this.options=a,g||f?this.currentView=new d:this.currentView=new b(a),this.subscribeEvents()},el:"#twofa-layout-body",subscribeEvents:function(){var a=this;this.subscribeEvent("twofa:showSendCodeView",function(b){a.showView("sendCode",_.extend(this.options,b))}),this.subscribeEvent("twofa:showVerifyCodeView",function(b){a.showView("verifyCode",b)}),this.subscribeEvent("twofa:showContactCustServiceView",function(b){a.showView("contactCustService",b)})},showView:function(a,e){var f,g,h=this;switch(this.animateView(),a){case"sendCode":f=new b(e);break;case"verifyCode":f=new c(e);break;case"contactCustService":f=new d}g=this.show(f),g.done(h.attachAnimation())},attachAnimation:function(){var a=$(".sh-ui-twofa");a.addClass("flipInLeft").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a.removeClass("flipOutRight flipInLeft")})},animateView:function(){$(".sh-ui-twofa").removeClass("flipInLeft").addClass("flipOutRight")}});return f}),define("common-twofa-views-contact-customer-service",["foobunny","sh_global_registry","i18n"],function(a,b,c){"use strict";var d=a.BaseView.extend({template:"contactcustservice",events:{"click .cancel":"closeTwoFA"},initialize:function(){},closeTWOFA:function(){var a=self.options.subscriber;this.publishEvent(a+":twofa:close",{challengeCleared:!1})},context:function(){return{customerServiceNumber:c.getStoreSpecific("common.global.customerservice.contact")}}});return d}),define("common-twofa-views-send-code",["foobunny","common-twofa-models-sendcode","common-twofa-models-verifycode","i18n","twofa-helper","sh_global_registry"],function(a,b,c,d,e,f){"use strict";var g=a.BaseView.extend({initialize:function(a){this.options=a,this.sendCodeModel=new b(this.options.attributes?this.options.attributes:{}),this.verifyCodeModel=new c(this.options.attributes?this.options.attributes:{}),this.cleanPhoneOption=[],this.customerServiceNumber=d.getStoreSpecific("common.global.customerservice.contact")},omitWrapper:!0,template:"sendcode",events:{"click #send-code-button":"sendOrVerifyCode","click .send-code-option-list":"selectMode","keyup .verify-code-input":"enableVerifyButton","keypress .verify-code-input":"validateKey","click #cancel":"closeTWOFA"},uiEl:{$sendCodeOptionsContainer:".send-code-options-container",$sendCodeOptionsList:".send-code-option-list",$sendCodeError:"#send-code-error",$sendCodeButton:"#send-code-button",$verifyCodeInput:".send-code-have-code-option input.verify-code-input",$verifyCodeError:"#send-code-verify-error"},sendOrVerifyCode:function(){var a=this.isCodeOptionSelected()?_.bind(this.verifyCode,this):_.bind(this.sendCode,this);this.uiEl.$sendCodeButton.hasClass("disabled")||(e.beforeAPIRequest(this.uiEl.$sendCodeButton,this.uiEl.$sendCodeOptionsContainer),e.clearError(this.uiEl.$sendCodeError),e.clearError(this.uiEl.$verifyCodeError),a().always(_.bind(function(){e.handleAPIResponse(this.uiEl.$sendCodeButton,this.uiEl.$sendCodeOptionsContainer)},this)))},sendCode:function(){var a,b,c,f=this,g={};return this.isSingleOption()?(a="Email",b=this.options.attributes.customercontact.emailaddress.encrypted,c=this.options.attributes.customercontact.emailaddress.masked):(a=this.selectedOption.data("medium"),b=this.selectedOption.data("contact"),c=this.selectedOption.data("masked")),g={challengeId:this.options.attributes.challengeId,medium:a,data:b},this.sendCodeModel.save(null,{contentType:"application/json",data:JSON.stringify(g)}).done(function(a){a&&a.userChallengeResponse?(g.subscriber=f.options.subscriber,g.masked=c,g.tokendata=f.options.attributes.challengeTokenState,g.guid=f.options.attributes.guid,f.publishEvent("twofa:showVerifyCodeView",g),e.setTracking("sendCode success")):e.showError(f.uiEl.$sendCodeError,d.get("common.twofa.error.sendcode.generic"))}).fail(function(a){var b=d.get("common.twofa.error.sendcode.generic");a&&a.responseJSON&&a.responseJSON.error&&"tns.challenge.max.limit.exceeded"===a.responseJSON.error.code&&(b=d.get("common.twofa.error.sendcode.maxlimitexceeded")+"<br>"+f.customerServiceNumber),e.showError(f.uiEl.$sendCodeError,b)})},verifyCode:function(){var a,b=this;return a={challengeId:this.options.attributes.challengeId,tokendata:this.options.attributes.challengeTokenState,verifyCode:this.uiEl.$verifyCodeInput.val()},this.verifyCodeModel.save(null,{contentType:"application/json",data:JSON.stringify(a)}).done(function(a){if(!a||!a.userVerificationResponse||!a.userVerificationResponse.codeValid)return void e.showError(b.uiEl.$verifyCodeError,d.get("common.twofa.error.verifycode.generic"));switch(a.userVerificationResponse.codeValid.toLowerCase()){case"invalid":e.showError(b.uiEl.$verifyCodeError,d.get("common.twofa.error.incorrectcode")),b.uiEl.$verifyCodeInput.addClass("error");break;case"expired":e.showError(b.uiEl.$verifyCodeError,d.get("common.twofa.error.invalidcode")),b.uiEl.$verifyCodeInput.addClass("error");break;case"valid":var c=b.options.subscriber;b.publishEvent(c+":twofa:success",{challengeCleared:!0}),b.publishEvent(c+":twofa:close",{challengeCleared:!0}),e.setTracking("verifyCode success")}}).fail(function(a){var c=d.get("common.twofa.error.verifycode.generic");if(void 0!==a&&void 0!==a.responseJSON&&void 0!==a.responseJSON.error)switch(a.responseJSON.error.code){case"tns.verify.max.limit.exceeded":c=d.get("common.twofa.error.verifycode.maxlimitexceeded")+"<br>"+b.customerServiceNumber;break;case"tns.verify.failed.decryption":case"tns.verify.failed.activation":c=d.get("common.twofa.error.verifycode.callcustservice")+"<br>"+b.customerServiceNumber}e.showError(b.uiEl.$verifyCodeError,c)})},validateKey:function(a){var b=a.which||a.keyCode;13===b&&this.onClickButton()},enableVerifyButton:function(a){$(a.currentTarget).val().replace(/^\s+/g,"").length>0?this.uiEl.$sendCodeButton.removeClass("disabled"):this.uiEl.$sendCodeButton.addClass("disabled")},selectMode:function(a){this.uiEl.$sendCodeOptionsContainer.hasClass("fade")||$(a.currentTarget).hasClass("selected")||$(a.target).hasClass("verify-code-input")||(this.uiEl.$sendCodeOptionsList.removeClass("selected"),$(a.currentTarget).addClass("selected"),this.selectedOption=$(a.currentTarget),e.clearError(this.uiEl.$sendCodeError),e.clearError(this.uiEl.$verifyCodeError),this.isCodeOptionSelected()?(this.uiEl.$verifyCodeInput.val("").removeClass("hidden"),this.uiEl.$sendCodeButton.text(d.get("common.twofa.verify.button.label")).addClass("disabled")):(this.uiEl.$verifyCodeInput.addClass("hidden"),this.uiEl.$sendCodeButton.text(d.get("common.twofa.sendcode.button.label")).removeClass("disabled")))},closeTWOFA:function(){var a=this.options.subscriber;this.publishEvent(a+":twofa:close",{challengeCleared:!1}),e.setTracking("close component")},isSingleOption:function(){var a=this.options.attributes,b=a.customercontact?a.customercontact.emailaddress:null;return!a.codeSent&&b&&!(this.cleanPhoneOption.length>0)},isCodeOptionSelected:function(){return this.selectedOption&&this.selectedOption.hasClass("have-code-option")},context:function(){try{var a,b,c=!1,e=this.options.attributes.customercontact,g=e.emailaddress,h=e.phone?e.phone:[];h instanceof Array&&h.length>2&&(h=h.slice(0,2));for(var i=0,j=h.length;i<j;i++)"******0000"!==h[i].masked&&this.cleanPhoneOption.push(h[i]);var k=f.getSiteId();return k&&k>1&&(this.cleanPhoneOption=[]),this.isSingleOption()?(a=d.get("common.twofa.code.channel.email"),c=!0,b=g):(a=d.get("common.twofa.code.account"),b=e.emailaddress?e.emailaddress:""),b.length<1&&this.cleanPhoneOption.length<1&&this.publishEvent("twofa:showContactCustServiceView"),{channel:a,emailOnly:c,emailAddress:b,phoneOption:this.cleanPhoneOption,emailOption:g,hasPhone:this.cleanPhoneOption.length>0,haveCodeOption:this.options.attributes.codeSent,error:this.options.error?this.options.error:""}}catch(l){window.Bugsnag.notifyException(l,"--- error  ----")}}});return g}),define("common-twofa-views-header",["foobunny","sh_global_registry"],function(a,b){"use strict";var c=a.BaseView.extend({initialize:function(a){this.component=a.component},el:"#twofa-layout-header",template:"twofa-header",events:{"click #twofa-close-icon":"closeComponent"},closeComponent:function(){var a=this.component.options.subscriber;this.publishEvent(a+":twofa:close",{challengeCleared:!1}),this.component.setVisibility(!1),this.component.dispose()},context:function(){var a="stubhub-logo-blue.svg",c=b,d=c.getSiteId(),e="gs.features."+d+".common.ticketOut.showNewLogo",f=c.getFeatureValue(e,"boolean");return f&&(a="stubhub-logo-ticket-out-white.svg"),{logoClass:f?"newlogo":"",shLogoImgUrl:SH.appCommon.staticHost+"/resources/shape/images/common-"+SH.appCommonVersion+"/"+a}}});return c}),define("common-twofa-views-twofa-layout",["foobunny","common-twofa-views-header","common-twofa-viewcontainers-twofa","i18n","common-global-i18n-props"],function(a,b,c,d,e){"use strict";var f=a.Layout.extend({initialize:function(a){d.merge(e),this.views={header:new b({component:a.component})},this.viewContainers={twofaContainer:new c({subscriber:a.subscriber,element:a.el,attributes:a.attributes})}},template:"twofa-layout"});return f}),define("common-twofa-views-verify-code",["foobunny","common-twofa-models-verifycode","i18n","twofa-helper"],function(a,b,c,d){"use strict";var e=a.BaseView.extend({initialize:function(a){this.options=a,this.model=new b(this.options),this.customerServiceNumber=c.getStoreSpecific("common.global.customerservice.contact")},omitWrapper:!0,template:"verifycode",events:{"click .verify-code-button":"verifyCode","keyup .verify-code-input":"enableVerifyButton","keypress .verify-code-input":"validateKey","click .resend-code":"resendCode"},uiEl:{$verifyCodeButton:"#verify-code-button",$verifyContainerError:".view-container-error",$verifyCodeFieldError:"#verify-code-error",$verifyCodeSysError:"#verify-code-system-error",$verifyContainerActions:".verify-container-action",$verifyCodeInput:".verify-code-input",$verifyResendCode:".verify-code-resend-code"},verifyCode:function(){var a,b=this,e=this.uiEl.$verifyResendCode;this.uiEl.$verifyCodeButton.hasClass("disabled")||(d.beforeAPIRequest(this.uiEl.$verifyCodeButton,this.uiEl.$verifyContainerActions),d.clearError(this.uiEl.$verifyContainerError),a={challengeId:this.options.challengeId,tokendata:this.options.tokendata,verifyCode:this.uiEl.$verifyCodeInput.val()},e.addClass("hidden"),this.verifyCodePromise=this.model.save(null,{contentType:"application/json",data:JSON.stringify(a)}),this.verifyCodePromise.done(function(a){if(d.handleAPIResponse(b.uiEl.$verifyCodeButton,b.uiEl.$verifyContainerActions),!a||!a.userVerificationResponse||!a.userVerificationResponse.codeValid)return void d.showError(b.uiEl.$verifyCodeSysError,c.get("common.twofa.error.verifycode.generic"));switch(a.userVerificationResponse.codeValid.toLowerCase()){case"invalid":d.showError(b.uiEl.$verifyCodeFieldError,c.get("common.twofa.error.incorrectcode")),b.uiEl.$verifyCodeInput.addClass("error"),e.removeClass("hidden");break;case"expired":b.publishEvent("twofa:showSendCodeView",{error:c.get("common.twofa.error.invalidcode")});break;case"valid":var f=b.options.subscriber;b.publishEvent(f+":twofa:success",{challengeCleared:!0}),b.publishEvent(f+":twofa:close",{challengeCleared:!0})}}).fail(function(a){if(d.handleAPIResponse(b.uiEl.$verifyCodeButton,b.uiEl.$verifyContainerActions),void 0!==a&&void 0!==a.responseJSON&&void 0!==a.responseJSON.error)switch(a.responseJSON.error.code){case"tns.verify.max.limit.exceeded":d.showError(b.uiEl.$verifyCodeSysError,c.get("common.twofa.error.verifycode.maxlimitexceeded")+"<br>"+b.customerServiceNumber);break;case"tns.verify.failed.decryption":case"tns.verify.failed.activation":d.showError(b.uiEl.$verifyCodeSysError,c.get("common.twofa.error.verifycode.callcustservice")+"<br>"+b.customerServiceNumber);break;default:d.showError(b.uiEl.$verifyCodeSysError,c.get("common.twofa.error.verifycode.generic"))}else d.showError(b.uiEl.$verifyCodeSysError,c.get("common.twofa.error.verifycode.generic"))}))},validateKey:function(a){var b=a.which||a.keyCode;13===b&&this.verifyCode()},enableVerifyButton:function(a){$(a.currentTarget).val().replace(/^\s+/g,"").length>0?this.uiEl.$verifyCodeButton.removeClass("disabled"):this.uiEl.$verifyCodeButton.addClass("disabled")},resendCode:function(a){a.preventDefault(),a.stopPropagation(),this.publishEvent("twofa:showSendCodeView")},context:function(){var a,b,d=this.options,e=d.medium.toLowerCase();switch(e){case"sms":a=c.get("common.twofa.code.channel.mobile"),b=c.get("common.twofa.code.channel.text");break;case"email":a=c.get("common.twofa.code.channel.email"),b=c.get("common.twofa.code.channel.email");break;case"voice":a=c.get("common.twofa.code.channel.voicemail"),b=c.get("common.twofa.code.channel.voicemail")}return{channel:a,codeFormat:b,device:d.masked}}});return e});